/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var xs=Object.create;var K=Object.defineProperty,Ts=Object.defineProperties,As=Object.getOwnPropertyDescriptor,Ss=Object.getOwnPropertyDescriptors,Ps=Object.getOwnPropertyNames,We=Object.getOwnPropertySymbols,Os=Object.getPrototypeOf,Xe=Object.prototype.hasOwnProperty,Fs=Object.prototype.propertyIsEnumerable;var Ye=(e,r,t)=>r in e?K(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,le=(e,r)=>{for(var t in r||(r={}))Xe.call(r,t)&&Ye(e,t,r[t]);if(We)for(var t of We(r))Fs.call(r,t)&&Ye(e,t,r[t]);return e},ue=(e,r)=>Ts(e,Ss(r)),Ze=e=>K(e,"__esModule",{value:!0});var s=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),Es=(e,r)=>{Ze(e);for(var t in r)K(e,t,{get:r[t],enumerable:!0})},Ms=(e,r,t)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of Ps(r))!Xe.call(e,n)&&n!=="default"&&K(e,n,{get:()=>r[n],enumerable:!(t=As(r,n))||t.enumerable});return e},O=e=>Ms(Ze(K(e!=null?xs(Os(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var h=(e,r,t)=>new Promise((n,i)=>{var a=c=>{try{l(t.next(c))}catch(u){i(u)}},o=c=>{try{l(t.throw(c))}catch(u){i(u)}},l=c=>c.done?n(c.value):Promise.resolve(c.value).then(a,o);l((t=t.apply(e,r)).next())});var be=s((cg,Je)=>{function Is(e,r){for(var t=-1,n=r.length,i=e.length;++t<n;)e[i+t]=r[t];return e}Je.exports=Is});var qe=s((pg,Qe)=>{var Ls=typeof global=="object"&&global&&global.Object===Object&&global;Qe.exports=Ls});var w=s((dg,er)=>{var Ds=qe(),ks=typeof self=="object"&&self&&self.Object===Object&&self,Ns=Ds||ks||Function("return this")();er.exports=Ns});var E=s((fg,rr)=>{var Rs=w(),Bs=Rs.Symbol;rr.exports=Bs});var ar=s((hg,ir)=>{var tr=E(),nr=Object.prototype,Gs=nr.hasOwnProperty,Hs=nr.toString,U=tr?tr.toStringTag:void 0;function js(e){var r=Gs.call(e,U),t=e[U];try{e[U]=void 0;var n=!0}catch(a){}var i=Hs.call(e);return n&&(r?e[U]=t:delete e[U]),i}ir.exports=js});var or=s((gg,sr)=>{var Vs=Object.prototype,Ks=Vs.toString;function Us(e){return Ks.call(e)}sr.exports=Us});var M=s((yg,cr)=>{var lr=E(),zs=ar(),$s=or(),Ws="[object Null]",Xs="[object Undefined]",ur=lr?lr.toStringTag:void 0;function Ys(e){return e==null?e===void 0?Xs:Ws:ur&&ur in Object(e)?zs(e):$s(e)}cr.exports=Ys});var I=s((vg,pr)=>{function Zs(e){return e!=null&&typeof e=="object"}pr.exports=Zs});var fr=s((_g,dr)=>{var Js=M(),Qs=I(),eo="[object Arguments]";function ro(e){return Qs(e)&&Js(e)==eo}dr.exports=ro});var ce=s((mg,yr)=>{var hr=fr(),to=I(),gr=Object.prototype,no=gr.hasOwnProperty,io=gr.propertyIsEnumerable,ao=hr(function(){return arguments}())?hr:function(e){return to(e)&&no.call(e,"callee")&&!io.call(e,"callee")};yr.exports=ao});var q=s((bg,vr)=>{var so=Array.isArray;vr.exports=so});var qr=s((qg,br)=>{var _r=E(),oo=ce(),lo=q(),mr=_r?_r.isConcatSpreadable:void 0;function uo(e){return lo(e)||oo(e)||!!(mr&&e&&e[mr])}br.exports=uo});var xr=s((wg,Cr)=>{var co=be(),po=qr();function wr(e,r,t,n,i){var a=-1,o=e.length;for(t||(t=po),i||(i=[]);++a<o;){var l=e[a];r>0&&t(l)?r>1?wr(l,r-1,t,n,i):co(i,l):n||(i[i.length]=l)}return i}Cr.exports=wr});var we=s((Cg,Tr)=>{function fo(e,r){for(var t=-1,n=e==null?0:e.length,i=Array(n);++t<n;)i[t]=r(e[t],t,e);return i}Tr.exports=fo});var z=s((xg,Ar)=>{var ho=M(),go=I(),yo="[object Symbol]";function vo(e){return typeof e=="symbol"||go(e)&&ho(e)==yo}Ar.exports=vo});var pe=s((Tg,Sr)=>{var _o=q(),mo=z(),bo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qo=/^\w*$/;function wo(e,r){if(_o(e))return!1;var t=typeof e;return t=="number"||t=="symbol"||t=="boolean"||e==null||mo(e)?!0:qo.test(e)||!bo.test(e)||r!=null&&e in Object(r)}Sr.exports=wo});var $=s((Ag,Pr)=>{function Co(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}Pr.exports=Co});var Ce=s((Sg,Or)=>{var xo=M(),To=$(),Ao="[object AsyncFunction]",So="[object Function]",Po="[object GeneratorFunction]",Oo="[object Proxy]";function Fo(e){if(!To(e))return!1;var r=xo(e);return r==So||r==Po||r==Ao||r==Oo}Or.exports=Fo});var Er=s((Pg,Fr)=>{var Eo=w(),Mo=Eo["__core-js_shared__"];Fr.exports=Mo});var Lr=s((Og,Ir)=>{var xe=Er(),Mr=function(){var e=/[^.]+$/.exec(xe&&xe.keys&&xe.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Io(e){return!!Mr&&Mr in e}Ir.exports=Io});var Te=s((Fg,Dr)=>{var Lo=Function.prototype,Do=Lo.toString;function ko(e){if(e!=null){try{return Do.call(e)}catch(r){}try{return e+""}catch(r){}}return""}Dr.exports=ko});var Nr=s((Eg,kr)=>{var No=Ce(),Ro=Lr(),Bo=$(),Go=Te(),Ho=/[\\^$.*+?()[\]{}|]/g,jo=/^\[object .+?Constructor\]$/,Vo=Function.prototype,Ko=Object.prototype,Uo=Vo.toString,zo=Ko.hasOwnProperty,$o=RegExp("^"+Uo.call(zo).replace(Ho,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Wo(e){if(!Bo(e)||Ro(e))return!1;var r=No(e)?$o:jo;return r.test(Go(e))}kr.exports=Wo});var Br=s((Mg,Rr)=>{function Xo(e,r){return e==null?void 0:e[r]}Rr.exports=Xo});var A=s((Ig,Gr)=>{var Yo=Nr(),Zo=Br();function Jo(e,r){var t=Zo(e,r);return Yo(t)?t:void 0}Gr.exports=Jo});var W=s((Lg,Hr)=>{var Qo=A(),el=Qo(Object,"create");Hr.exports=el});var Kr=s((Dg,Vr)=>{var jr=W();function rl(){this.__data__=jr?jr(null):{},this.size=0}Vr.exports=rl});var zr=s((kg,Ur)=>{function tl(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}Ur.exports=tl});var Wr=s((Ng,$r)=>{var nl=W(),il="__lodash_hash_undefined__",al=Object.prototype,sl=al.hasOwnProperty;function ol(e){var r=this.__data__;if(nl){var t=r[e];return t===il?void 0:t}return sl.call(r,e)?r[e]:void 0}$r.exports=ol});var Yr=s((Rg,Xr)=>{var ll=W(),ul=Object.prototype,cl=ul.hasOwnProperty;function pl(e){var r=this.__data__;return ll?r[e]!==void 0:cl.call(r,e)}Xr.exports=pl});var Jr=s((Bg,Zr)=>{var dl=W(),fl="__lodash_hash_undefined__";function hl(e,r){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=dl&&r===void 0?fl:r,this}Zr.exports=hl});var et=s((Gg,Qr)=>{var gl=Kr(),yl=zr(),vl=Wr(),_l=Yr(),ml=Jr();function L(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}L.prototype.clear=gl;L.prototype.delete=yl;L.prototype.get=vl;L.prototype.has=_l;L.prototype.set=ml;Qr.exports=L});var tt=s((Hg,rt)=>{function bl(){this.__data__=[],this.size=0}rt.exports=bl});var de=s((jg,nt)=>{function ql(e,r){return e===r||e!==e&&r!==r}nt.exports=ql});var X=s((Vg,it)=>{var wl=de();function Cl(e,r){for(var t=e.length;t--;)if(wl(e[t][0],r))return t;return-1}it.exports=Cl});var st=s((Kg,at)=>{var xl=X(),Tl=Array.prototype,Al=Tl.splice;function Sl(e){var r=this.__data__,t=xl(r,e);if(t<0)return!1;var n=r.length-1;return t==n?r.pop():Al.call(r,t,1),--this.size,!0}at.exports=Sl});var lt=s((Ug,ot)=>{var Pl=X();function Ol(e){var r=this.__data__,t=Pl(r,e);return t<0?void 0:r[t][1]}ot.exports=Ol});var ct=s((zg,ut)=>{var Fl=X();function El(e){return Fl(this.__data__,e)>-1}ut.exports=El});var dt=s(($g,pt)=>{var Ml=X();function Il(e,r){var t=this.__data__,n=Ml(t,e);return n<0?(++this.size,t.push([e,r])):t[n][1]=r,this}pt.exports=Il});var Y=s((Wg,ft)=>{var Ll=tt(),Dl=st(),kl=lt(),Nl=ct(),Rl=dt();function D(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}D.prototype.clear=Ll;D.prototype.delete=Dl;D.prototype.get=kl;D.prototype.has=Nl;D.prototype.set=Rl;ft.exports=D});var fe=s((Xg,ht)=>{var Bl=A(),Gl=w(),Hl=Bl(Gl,"Map");ht.exports=Hl});var vt=s((Yg,yt)=>{var gt=et(),jl=Y(),Vl=fe();function Kl(){this.size=0,this.__data__={hash:new gt,map:new(Vl||jl),string:new gt}}yt.exports=Kl});var mt=s((Zg,_t)=>{function Ul(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}_t.exports=Ul});var Z=s((Jg,bt)=>{var zl=mt();function $l(e,r){var t=e.__data__;return zl(r)?t[typeof r=="string"?"string":"hash"]:t.map}bt.exports=$l});var wt=s((Qg,qt)=>{var Wl=Z();function Xl(e){var r=Wl(this,e).delete(e);return this.size-=r?1:0,r}qt.exports=Xl});var xt=s((ey,Ct)=>{var Yl=Z();function Zl(e){return Yl(this,e).get(e)}Ct.exports=Zl});var At=s((ry,Tt)=>{var Jl=Z();function Ql(e){return Jl(this,e).has(e)}Tt.exports=Ql});var Pt=s((ty,St)=>{var eu=Z();function ru(e,r){var t=eu(this,e),n=t.size;return t.set(e,r),this.size+=t.size==n?0:1,this}St.exports=ru});var he=s((ny,Ot)=>{var tu=vt(),nu=wt(),iu=xt(),au=At(),su=Pt();function k(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}k.prototype.clear=tu;k.prototype.delete=nu;k.prototype.get=iu;k.prototype.has=au;k.prototype.set=su;Ot.exports=k});var Mt=s((iy,Et)=>{var Ft=he(),ou="Expected a function";function Ae(e,r){if(typeof e!="function"||r!=null&&typeof r!="function")throw new TypeError(ou);var t=function(){var n=arguments,i=r?r.apply(this,n):n[0],a=t.cache;if(a.has(i))return a.get(i);var o=e.apply(this,n);return t.cache=a.set(i,o)||a,o};return t.cache=new(Ae.Cache||Ft),t}Ae.Cache=Ft;Et.exports=Ae});var Lt=s((ay,It)=>{var lu=Mt(),uu=500;function cu(e){var r=lu(e,function(n){return t.size===uu&&t.clear(),n}),t=r.cache;return r}It.exports=cu});var kt=s((sy,Dt)=>{var pu=Lt(),du=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,fu=/\\(\\)?/g,hu=pu(function(e){var r=[];return e.charCodeAt(0)===46&&r.push(""),e.replace(du,function(t,n,i,a){r.push(i?a.replace(fu,"$1"):n||t)}),r});Dt.exports=hu});var jt=s((oy,Ht)=>{var Nt=E(),gu=we(),yu=q(),vu=z(),_u=1/0,Rt=Nt?Nt.prototype:void 0,Bt=Rt?Rt.toString:void 0;function Gt(e){if(typeof e=="string")return e;if(yu(e))return gu(e,Gt)+"";if(vu(e))return Bt?Bt.call(e):"";var r=e+"";return r=="0"&&1/e==-_u?"-0":r}Ht.exports=Gt});var Kt=s((ly,Vt)=>{var mu=jt();function bu(e){return e==null?"":mu(e)}Vt.exports=bu});var ge=s((uy,Ut)=>{var qu=q(),wu=pe(),Cu=kt(),xu=Kt();function Tu(e,r){return qu(e)?e:wu(e,r)?[e]:Cu(xu(e))}Ut.exports=Tu});var N=s((cy,zt)=>{var Au=z(),Su=1/0;function Pu(e){if(typeof e=="string"||Au(e))return e;var r=e+"";return r=="0"&&1/e==-Su?"-0":r}zt.exports=Pu});var J=s((py,$t)=>{var Ou=ge(),Fu=N();function Eu(e,r){r=Ou(r,e);for(var t=0,n=r.length;e!=null&&t<n;)e=e[Fu(r[t++])];return t&&t==n?e:void 0}$t.exports=Eu});var Xt=s((dy,Wt)=>{var Mu=Y();function Iu(){this.__data__=new Mu,this.size=0}Wt.exports=Iu});var Zt=s((fy,Yt)=>{function Lu(e){var r=this.__data__,t=r.delete(e);return this.size=r.size,t}Yt.exports=Lu});var Qt=s((hy,Jt)=>{function Du(e){return this.__data__.get(e)}Jt.exports=Du});var rn=s((gy,en)=>{function ku(e){return this.__data__.has(e)}en.exports=ku});var nn=s((yy,tn)=>{var Nu=Y(),Ru=fe(),Bu=he(),Gu=200;function Hu(e,r){var t=this.__data__;if(t instanceof Nu){var n=t.__data__;if(!Ru||n.length<Gu-1)return n.push([e,r]),this.size=++t.size,this;t=this.__data__=new Bu(n)}return t.set(e,r),this.size=t.size,this}tn.exports=Hu});var Se=s((vy,an)=>{var ju=Y(),Vu=Xt(),Ku=Zt(),Uu=Qt(),zu=rn(),$u=nn();function R(e){var r=this.__data__=new ju(e);this.size=r.size}R.prototype.clear=Vu;R.prototype.delete=Ku;R.prototype.get=Uu;R.prototype.has=zu;R.prototype.set=$u;an.exports=R});var on=s((_y,sn)=>{var Wu="__lodash_hash_undefined__";function Xu(e){return this.__data__.set(e,Wu),this}sn.exports=Xu});var un=s((my,ln)=>{function Yu(e){return this.__data__.has(e)}ln.exports=Yu});var pn=s((by,cn)=>{var Zu=he(),Ju=on(),Qu=un();function ye(e){var r=-1,t=e==null?0:e.length;for(this.__data__=new Zu;++r<t;)this.add(e[r])}ye.prototype.add=ye.prototype.push=Ju;ye.prototype.has=Qu;cn.exports=ye});var fn=s((qy,dn)=>{function ec(e,r){for(var t=-1,n=e==null?0:e.length;++t<n;)if(r(e[t],t,e))return!0;return!1}dn.exports=ec});var gn=s((wy,hn)=>{function rc(e,r){return e.has(r)}hn.exports=rc});var Pe=s((Cy,yn)=>{var tc=pn(),nc=fn(),ic=gn(),ac=1,sc=2;function oc(e,r,t,n,i,a){var o=t&ac,l=e.length,c=r.length;if(l!=c&&!(o&&c>l))return!1;var u=a.get(e),p=a.get(r);if(u&&p)return u==r&&p==e;var f=-1,d=!0,y=t&sc?new tc:void 0;for(a.set(e,r),a.set(r,e);++f<l;){var m=e[f],b=r[f];if(n)var T=o?n(b,m,f,r,e,a):n(m,b,f,e,r,a);if(T!==void 0){if(T)continue;d=!1;break}if(y){if(!nc(r,function(S,P){if(!ic(y,P)&&(m===S||i(m,S,t,n,a)))return y.push(P)})){d=!1;break}}else if(!(m===b||i(m,b,t,n,a))){d=!1;break}}return a.delete(e),a.delete(r),d}yn.exports=oc});var _n=s((xy,vn)=>{var lc=w(),uc=lc.Uint8Array;vn.exports=uc});var bn=s((Ty,mn)=>{function cc(e){var r=-1,t=Array(e.size);return e.forEach(function(n,i){t[++r]=[i,n]}),t}mn.exports=cc});var wn=s((Ay,qn)=>{function pc(e){var r=-1,t=Array(e.size);return e.forEach(function(n){t[++r]=n}),t}qn.exports=pc});var Sn=s((Sy,An)=>{var Cn=E(),xn=_n(),dc=de(),fc=Pe(),hc=bn(),gc=wn(),yc=1,vc=2,_c="[object Boolean]",mc="[object Date]",bc="[object Error]",qc="[object Map]",wc="[object Number]",Cc="[object RegExp]",xc="[object Set]",Tc="[object String]",Ac="[object Symbol]",Sc="[object ArrayBuffer]",Pc="[object DataView]",Tn=Cn?Cn.prototype:void 0,Oe=Tn?Tn.valueOf:void 0;function Oc(e,r,t,n,i,a,o){switch(t){case Pc:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset)return!1;e=e.buffer,r=r.buffer;case Sc:return!(e.byteLength!=r.byteLength||!a(new xn(e),new xn(r)));case _c:case mc:case wc:return dc(+e,+r);case bc:return e.name==r.name&&e.message==r.message;case Cc:case Tc:return e==r+"";case qc:var l=hc;case xc:var c=n&yc;if(l||(l=gc),e.size!=r.size&&!c)return!1;var u=o.get(e);if(u)return u==r;n|=vc,o.set(e,r);var p=fc(l(e),l(r),n,i,a,o);return o.delete(e),p;case Ac:if(Oe)return Oe.call(e)==Oe.call(r)}return!1}An.exports=Oc});var On=s((Py,Pn)=>{var Fc=be(),Ec=q();function Mc(e,r,t){var n=r(e);return Ec(e)?n:Fc(n,t(e))}Pn.exports=Mc});var En=s((Oy,Fn)=>{function Ic(e,r){for(var t=-1,n=e==null?0:e.length,i=0,a=[];++t<n;){var o=e[t];r(o,t,e)&&(a[i++]=o)}return a}Fn.exports=Ic});var In=s((Fy,Mn)=>{function Lc(){return[]}Mn.exports=Lc});var kn=s((Ey,Dn)=>{var Dc=En(),kc=In(),Nc=Object.prototype,Rc=Nc.propertyIsEnumerable,Ln=Object.getOwnPropertySymbols,Bc=Ln?function(e){return e==null?[]:(e=Object(e),Dc(Ln(e),function(r){return Rc.call(e,r)}))}:kc;Dn.exports=Bc});var Rn=s((My,Nn)=>{function Gc(e,r){for(var t=-1,n=Array(e);++t<e;)n[t]=r(t);return n}Nn.exports=Gc});var Gn=s((Iy,Bn)=>{function Hc(){return!1}Bn.exports=Hc});var Fe=s((Q,B)=>{var jc=w(),Vc=Gn(),Hn=typeof Q=="object"&&Q&&!Q.nodeType&&Q,jn=Hn&&typeof B=="object"&&B&&!B.nodeType&&B,Kc=jn&&jn.exports===Hn,Vn=Kc?jc.Buffer:void 0,Uc=Vn?Vn.isBuffer:void 0,zc=Uc||Vc;B.exports=zc});var ee=s((Ly,Kn)=>{var $c=9007199254740991,Wc=/^(?:0|[1-9]\d*)$/;function Xc(e,r){var t=typeof e;return r=r==null?$c:r,!!r&&(t=="number"||t!="symbol"&&Wc.test(e))&&e>-1&&e%1==0&&e<r}Kn.exports=Xc});var ve=s((Dy,Un)=>{var Yc=9007199254740991;function Zc(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Yc}Un.exports=Zc});var $n=s((ky,zn)=>{var Jc=M(),Qc=ve(),ep=I(),rp="[object Arguments]",tp="[object Array]",np="[object Boolean]",ip="[object Date]",ap="[object Error]",sp="[object Function]",op="[object Map]",lp="[object Number]",up="[object Object]",cp="[object RegExp]",pp="[object Set]",dp="[object String]",fp="[object WeakMap]",hp="[object ArrayBuffer]",gp="[object DataView]",yp="[object Float32Array]",vp="[object Float64Array]",_p="[object Int8Array]",mp="[object Int16Array]",bp="[object Int32Array]",qp="[object Uint8Array]",wp="[object Uint8ClampedArray]",Cp="[object Uint16Array]",xp="[object Uint32Array]",g={};g[yp]=g[vp]=g[_p]=g[mp]=g[bp]=g[qp]=g[wp]=g[Cp]=g[xp]=!0;g[rp]=g[tp]=g[hp]=g[np]=g[gp]=g[ip]=g[ap]=g[sp]=g[op]=g[lp]=g[up]=g[cp]=g[pp]=g[dp]=g[fp]=!1;function Tp(e){return ep(e)&&Qc(e.length)&&!!g[Jc(e)]}zn.exports=Tp});var Ee=s((Ny,Wn)=>{function Ap(e){return function(r){return e(r)}}Wn.exports=Ap});var Yn=s((te,G)=>{var Sp=qe(),Xn=typeof te=="object"&&te&&!te.nodeType&&te,re=Xn&&typeof G=="object"&&G&&!G.nodeType&&G,Pp=re&&re.exports===Xn,Me=Pp&&Sp.process,Op=function(){try{var e=re&&re.require&&re.require("util").types;return e||Me&&Me.binding&&Me.binding("util")}catch(r){}}();G.exports=Op});var Ie=s((Ry,Qn)=>{var Fp=$n(),Ep=Ee(),Zn=Yn(),Jn=Zn&&Zn.isTypedArray,Mp=Jn?Ep(Jn):Fp;Qn.exports=Mp});var ri=s((By,ei)=>{var Ip=Rn(),Lp=ce(),Dp=q(),kp=Fe(),Np=ee(),Rp=Ie(),Bp=Object.prototype,Gp=Bp.hasOwnProperty;function Hp(e,r){var t=Dp(e),n=!t&&Lp(e),i=!t&&!n&&kp(e),a=!t&&!n&&!i&&Rp(e),o=t||n||i||a,l=o?Ip(e.length,String):[],c=l.length;for(var u in e)(r||Gp.call(e,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Np(u,c)))&&l.push(u);return l}ei.exports=Hp});var ni=s((Gy,ti)=>{var jp=Object.prototype;function Vp(e){var r=e&&e.constructor,t=typeof r=="function"&&r.prototype||jp;return e===t}ti.exports=Vp});var ai=s((Hy,ii)=>{function Kp(e,r){return function(t){return e(r(t))}}ii.exports=Kp});var oi=s((jy,si)=>{var Up=ai(),zp=Up(Object.keys,Object);si.exports=zp});var ui=s((Vy,li)=>{var $p=ni(),Wp=oi(),Xp=Object.prototype,Yp=Xp.hasOwnProperty;function Zp(e){if(!$p(e))return Wp(e);var r=[];for(var t in Object(e))Yp.call(e,t)&&t!="constructor"&&r.push(t);return r}li.exports=Zp});var ne=s((Ky,ci)=>{var Jp=Ce(),Qp=ve();function ed(e){return e!=null&&Qp(e.length)&&!Jp(e)}ci.exports=ed});var _e=s((Uy,pi)=>{var rd=ri(),td=ui(),nd=ne();function id(e){return nd(e)?rd(e):td(e)}pi.exports=id});var fi=s((zy,di)=>{var ad=On(),sd=kn(),od=_e();function ld(e){return ad(e,od,sd)}di.exports=ld});var yi=s(($y,gi)=>{var hi=fi(),ud=1,cd=Object.prototype,pd=cd.hasOwnProperty;function dd(e,r,t,n,i,a){var o=t&ud,l=hi(e),c=l.length,u=hi(r),p=u.length;if(c!=p&&!o)return!1;for(var f=c;f--;){var d=l[f];if(!(o?d in r:pd.call(r,d)))return!1}var y=a.get(e),m=a.get(r);if(y&&m)return y==r&&m==e;var b=!0;a.set(e,r),a.set(r,e);for(var T=o;++f<c;){d=l[f];var S=e[d],P=r[d];if(n)var $e=o?n(P,S,d,r,e,a):n(S,P,d,e,r,a);if(!($e===void 0?S===P||i(S,P,t,n,a):$e)){b=!1;break}T||(T=d=="constructor")}if(b&&!T){var se=e.constructor,oe=r.constructor;se!=oe&&"constructor"in e&&"constructor"in r&&!(typeof se=="function"&&se instanceof se&&typeof oe=="function"&&oe instanceof oe)&&(b=!1)}return a.delete(e),a.delete(r),b}gi.exports=dd});var _i=s((Wy,vi)=>{var fd=A(),hd=w(),gd=fd(hd,"DataView");vi.exports=gd});var bi=s((Xy,mi)=>{var yd=A(),vd=w(),_d=yd(vd,"Promise");mi.exports=_d});var wi=s((Yy,qi)=>{var md=A(),bd=w(),qd=md(bd,"Set");qi.exports=qd});var xi=s((Zy,Ci)=>{var wd=A(),Cd=w(),xd=wd(Cd,"WeakMap");Ci.exports=xd});var Mi=s((Jy,Ei)=>{var Le=_i(),De=fe(),ke=bi(),Ne=wi(),Re=xi(),Ti=M(),H=Te(),Ai="[object Map]",Td="[object Object]",Si="[object Promise]",Pi="[object Set]",Oi="[object WeakMap]",Fi="[object DataView]",Ad=H(Le),Sd=H(De),Pd=H(ke),Od=H(Ne),Fd=H(Re),F=Ti;(Le&&F(new Le(new ArrayBuffer(1)))!=Fi||De&&F(new De)!=Ai||ke&&F(ke.resolve())!=Si||Ne&&F(new Ne)!=Pi||Re&&F(new Re)!=Oi)&&(F=function(e){var r=Ti(e),t=r==Td?e.constructor:void 0,n=t?H(t):"";if(n)switch(n){case Ad:return Fi;case Sd:return Ai;case Pd:return Si;case Od:return Pi;case Fd:return Oi}return r});Ei.exports=F});var Gi=s((Qy,Bi)=>{var Be=Se(),Ed=Pe(),Md=Sn(),Id=yi(),Ii=Mi(),Li=q(),Di=Fe(),Ld=Ie(),Dd=1,ki="[object Arguments]",Ni="[object Array]",me="[object Object]",kd=Object.prototype,Ri=kd.hasOwnProperty;function Nd(e,r,t,n,i,a){var o=Li(e),l=Li(r),c=o?Ni:Ii(e),u=l?Ni:Ii(r);c=c==ki?me:c,u=u==ki?me:u;var p=c==me,f=u==me,d=c==u;if(d&&Di(e)){if(!Di(r))return!1;o=!0,p=!1}if(d&&!p)return a||(a=new Be),o||Ld(e)?Ed(e,r,t,n,i,a):Md(e,r,c,t,n,i,a);if(!(t&Dd)){var y=p&&Ri.call(e,"__wrapped__"),m=f&&Ri.call(r,"__wrapped__");if(y||m){var b=y?e.value():e,T=m?r.value():r;return a||(a=new Be),i(b,T,t,n,a)}}return d?(a||(a=new Be),Id(e,r,t,n,i,a)):!1}Bi.exports=Nd});var Ge=s((ev,Vi)=>{var Rd=Gi(),Hi=I();function ji(e,r,t,n,i){return e===r?!0:e==null||r==null||!Hi(e)&&!Hi(r)?e!==e&&r!==r:Rd(e,r,t,n,ji,i)}Vi.exports=ji});var Ui=s((rv,Ki)=>{var Bd=Se(),Gd=Ge(),Hd=1,jd=2;function Vd(e,r,t,n){var i=t.length,a=i,o=!n;if(e==null)return!a;for(e=Object(e);i--;){var l=t[i];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<a;){l=t[i];var c=l[0],u=e[c],p=l[1];if(o&&l[2]){if(u===void 0&&!(c in e))return!1}else{var f=new Bd;if(n)var d=n(u,p,c,e,r,f);if(!(d===void 0?Gd(p,u,Hd|jd,n,f):d))return!1}}return!0}Ki.exports=Vd});var He=s((tv,zi)=>{var Kd=$();function Ud(e){return e===e&&!Kd(e)}zi.exports=Ud});var Wi=s((nv,$i)=>{var zd=He(),$d=_e();function Wd(e){for(var r=$d(e),t=r.length;t--;){var n=r[t],i=e[n];r[t]=[n,i,zd(i)]}return r}$i.exports=Wd});var je=s((iv,Xi)=>{function Xd(e,r){return function(t){return t==null?!1:t[e]===r&&(r!==void 0||e in Object(t))}}Xi.exports=Xd});var Zi=s((av,Yi)=>{var Yd=Ui(),Zd=Wi(),Jd=je();function Qd(e){var r=Zd(e);return r.length==1&&r[0][2]?Jd(r[0][0],r[0][1]):function(t){return t===e||Yd(t,e,r)}}Yi.exports=Qd});var Qi=s((sv,Ji)=>{var ef=J();function rf(e,r,t){var n=e==null?void 0:ef(e,r);return n===void 0?t:n}Ji.exports=rf});var ra=s((ov,ea)=>{function tf(e,r){return e!=null&&r in Object(e)}ea.exports=tf});var na=s((lv,ta)=>{var nf=ge(),af=ce(),sf=q(),of=ee(),lf=ve(),uf=N();function cf(e,r,t){r=nf(r,e);for(var n=-1,i=r.length,a=!1;++n<i;){var o=uf(r[n]);if(!(a=e!=null&&t(e,o)))break;e=e[o]}return a||++n!=i?a:(i=e==null?0:e.length,!!i&&lf(i)&&of(o,i)&&(sf(e)||af(e)))}ta.exports=cf});var aa=s((uv,ia)=>{var pf=ra(),df=na();function ff(e,r){return e!=null&&df(e,r,pf)}ia.exports=ff});var oa=s((cv,sa)=>{var hf=Ge(),gf=Qi(),yf=aa(),vf=pe(),_f=He(),mf=je(),bf=N(),qf=1,wf=2;function Cf(e,r){return vf(e)&&_f(r)?mf(bf(e),r):function(t){var n=gf(t,e);return n===void 0&&n===r?yf(t,e):hf(r,n,qf|wf)}}sa.exports=Cf});var ie=s((pv,la)=>{function xf(e){return e}la.exports=xf});var ca=s((dv,ua)=>{function Tf(e){return function(r){return r==null?void 0:r[e]}}ua.exports=Tf});var da=s((fv,pa)=>{var Af=J();function Sf(e){return function(r){return Af(r,e)}}pa.exports=Sf});var ha=s((hv,fa)=>{var Pf=ca(),Of=da(),Ff=pe(),Ef=N();function Mf(e){return Ff(e)?Pf(Ef(e)):Of(e)}fa.exports=Mf});var Ve=s((gv,ga)=>{var If=Zi(),Lf=oa(),Df=ie(),kf=q(),Nf=ha();function Rf(e){return typeof e=="function"?e:e==null?Df:typeof e=="object"?kf(e)?Lf(e[0],e[1]):If(e):Nf(e)}ga.exports=Rf});var va=s((yv,ya)=>{function Bf(e){return function(r,t,n){for(var i=-1,a=Object(r),o=n(r),l=o.length;l--;){var c=o[e?l:++i];if(t(a[c],c,a)===!1)break}return r}}ya.exports=Bf});var ma=s((vv,_a)=>{var Gf=va(),Hf=Gf();_a.exports=Hf});var qa=s((_v,ba)=>{var jf=ma(),Vf=_e();function Kf(e,r){return e&&jf(e,r,Vf)}ba.exports=Kf});var Ca=s((mv,wa)=>{var Uf=ne();function zf(e,r){return function(t,n){if(t==null)return t;if(!Uf(t))return e(t,n);for(var i=t.length,a=r?i:-1,o=Object(t);(r?a--:++a<i)&&n(o[a],a,o)!==!1;);return t}}wa.exports=zf});var Ta=s((bv,xa)=>{var $f=qa(),Wf=Ca(),Xf=Wf($f);xa.exports=Xf});var Sa=s((qv,Aa)=>{var Yf=Ta(),Zf=ne();function Jf(e,r){var t=-1,n=Zf(e)?Array(e.length):[];return Yf(e,function(i,a,o){n[++t]=r(i,a,o)}),n}Aa.exports=Jf});var Oa=s((wv,Pa)=>{function Qf(e,r){var t=e.length;for(e.sort(r);t--;)e[t]=e[t].value;return e}Pa.exports=Qf});var Ma=s((Cv,Ea)=>{var Fa=z();function eh(e,r){if(e!==r){var t=e!==void 0,n=e===null,i=e===e,a=Fa(e),o=r!==void 0,l=r===null,c=r===r,u=Fa(r);if(!l&&!u&&!a&&e>r||a&&o&&c&&!l&&!u||n&&o&&c||!t&&c||!i)return 1;if(!n&&!a&&!u&&e<r||u&&t&&i&&!n&&!a||l&&t&&i||!o&&i||!c)return-1}return 0}Ea.exports=eh});var La=s((xv,Ia)=>{var rh=Ma();function th(e,r,t){for(var n=-1,i=e.criteria,a=r.criteria,o=i.length,l=t.length;++n<o;){var c=rh(i[n],a[n]);if(c){if(n>=l)return c;var u=t[n];return c*(u=="desc"?-1:1)}}return e.index-r.index}Ia.exports=th});var ka=s((Tv,Da)=>{var Ke=we(),nh=J(),ih=Ve(),ah=Sa(),sh=Oa(),oh=Ee(),lh=La(),uh=ie(),ch=q();function ph(e,r,t){r.length?r=Ke(r,function(a){return ch(a)?function(o){return nh(o,a.length===1?a[0]:a)}:a}):r=[uh];var n=-1;r=Ke(r,oh(ih));var i=ah(e,function(a,o,l){var c=Ke(r,function(u){return u(a)});return{criteria:c,index:++n,value:a}});return sh(i,function(a,o){return lh(a,o,t)})}Da.exports=ph});var Ra=s((Av,Na)=>{function dh(e,r,t){switch(t.length){case 0:return e.call(r);case 1:return e.call(r,t[0]);case 2:return e.call(r,t[0],t[1]);case 3:return e.call(r,t[0],t[1],t[2])}return e.apply(r,t)}Na.exports=dh});var Ha=s((Sv,Ga)=>{var fh=Ra(),Ba=Math.max;function hh(e,r,t){return r=Ba(r===void 0?e.length-1:r,0),function(){for(var n=arguments,i=-1,a=Ba(n.length-r,0),o=Array(a);++i<a;)o[i]=n[r+i];i=-1;for(var l=Array(r+1);++i<r;)l[i]=n[i];return l[r]=t(o),fh(e,this,l)}}Ga.exports=hh});var Va=s((Pv,ja)=>{function gh(e){return function(){return e}}ja.exports=gh});var Ua=s((Ov,Ka)=>{var yh=A(),vh=function(){try{var e=yh(Object,"defineProperty");return e({},"",{}),e}catch(r){}}();Ka.exports=vh});var Wa=s((Fv,$a)=>{var _h=Va(),za=Ua(),mh=ie(),bh=za?function(e,r){return za(e,"toString",{configurable:!0,enumerable:!1,value:_h(r),writable:!0})}:mh;$a.exports=bh});var Ya=s((Ev,Xa)=>{var qh=800,wh=16,Ch=Date.now;function xh(e){var r=0,t=0;return function(){var n=Ch(),i=wh-(n-t);if(t=n,i>0){if(++r>=qh)return arguments[0]}else r=0;return e.apply(void 0,arguments)}}Xa.exports=xh});var Ja=s((Mv,Za)=>{var Th=Wa(),Ah=Ya(),Sh=Ah(Th);Za.exports=Sh});var es=s((Iv,Qa)=>{var Ph=ie(),Oh=Ha(),Fh=Ja();function Eh(e,r){return Fh(Oh(e,r,Ph),e+"")}Qa.exports=Eh});var ts=s((Lv,rs)=>{var Mh=de(),Ih=ne(),Lh=ee(),Dh=$();function kh(e,r,t){if(!Dh(t))return!1;var n=typeof r;return(n=="number"?Ih(t)&&Lh(r,t.length):n=="string"&&r in t)?Mh(t[r],e):!1}rs.exports=kh});var as=s((Dv,is)=>{var Nh=xr(),Rh=ka(),Bh=es(),ns=ts(),Gh=Bh(function(e,r){if(e==null)return[];var t=r.length;return t>1&&ns(e,r[0],r[1])?r=[]:t>2&&ns(r[0],r[1],r[2])&&(r=[r[0]]),Rh(e,Nh(r,1),[])});is.exports=Gh});var os=s((kv,ss)=>{function Hh(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}ss.exports=Hh});var us=s((Nv,ls)=>{function jh(e,r,t){var n=-1,i=e.length;r<0&&(r=-r>i?0:i+r),t=t>i?i:t,t<0&&(t+=i),i=r>t?0:t-r>>>0,r>>>=0;for(var a=Array(i);++n<i;)a[n]=e[n+r];return a}ls.exports=jh});var ps=s((Rv,cs)=>{var Vh=J(),Kh=us();function Uh(e,r){return r.length<2?e:Vh(e,Kh(r,0,-1))}cs.exports=Uh});var fs=s((Bv,ds)=>{var zh=ge(),$h=os(),Wh=ps(),Xh=N();function Yh(e,r){return r=zh(r,e),e=Wh(e,r),e==null||delete e[Xh($h(r))]}ds.exports=Yh});var gs=s((Gv,hs)=>{var Zh=fs(),Jh=ee(),Qh=Array.prototype,eg=Qh.splice;function rg(e,r){for(var t=e?r.length:0,n=t-1;t--;){var i=r[t];if(t==n||i!==a){var a=i;Jh(i)?eg.call(e,i,1):Zh(e,i)}}return e}hs.exports=rg});var vs=s((Hv,ys)=>{var tg=Ve(),ng=gs();function ig(e,r){var t=[];if(!(e&&e.length))return t;var n=-1,i=[],a=e.length;for(r=tg(r,3);++n<a;){var o=e[n];r(o,n,e)&&(t.push(o),i.push(n))}return ng(e,i),t}ys.exports=ig});Es(exports,{default:()=>ze});var qs=O(as()),ws=O(vs()),v=O(require("obsidian")),Cs=O(require("@codemirror/language"));function ae(e,r){let t=Object.keys(r).map(n=>ag(e,n,r[n]));return t.length===1?t[0]:function(){t.forEach(n=>n())}}function ag(e,r,t){let n=e[r],i=e.hasOwnProperty(r),a=t(n);return n&&Object.setPrototypeOf(a,n),Object.setPrototypeOf(o,a),e[r]=o,l;function o(...c){return a===n&&e[r]===o&&l(),a.apply(this,c)}function l(){e[r]===o&&(i?e[r]=n:delete e[r]),a!==n&&(a=n,Object.setPrototypeOf(o,n||Function))}}var _=O(require("@codemirror/view")),j=O(require("obsidian")),_s=class extends _.WidgetType{constructor(r,t,n,i){super();this.app=r;this.view=t;this.from=n;this.to=i}eq(r){return r.view===this.view&&r.from===this.from&&r.to===this.to}toDOM(){let r=createSpan("cm-creases-icon");return(0,j.setIcon)(r,"shirt",12),r.addEventListener("click",t=>{new j.Menu(this.app).addItem(i=>i.setTitle("Remove crease").setIcon("x").onClick(()=>{this.view.dispatch({changes:{from:this.from,to:this.to,insert:""}})})).showAtMouseEvent(t)}),r}ignoreEvent(){return!1}};function ms(e){return _.ViewPlugin.fromClass(class{constructor(r){this.view=r;this.decorations=_.Decoration.none;this.allDecos=_.Decoration.none;this.decorator=new _.MatchDecorator({regexp:/\B%%\s+fold\s+%%\B/g,decoration:this.getDeco.bind(this)}),this.decorations=this.decorator.createDeco(r)}getDeco(r,t,n){let i=n,a=n+r[0].length;return _.Decoration.replace({widget:new _s(e,this.view,i,a)})}update(r){if(!r.state.field(j.editorLivePreviewField)){this.decorations=_.Decoration.none;return}this.decorations=this.decorator.updateDeco(r,this.decorations)}},{decorations:r=>r.decorations,provide:_.PluginField.atomicRanges.from(r=>r.decorations)})}var C=/%% +fold +%%/;function x(e){return C.test(e)}var V=O(require("obsidian")),bs={onOpenCreasesBehavior:"preserve-fold-state",templateCreasesBehavior:"start-folded",syncOutlineView:"from-editor-to-outline"},Ue=class extends V.PluginSettingTab{constructor(r,t){super(r,t);this.plugin=t}display(){let{containerEl:r}=this;r.empty(),r.createEl("h3",{text:"Folding"}),new V.Setting(r).setName("Sync editor folds with outline view").addDropdown(t=>{t.addOptions({"from-editor-to-outline":"From editor to outline",bidirectional:"Bidirectionally",none:"None"}),t.setValue(this.plugin.settings.syncOutlineView),t.onChange(n=>h(this,null,function*(){this.plugin.settings.syncOutlineView=n,yield this.plugin.saveSettings()}))}),r.createEl("h3",{text:"Crease Behavior"}),new V.Setting(r).setName("How should creases behave when opening a new file?").setDesc("By default, creases will not override what content you have folded in your file. You can change this so that creases always start folded.").addDropdown(t=>{t.addOptions({"always-fold":"Always fold creases","preserve-fold-state":"Respect existing fold state"}),t.setValue(this.plugin.settings.onOpenCreasesBehavior),t.onChange(n=>h(this,null,function*(){this.plugin.settings.onOpenCreasesBehavior=n,yield this.plugin.saveSettings()}))}),new V.Setting(r).setName("How should creases in templates behave?").setDesc("When creating a new file with creases in the template, do you want the creases to start folded or unfolded? Choose 'fold and clear' to have the creases folded and removed from the newly created note.").addDropdown(t=>{t.addOptions({"start-folded":"Start folded","start-unfolded":"Start unfolded","fold-and-clear":"Fold them and clear the creases"}),t.setValue(this.plugin.settings.templateCreasesBehavior),t.onChange(n=>h(this,null,function*(){this.plugin.settings.templateCreasesBehavior=n,yield this.plugin.saveSettings()}))})}};var sg=[1,2,3,4,5,6];function og(e,r,t){let{anchor:n,head:i}=e;return n.line>=r&&n.line<=t||i.line>=r&&i.line<=t||i.line<r&&n.line>t||n.line<r&&i.line>t}var lg=/\^([a-zA-Z0-9-]+)$/,ze=class extends v.Plugin{onload(){return h(this,null,function*(){yield this.loadSettings(),this.registerSettingsTab(),this.registerEditorExtension(ms(this.app)),this.addCommand({id:"fold",name:"Fold along creases",checkCallback:r=>{let t=this.app.workspace.getActiveViewOfType(v.MarkdownView);if(r)return!!t;t&&this.foldCreasesForView(t)}}),this.addCommand({id:"toggle-crease",name:"Toggle crease",editorCallback:this.toggleCrease.bind(this)}),this.addCommand({id:"crease-current-folds",name:"Crease the current folds",editorCallback:this.creaseCurrentFolds.bind(this)}),this.addCommand({id:"clear-creases",name:"Iron out (clear) the creases",editorCallback:this.clearCreases.bind(this)}),this.addCommand({id:"increase-fold-level-at-cursor",name:"Fold more",editorCallback:this.increaseFoldLevelAtCursor.bind(this)}),this.addCommand({id:"decrease-fold-level-at-cursor",name:"Fold less",editorCallback:this.decreaseFoldLevelAtCursor.bind(this)}),this.addCommand({id:"increase-fold-level",name:"Increase heading fold level",editorCallback:this.increaseHeadingFoldLevel.bind(this)}),this.addCommand({id:"decrease-fold-level",name:"Decrease heading fold level",editorCallback:this.decreaseHeadingFoldLevel.bind(this)}),this.app.workspace.onLayoutReady(()=>{this.registerEvent(this.app.vault.on("create",this.onNewFile.bind(this))),this.patchMarkdownView(),this.patchCoreTemplatePlugin(),this.patchFileSuggest(),this.patchCoreOutlinePlugin()}),sg.forEach(r=>{this.addCommand({id:`toggle-fold-heading-level-${r}`,name:`Toggle fold for H${r}`,checkCallback:t=>{var i,a;let n=this.app.workspace.getActiveViewOfType(v.MarkdownView);if(!n)return!1;if(t)return((a=(i=this.app.metadataCache.getFileCache(n.file))==null?void 0:i.headings)!=null?a:[]).find(l=>l.level===r)!==void 0;this.toggleFoldForHeadingLevel(n,r)}})}),this.registerEvent(this.app.workspace.on("editor-menu",this.onEditorMenu,this)),this.registerEvent(this.app.workspace.on("templater:overwrite-file",this.onTemplaterNewFile,this)),this.registerEvent(this.app.workspace.on("templater:new-note-from-template",this.onTemplaterNewFile,this)),this.registerEvent(this.app.workspace.on("templater:template-appended",this.onTemplateAppend,this)),this.registerEvent(this.app.workspace.on("templates:template-appended",this.onTemplateAppend,this))})}increaseFoldLevelAtCursor(r,t){return h(this,null,function*(){var o;let n=yield this.app.foldManager.load(t.file),i=(o=n==null?void 0:n.folds)!=null?o:[];r.listSelections().forEach(l=>{let c=this.getAllParentFolds(r,l);for(let u=c.length-1;u>=0;u--){let p=c[u];if(!i.find(f=>f.from===p.from)){i.push(p);break}}}),t.currentMode.applyFoldInfo({folds:i,lines:t.editor.lineCount()}),t.onMarkdownFold()})}handleNewFile(r,t){return h(this,null,function*(){["start-folded","fold-and-clear"].contains(this.settings.templateCreasesBehavior)&&x(t)&&(this.foldCreasesForFile(r),this.settings.templateCreasesBehavior==="fold-and-clear"&&this.app.vault.modify(r,t.replace(new RegExp(C,"g"),"")))})}onNewFile(r){return h(this,null,function*(){if(!(r instanceof v.TFile))return;let t=yield this.app.vault.cachedRead(r);this.handleNewFile(r,t)})}onTemplaterNewFile(r){return h(this,null,function*(){let{file:t,contents:n}=r;this.handleNewFile(t,n)})}onTemplateAppend(r){return h(this,null,function*(){if(["start-folded","fold-and-clear"].contains(this.settings.templateCreasesBehavior)){let{view:t,newSelections:n,oldSelections:i}=r,a=[],o=[];for(let l=0;l<n.length;l++){let[c,,,u]=(0,qs.default)([i[l].anchor,i[l].head,n[l].anchor,n[l].head],["line","ch"]),p=t.editor.getRange(c,u);if(x(p))for(let f=c.line;f<=u.line;f++){let d=t.editor.getLine(f);if(x(d)&&a.push({from:f,to:f+1}),this.settings.templateCreasesBehavior==="fold-and-clear"){let y=d.replace(C,"").trimEnd();o.push({text:y,from:{line:f,ch:0},to:{line:f+1,ch:0}})}}}t.currentMode.applyFoldInfo({folds:a,lines:t.editor.lineCount()}),t.editor.transaction({changes:o})}})}decreaseFoldLevelAtCursor(r,t){return h(this,null,function*(){var o;let n=yield this.app.foldManager.load(t.file),i=(o=n==null?void 0:n.folds)!=null?o:[];r.listSelections().forEach(l=>{let c=this.getAllParentFolds(r,l);for(let u=0;u<c.length;u++){let p=c[u];if(i.find(f=>f.from===p.from)){(0,ws.default)(i,f=>f.from===p.from);break}}}),t.currentMode.applyFoldInfo({folds:i,lines:t.editor.lineCount()}),t.onMarkdownFold()})}decreaseHeadingFoldLevel(r,t){return h(this,null,function*(){var u,p,f;let n=t.currentMode.getFoldInfo(),i=(u=n==null?void 0:n.folds)!=null?u:[],a=(f=(p=this.app.metadataCache.getFileCache(t.file))==null?void 0:p.headings)!=null?f:[],o=1;for(let d of a)i.find(y=>y.from===d.position.start.line)||(o=Math.max(o,d.level));let l=a.filter(d=>d.level===o),c=[...i,...l.map(d=>({from:d.position.start.line,to:d.position.end.line}))];t.currentMode.applyFoldInfo({folds:c,lines:t.editor.lineCount()}),t.onMarkdownFold()})}increaseHeadingFoldLevel(r,t){return h(this,null,function*(){var u,p,f;let n=t.currentMode.getFoldInfo(),i=(u=n==null?void 0:n.folds)!=null?u:[],a=(f=(p=this.app.metadataCache.getFileCache(t.file))==null?void 0:p.headings)!=null?f:[],o=Math.max(...a.map(d=>d.level));for(let d of a)i.find(y=>y.from===d.position.start.line)&&(o=Math.min(o,d.level));let l=new Set(a.filter(d=>d.level<=o).map(d=>d.position.start.line)),c=i.filter(d=>!l.has(d.from));t.currentMode.applyFoldInfo({folds:c,lines:t.editor.lineCount()}),t.onMarkdownFold()})}patchMarkdownView(){let r=this,t=this.app,n=this.app.workspace.getLeaf();this.register(ae(n.view.constructor.prototype,{onMarkdownFold(i){return function(){return h(this,null,function*(){if(yield i.call(this),r.settings.syncOutlineView==="none")return;let a=this.currentMode.getFoldInfo(),o=t.workspace.getLeavesOfType("outline")[0];if(o){let l=o.view;if(l.file===this.file){let c=l.treeView;for(let u of c.allItems){let p=!!(a==null?void 0:a.folds.find(f=>f.from===u.heading.position.start.line));u.setCollapsed(p)}}}})}},onLoadFile(i){return function(a){return h(this,null,function*(){yield i.call(this,a),a&&r.settings.onOpenCreasesBehavior==="always-fold"&&r.foldCreasesForFile(a)})}}}))}patchCoreTemplatePlugin(){let r=this.app.internalPlugins.getPluginById("templates");!r||this.register(ae(r.instance.constructor.prototype,{insertTemplate(t){return function(n){return h(this,null,function*(){let i=this.app.workspace.getActiveViewOfType(v.MarkdownView);if(!i)return;let a=i.editor.listSelections();yield t.call(this,n);let o=i.editor.listSelections();this.app.workspace.trigger("templates:template-appended",{content:this.app.vault.cachedRead(n),oldSelections:a,newSelections:o,view:i})})}}}))}patchCoreOutlinePlugin(){let r=this,t=this.app.workspace.getLeaf(),n;try{n=this.app.viewRegistry.viewByType.outline(t)}catch(l){return}let i=n.treeView,a=createDiv(),o=i.constructor(a);o.renderOutline([{heading:"test",level:1}]),this.register(ae(o.allItems[0].constructor.prototype,{onCollapseClick(l){return function(c){var p,f;if(l.call(this,c),r.settings.syncOutlineView!=="bidirectional")return;let u=r.app.workspace.getActiveViewOfType(v.MarkdownView);if(u){let d=(f=(p=u.currentMode.getFoldInfo())==null?void 0:p.folds)!=null?f:[];if(this.collapsed){let y=[...d,{from:this.heading.position.start.line,to:this.heading.position.start.line+1}];u.currentMode.applyFoldInfo({folds:y,lines:u.editor.lineCount()})}else u.currentMode.applyFoldInfo({folds:d.filter(y=>this.heading.position.start.line!==y.from),lines:u.editor.lineCount()});u.onMarkdownFold()}}},render(l){return function(){var u,p;l.call(this);let c=r.app.workspace.getActiveViewOfType(v.MarkdownView);c&&(this.innerEl.empty(),v.MarkdownRenderer.renderMarkdown(this.heading.heading,this.innerEl,c.file.path,this),((p=(u=c.currentMode.getFoldInfo())==null?void 0:u.folds)!=null?p:[]).find(d=>d.from===this.heading.position.start.line)&&this.setCollapsed(!0))}}}))}patchFileSuggest(){let t=this.app.workspace.editorSuggest.suggests.find(n=>n.mode!==void 0);!t||this.register(ae(t.constructor.prototype,{getGlobalBlockSuggestions(n){return function(...i){return h(this,null,function*(){let a=yield n.call(this,...i);return a?a.map(o=>o.node.type!=="heading"?o:ue(le({},o),{display:(0,v.stripHeading)(o.node.data.hProperties.dataHeading.replace(C,""))})):null})}},getGlobalHeadingSuggestions(n){return function(...i){return h(this,null,function*(){let a=yield n.call(this,...i);return a?a.map(o=>ue(le({},o),{heading:(0,v.stripHeading)(o.heading.replace(C,""))})):null})}},getHeadingSuggestions(n){return function(...i){return h(this,null,function*(){let a=yield n.call(this,...i);return a?a.map(o=>ue(le({},o),{heading:(0,v.stripHeading)(o.heading.replace(C,""))})):null})}}}))}getAllParentFolds(r,t){return this.getAllFoldableLines(r).filter(i=>og(t,i.from,i.to))}getAllFoldableLines(r){if(this.app.vault.getConfig("legacyEditor")){let n=r.cm.state.foldGutter.options,i=r.cm.foldOption(n,"rangeFinder"),a=[];for(let o=0;o<=r.lastLine();o++){let l=i(r.cm,CodeMirror.Pos(o,0));l&&a.push({from:l.from.line,to:l.to.line})}return a}let t=[];for(let n=0;n<=r.lastLine();n++){let i=r.posToOffset({line:n,ch:0}),a=(0,Cs.foldable)(r.cm.state,i,i);if(a){let o=r.offsetToPos(a.from),l=r.offsetToPos(a.to);t.push({from:o.line,to:l.line})}}return t}getRelevantFold(r,t){let n=this.getAllFoldableLines(r);for(let i=n.length-1;i>=0;i--){let a=n[i];if(a.from<=t.anchor.line&&t.anchor.line<=a.to)return a}return null}onEditorMenu(r,t,n){!t.getSelection()||r.addItem(i=>i.setTitle("Toggle crease").setIcon("shirt").onClick(()=>{this.toggleCrease(t,n)}))}toggleCrease(r,t){r.listSelections().forEach(i=>{let a=this.getRelevantFold(r,i);if(!a)return;let o=a.from,l=r.getLine(o);if(x(l)){let c={line:o,ch:0},u={line:o,ch:l.length},p=l.replace(C,"").trimEnd();r.replaceRange(p,c,u)}else{let c=l.length,u=lg.exec(l);u&&(c=u.index-1);let p={line:o,ch:c},f={line:o,ch:c};r.replaceRange(" %% fold %% ",p,f)}})}getCreasesFromFile(r){return h(this,null,function*(){let n=(yield this.app.vault.cachedRead(r)).split(`
`),i=[];for(let a=0;a<=n.length;a++){let o=n[a];x(o)&&i.push({from:a,to:a+1})}return i})}getCreasesFromEditor(r){let t=[];for(let n=0;n<=r.lastLine();n++){let i=r.getLine(n);x(i)&&t.push({from:n,to:n+1})}return t}foldCreasesForView(r){return h(this,null,function*(){var i;let t=r.currentMode.getFoldInfo(),n=[...(i=t==null?void 0:t.folds)!=null?i:[],...this.getCreasesFromEditor(r.editor)];r.currentMode.applyFoldInfo({folds:n,lines:r.editor.lineCount()})})}foldCreasesForFile(r){return h(this,null,function*(){var l,c,u;let t=yield this.app.vault.cachedRead(r),n=yield this.app.foldManager.load(r),a={folds:[...(l=n==null?void 0:n.folds)!=null?l:[],...yield this.getCreasesFromFile(r)],lines:(u=(c=t.match(/^/gm))==null?void 0:c.length)!=null?u:0},o=this.app.workspace.getLeavesOfType("markdown").filter(p=>p.view&&p.view instanceof v.MarkdownView&&p.view.file===r);o.length?o[0].view.currentMode.applyFoldInfo(a):yield this.app.foldManager.save(r,a)})}toggleFoldForHeadingLevel(r,t){var l,c,u;let n=(c=(l=r.currentMode.getFoldInfo())==null?void 0:l.folds)!=null?c:[],i=(((u=this.app.metadataCache.getFileCache(r.file))==null?void 0:u.headings)||[]).filter(p=>p.level===t),a=new Set(i.map(p=>p.position.start.line)),o=i[0].position.start;if(n.find(p=>p.from===o.line))r.currentMode.applyFoldInfo({folds:n.filter(p=>!a.has(p.from)),lines:r.editor.lineCount()}),r.onMarkdownFold();else{let p=[...n,...i.map(f=>({from:f.position.start.line,to:f.position.start.line+1}))];r.currentMode.applyFoldInfo({folds:p,lines:r.editor.lineCount()}),r.onMarkdownFold()}}creaseCurrentFolds(r,t){var a;let n=t.currentMode.getFoldInfo(),i=[];((a=n==null?void 0:n.folds)!=null?a:[]).forEach(o=>{let l=r.getLine(o.from);if(!x(l)){let c={line:o.from,ch:l.length};i.push({text:" %% fold %%",from:c,to:c})}}),r.transaction({changes:i})}clearCreases(r,t){let n=[];for(let i=0;i<r.lastLine();i++){let a=r.getLine(i);x(a)&&n.push({text:a.replace(C,""),from:{line:i,ch:0},to:{line:i,ch:a.length}})}r.transaction({changes:n})}loadSettings(){return h(this,null,function*(){this.settings=Object.assign({},bs,yield this.loadData())})}saveSettings(){return h(this,null,function*(){yield this.saveData(this.settings)})}registerSettingsTab(){this.addSettingTab(new Ue(this.app,this))}};
