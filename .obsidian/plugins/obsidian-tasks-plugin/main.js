/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source visit the plugins github repository
*/

/*
License obsidian-tasks:
MIT License

Copyright (c) 2021 Martin Schenck

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/

/*
License rrule (included library):
rrule.js: Library for working with recurrence rules for calendar dates.
=======================================================================

Copyright 2010, Jakub Roztocil <jakub@roztocil.name> and Lars Schöning

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

    1. Redistributions of source code must retain the above copyright notice,
       this list of conditions and the following disclaimer.

    2. Redistributions in binary form must reproduce the above copyright
       notice, this list of conditions and the following disclaimer in the
       documentation and/or other materials provided with the distribution.

    3. Neither the name of The author nor the names of its contributors may
       be used to endorse or promote products derived from this software
       without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE AUTHOR AND CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.



./rrule.js and ./test/tests.js is based on python-dateutil. LICENCE:

python-dateutil - Extensions to the standard Python datetime module.
====================================================================

Copyright (c) 2003-2011 - Gustavo Niemeyer <gustavo@niemeyer.net>
Copyright (c) 2012 - Tomi Pieviläinen <tomi.pievilainen@iki.fi>

All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright notice,
      this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright notice,
      this list of conditions and the following disclaimer in the documentation
      and/or other materials provided with the distribution.
    * Neither the name of the copyright holder nor the names of its
      contributors may be used to endorse or promote products derived from
      this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/*
License chrono-node (included library):
The MIT License

Copyright (c) 2014, Wanasit Tanakitrungruang

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/

"use strict";var O_=Object.create;var $n=Object.defineProperty,P_=Object.defineProperties,A_=Object.getOwnPropertyDescriptor,k_=Object.getOwnPropertyDescriptors,N_=Object.getOwnPropertyNames,Qd=Object.getOwnPropertySymbols,S_=Object.getPrototypeOf,ef=Object.prototype.hasOwnProperty,C_=Object.prototype.propertyIsEnumerable;var Jd=(r,e,t)=>e in r?$n(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Re=(r,e)=>{for(var t in e||(e={}))ef.call(e,t)&&Jd(r,t,e[t]);if(Qd)for(var t of Qd(e))C_.call(e,t)&&Jd(r,t,e[t]);return r},lt=(r,e)=>P_(r,k_(e));var p=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),I_=(r,e)=>{for(var t in e)$n(r,t,{get:e[t],enumerable:!0})},tf=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of N_(e))!ef.call(r,i)&&i!==t&&$n(r,i,{get:()=>e[i],enumerable:!(n=A_(e,i))||n.enumerable});return r};var Ts=(r,e,t)=>(t=r!=null?O_(S_(r)):{},tf(e||!r||!r.__esModule?$n(t,"default",{value:r,enumerable:!0}):t,r)),x_=r=>tf($n({},"__esModule",{value:!0}),r);var J=(r,e,t)=>new Promise((n,i)=>{var s=u=>{try{o(t.next(u))}catch(l){i(l)}},a=u=>{try{o(t.throw(u))}catch(l){i(l)}},o=u=>u.done?n(u.value):Promise.resolve(u.value).then(s,a);o((t=t.apply(r,e)).next())});var Nf=p((CA,Ms)=>{var cf,df,ff,pf,hf,mf,yf,gf,_f,Rs,lo,Tf,bf,vf,nn,Ef,wf,Rf,Df,Mf,Of,Pf,Af,kf,Ds;(function(r){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){r(t(e,t(n)))}):typeof Ms=="object"&&typeof Ms.exports=="object"?r(t(e,t(Ms.exports))):r(t(e));function t(n,i){return n!==e&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(s,a){return n[s]=i?i(s,a):a}}})(function(r){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])};cf=function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(n,i);function s(){this.constructor=n}n.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)},df=Object.assign||function(n){for(var i,s=1,a=arguments.length;s<a;s++){i=arguments[s];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},ff=function(n,i){var s={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&i.indexOf(a)<0&&(s[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)i.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(s[a[o]]=n[a[o]]);return s},pf=function(n,i,s,a){var o=arguments.length,u=o<3?i:a===null?a=Object.getOwnPropertyDescriptor(i,s):a,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,i,s,a);else for(var c=n.length-1;c>=0;c--)(l=n[c])&&(u=(o<3?l(u):o>3?l(i,s,u):l(i,s))||u);return o>3&&u&&Object.defineProperty(i,s,u),u},hf=function(n,i){return function(s,a){i(s,a,n)}},mf=function(n,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,i)},yf=function(n,i,s,a){function o(u){return u instanceof s?u:new s(function(l){l(u)})}return new(s||(s=Promise))(function(u,l){function c(h){try{f(a.next(h))}catch(g){l(g)}}function d(h){try{f(a.throw(h))}catch(g){l(g)}}function f(h){h.done?u(h.value):o(h.value).then(c,d)}f((a=a.apply(n,i||[])).next())})},gf=function(n,i){var s={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},a,o,u,l;return l={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(f){return function(h){return d([f,h])}}function d(f){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(u=f[0]&2?o.return:f[0]?o.throw||((u=o.return)&&u.call(o),0):o.next)&&!(u=u.call(o,f[1])).done)return u;switch(o=0,u&&(f=[f[0]&2,u.value]),f[0]){case 0:case 1:u=f;break;case 4:return s.label++,{value:f[1],done:!1};case 5:s.label++,o=f[1],f=[0];continue;case 7:f=s.ops.pop(),s.trys.pop();continue;default:if(u=s.trys,!(u=u.length>0&&u[u.length-1])&&(f[0]===6||f[0]===2)){s=0;continue}if(f[0]===3&&(!u||f[1]>u[0]&&f[1]<u[3])){s.label=f[1];break}if(f[0]===6&&s.label<u[1]){s.label=u[1],u=f;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(f);break}u[2]&&s.ops.pop(),s.trys.pop();continue}f=i.call(n,s)}catch(h){f=[6,h],o=0}finally{a=u=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},_f=function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&Ds(i,n,s)},Ds=Object.create?function(n,i,s,a){a===void 0&&(a=s);var o=Object.getOwnPropertyDescriptor(i,s);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,o)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]},Rs=function(n){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&n[i],a=0;if(s)return s.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&a>=n.length&&(n=void 0),{value:n&&n[a++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},lo=function(n,i){var s=typeof Symbol=="function"&&n[Symbol.iterator];if(!s)return n;var a=s.call(n),o,u=[],l;try{for(;(i===void 0||i-- >0)&&!(o=a.next()).done;)u.push(o.value)}catch(c){l={error:c}}finally{try{o&&!o.done&&(s=a.return)&&s.call(a)}finally{if(l)throw l.error}}return u},Tf=function(){for(var n=[],i=0;i<arguments.length;i++)n=n.concat(lo(arguments[i]));return n},bf=function(){for(var n=0,i=0,s=arguments.length;i<s;i++)n+=arguments[i].length;for(var a=Array(n),o=0,i=0;i<s;i++)for(var u=arguments[i],l=0,c=u.length;l<c;l++,o++)a[o]=u[l];return a},vf=function(n,i,s){if(s||arguments.length===2)for(var a=0,o=i.length,u;a<o;a++)(u||!(a in i))&&(u||(u=Array.prototype.slice.call(i,0,a)),u[a]=i[a]);return n.concat(u||Array.prototype.slice.call(i))},nn=function(n){return this instanceof nn?(this.v=n,this):new nn(n)},Ef=function(n,i,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=s.apply(n,i||[]),o,u=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(m){a[m]&&(o[m]=function(y){return new Promise(function(P,w){u.push([m,y,P,w])>1||c(m,y)})})}function c(m,y){try{d(a[m](y))}catch(P){g(u[0][3],P)}}function d(m){m.value instanceof nn?Promise.resolve(m.value.v).then(f,h):g(u[0][2],m)}function f(m){c("next",m)}function h(m){c("throw",m)}function g(m,y){m(y),u.shift(),u.length&&c(u[0][0],u[0][1])}},wf=function(n){var i,s;return i={},a("next"),a("throw",function(o){throw o}),a("return"),i[Symbol.iterator]=function(){return this},i;function a(o,u){i[o]=n[o]?function(l){return(s=!s)?{value:nn(n[o](l)),done:o==="return"}:u?u(l):l}:u}},Rf=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n[Symbol.asyncIterator],s;return i?i.call(n):(n=typeof Rs=="function"?Rs(n):n[Symbol.iterator](),s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s);function a(u){s[u]=n[u]&&function(l){return new Promise(function(c,d){l=n[u](l),o(c,d,l.done,l.value)})}}function o(u,l,c,d){Promise.resolve(d).then(function(f){u({value:f,done:c})},l)}},Df=function(n,i){return Object.defineProperty?Object.defineProperty(n,"raw",{value:i}):n.raw=i,n};var t=Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i};Mf=function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var s in n)s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)&&Ds(i,n,s);return t(i,n),i},Of=function(n){return n&&n.__esModule?n:{default:n}},Pf=function(n,i,s,a){if(s==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof i=="function"?n!==i||!a:!i.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?a:s==="a"?a.call(n):a?a.value:i.get(n)},Af=function(n,i,s,a,o){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof i=="function"?n!==i||!o:!i.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?o.call(n,s):o?o.value=s:i.set(n,s),s},kf=function(n,i){if(i===null||typeof i!="object"&&typeof i!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?i===n:n.has(i)},r("__extends",cf),r("__assign",df),r("__rest",ff),r("__decorate",pf),r("__param",hf),r("__metadata",mf),r("__awaiter",yf),r("__generator",gf),r("__exportStar",_f),r("__createBinding",Ds),r("__values",Rs),r("__read",lo),r("__spread",Tf),r("__spreadArrays",bf),r("__spreadArray",vf),r("__await",nn),r("__asyncGenerator",Ef),r("__asyncDelegator",wf),r("__asyncValues",Rf),r("__makeTemplateObject",Df),r("__importStar",Mf),r("__importDefault",Of),r("__classPrivateFieldGet",Pf),r("__classPrivateFieldSet",Af),r("__classPrivateFieldIn",kf)})});var se=p(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.matchAnyPattern=Tr.extractTerms=Tr.repeatedTimeunitPattern=void 0;function OT(r,e){let t=e.replace(/\((?!\?)/g,"(?:");return`${r}${t}\\s{0,5}(?:,?\\s{0,5}${t}){0,10}`}Tr.repeatedTimeunitPattern=OT;function Dp(r){let e;return r instanceof Array?e=[...r]:r instanceof Map?e=Array.from(r.keys()):e=Object.keys(r),e}Tr.extractTerms=Dp;function PT(r){return`(?:${Dp(r).sort((t,n)=>n.length-t.length).join("|").replace(/\./g,"\\.")})`}Tr.matchAnyPattern=PT});var X=p((wo,Ro)=>{(function(r,e){typeof wo=="object"&&typeof Ro!="undefined"?Ro.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs=e()})(wo,function(){"use strict";var r=1e3,e=6e4,t=36e5,n="millisecond",i="second",s="minute",a="hour",o="day",u="week",l="month",c="quarter",d="year",f="date",h="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},P=function(S,E,b){var A=String(S);return!A||A.length>=E?S:""+Array(E+1-A.length).join(b)+S},w={s:P,z:function(S){var E=-S.utcOffset(),b=Math.abs(E),A=Math.floor(b/60),_=b%60;return(E<=0?"+":"-")+P(A,2,"0")+":"+P(_,2,"0")},m:function S(E,b){if(E.date()<b.date())return-S(b,E);var A=12*(b.year()-E.year())+(b.month()-E.month()),_=E.clone().add(A,l),C=b-_<0,k=E.clone().add(A+(C?-1:1),l);return+(-(A+(b-_)/(C?_-k:k-_))||0)},a:function(S){return S<0?Math.ceil(S)||0:Math.floor(S)},p:function(S){return{M:l,y:d,w:u,d:o,D:f,h:a,m:s,s:i,ms:n,Q:c}[S]||String(S||"").toLowerCase().replace(/s$/,"")},u:function(S){return S===void 0}},N="en",V={};V[N]=y;var le=function(S){return S instanceof ut},ye=function(S,E,b){var A;if(!S)return N;if(typeof S=="string")V[S]&&(A=S),E&&(V[S]=E,A=S);else{var _=S.name;V[_]=S,A=_}return!b&&A&&(N=A),A||!b&&N},ne=function(S,E){if(le(S))return S.clone();var b=typeof E=="object"?E:{};return b.date=S,b.args=arguments,new ut(b)},$=w;$.l=ye,$.i=le,$.w=function(S,E){return ne(S,{locale:E.$L,utc:E.$u,x:E.$x,$offset:E.$offset})};var ut=function(){function S(b){this.$L=ye(b.locale,null,!0),this.parse(b)}var E=S.prototype;return E.parse=function(b){this.$d=function(A){var _=A.date,C=A.utc;if(_===null)return new Date(NaN);if($.u(_))return new Date;if(_ instanceof Date)return new Date(_);if(typeof _=="string"&&!/Z$/i.test(_)){var k=_.match(g);if(k){var x=k[2]-1||0,te=(k[7]||"0").substring(0,3);return C?new Date(Date.UTC(k[1],x,k[3]||1,k[4]||0,k[5]||0,k[6]||0,te)):new Date(k[1],x,k[3]||1,k[4]||0,k[5]||0,k[6]||0,te)}}return new Date(_)}(b),this.$x=b.x||{},this.init()},E.init=function(){var b=this.$d;this.$y=b.getFullYear(),this.$M=b.getMonth(),this.$D=b.getDate(),this.$W=b.getDay(),this.$H=b.getHours(),this.$m=b.getMinutes(),this.$s=b.getSeconds(),this.$ms=b.getMilliseconds()},E.$utils=function(){return $},E.isValid=function(){return this.$d.toString()!==h},E.isSame=function(b,A){var _=ne(b);return this.startOf(A)<=_&&_<=this.endOf(A)},E.isAfter=function(b,A){return ne(b)<this.startOf(A)},E.isBefore=function(b,A){return this.endOf(A)<ne(b)},E.$g=function(b,A,_){return $.u(b)?this[A]:this.set(_,b)},E.unix=function(){return Math.floor(this.valueOf()/1e3)},E.valueOf=function(){return this.$d.getTime()},E.startOf=function(b,A){var _=this,C=!!$.u(A)||A,k=$.p(b),x=function(zt,Ie){var Je=$.w(_.$u?Date.UTC(_.$y,Ie,zt):new Date(_.$y,Ie,zt),_);return C?Je:Je.endOf(o)},te=function(zt,Ie){return $.w(_.toDate()[zt].apply(_.toDate("s"),(C?[0,0,0,0]:[23,59,59,999]).slice(Ie)),_)},H=this.$W,oe=this.$M,fe=this.$D,Ce="set"+(this.$u?"UTC":"");switch(k){case d:return C?x(1,0):x(31,11);case l:return C?x(1,oe):x(0,oe+1);case u:var He=this.$locale().weekStart||0,Qe=(H<He?H+7:H)-He;return x(C?fe-Qe:fe+(6-Qe),oe);case o:case f:return te(Ce+"Hours",0);case a:return te(Ce+"Minutes",1);case s:return te(Ce+"Seconds",2);case i:return te(Ce+"Milliseconds",3);default:return this.clone()}},E.endOf=function(b){return this.startOf(b,!1)},E.$set=function(b,A){var _,C=$.p(b),k="set"+(this.$u?"UTC":""),x=(_={},_[o]=k+"Date",_[f]=k+"Date",_[l]=k+"Month",_[d]=k+"FullYear",_[a]=k+"Hours",_[s]=k+"Minutes",_[i]=k+"Seconds",_[n]=k+"Milliseconds",_)[C],te=C===o?this.$D+(A-this.$W):A;if(C===l||C===d){var H=this.clone().set(f,1);H.$d[x](te),H.init(),this.$d=H.set(f,Math.min(this.$D,H.daysInMonth())).$d}else x&&this.$d[x](te);return this.init(),this},E.set=function(b,A){return this.clone().$set(b,A)},E.get=function(b){return this[$.p(b)]()},E.add=function(b,A){var _,C=this;b=Number(b);var k=$.p(A),x=function(oe){var fe=ne(C);return $.w(fe.date(fe.date()+Math.round(oe*b)),C)};if(k===l)return this.set(l,this.$M+b);if(k===d)return this.set(d,this.$y+b);if(k===o)return x(1);if(k===u)return x(7);var te=(_={},_[s]=e,_[a]=t,_[i]=r,_)[k]||1,H=this.$d.getTime()+b*te;return $.w(H,this)},E.subtract=function(b,A){return this.add(-1*b,A)},E.format=function(b){var A=this,_=this.$locale();if(!this.isValid())return _.invalidDate||h;var C=b||"YYYY-MM-DDTHH:mm:ssZ",k=$.z(this),x=this.$H,te=this.$m,H=this.$M,oe=_.weekdays,fe=_.months,Ce=function(Ie,Je,Qr,Kt){return Ie&&(Ie[Je]||Ie(A,C))||Qr[Je].substr(0,Kt)},He=function(Ie){return $.s(x%12||12,Ie,"0")},Qe=_.meridiem||function(Ie,Je,Qr){var Kt=Ie<12?"AM":"PM";return Qr?Kt.toLowerCase():Kt},zt={YY:String(this.$y).slice(-2),YYYY:this.$y,M:H+1,MM:$.s(H+1,2,"0"),MMM:Ce(_.monthsShort,H,fe,3),MMMM:Ce(fe,H),D:this.$D,DD:$.s(this.$D,2,"0"),d:String(this.$W),dd:Ce(_.weekdaysMin,this.$W,oe,2),ddd:Ce(_.weekdaysShort,this.$W,oe,3),dddd:oe[this.$W],H:String(x),HH:$.s(x,2,"0"),h:He(1),hh:He(2),a:Qe(x,te,!0),A:Qe(x,te,!1),m:String(te),mm:$.s(te,2,"0"),s:String(this.$s),ss:$.s(this.$s,2,"0"),SSS:$.s(this.$ms,3,"0"),Z:k};return C.replace(m,function(Ie,Je){return Je||zt[Ie]||k.replace(":","")})},E.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},E.diff=function(b,A,_){var C,k=$.p(A),x=ne(b),te=(x.utcOffset()-this.utcOffset())*e,H=this-x,oe=$.m(this,x);return oe=(C={},C[d]=oe/12,C[l]=oe,C[c]=oe/3,C[u]=(H-te)/6048e5,C[o]=(H-te)/864e5,C[a]=H/t,C[s]=H/e,C[i]=H/r,C)[k]||H,_?oe:$.a(oe)},E.daysInMonth=function(){return this.endOf(l).$D},E.$locale=function(){return V[this.$L]},E.locale=function(b,A){if(!b)return this.$L;var _=this.clone(),C=ye(b,A,!0);return C&&(_.$L=C),_},E.clone=function(){return $.w(this.$d,this)},E.toDate=function(){return new Date(this.valueOf())},E.toJSON=function(){return this.isValid()?this.toISOString():null},E.toISOString=function(){return this.$d.toISOString()},E.toString=function(){return this.$d.toUTCString()},S}(),We=ut.prototype;return ne.prototype=We,[["$ms",n],["$s",i],["$m",s],["$H",a],["$W",o],["$M",l],["$y",d],["$D",f]].forEach(function(S){We[S[1]]=function(E){return this.$g(E,S[0],S[1])}}),ne.extend=function(S,E){return S.$i||(S(E,ut,ne),S.$i=!0),ne},ne.locale=ye,ne.isDayjs=le,ne.unix=function(S){return ne(1e3*S)},ne.en=V[N],ne.Ls=V,ne.p={},ne})});var Fe=p(br=>{"use strict";var AT=br&&br.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(br,"__esModule",{value:!0});br.findYearClosestToRef=br.findMostLikelyADYear=void 0;var kT=AT(X());function NT(r){return r<100&&(r>50?r=r+1900:r=r+2e3),r}br.findMostLikelyADYear=NT;function ST(r,e,t){let n=kT.default(r),i=n;i=i.month(t-1),i=i.date(e),i=i.year(n.year());let s=i.add(1,"y"),a=i.add(-1,"y");return Math.abs(s.diff(n))<Math.abs(i.diff(n))?i=s:Math.abs(a.diff(n))<Math.abs(i.diff(n))&&(i=a),i.year()}br.findYearClosestToRef=ST});var Ue=p(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});W.parseTimeUnits=W.TIME_UNITS_PATTERN=W.parseYear=W.YEAR_PATTERN=W.parseOrdinalNumberPattern=W.ORDINAL_NUMBER_PATTERN=W.parseNumberPattern=W.NUMBER_PATTERN=W.TIME_UNIT_DICTIONARY=W.ORDINAL_WORD_DICTIONARY=W.INTEGER_WORD_DICTIONARY=W.MONTH_DICTIONARY=W.FULL_MONTH_NAME_DICTIONARY=W.WEEKDAY_DICTIONARY=void 0;var Is=se(),CT=Fe();W.WEEKDAY_DICTIONARY={sunday:0,sun:0,"sun.":0,monday:1,mon:1,"mon.":1,tuesday:2,tue:2,"tue.":2,wednesday:3,wed:3,"wed.":3,thursday:4,thurs:4,"thurs.":4,thur:4,"thur.":4,thu:4,"thu.":4,friday:5,fri:5,"fri.":5,saturday:6,sat:6,"sat.":6};W.FULL_MONTH_NAME_DICTIONARY={january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12};W.MONTH_DICTIONARY=Object.assign(Object.assign({},W.FULL_MONTH_NAME_DICTIONARY),{jan:1,"jan.":1,feb:2,"feb.":2,mar:3,"mar.":3,apr:4,"apr.":4,jun:6,"jun.":6,jul:7,"jul.":7,aug:8,"aug.":8,sep:9,"sep.":9,sept:9,"sept.":9,oct:10,"oct.":10,nov:11,"nov.":11,dec:12,"dec.":12});W.INTEGER_WORD_DICTIONARY={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12};W.ORDINAL_WORD_DICTIONARY={first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,twentieth:20,"twenty first":21,"twenty-first":21,"twenty second":22,"twenty-second":22,"twenty third":23,"twenty-third":23,"twenty fourth":24,"twenty-fourth":24,"twenty fifth":25,"twenty-fifth":25,"twenty sixth":26,"twenty-sixth":26,"twenty seventh":27,"twenty-seventh":27,"twenty eighth":28,"twenty-eighth":28,"twenty ninth":29,"twenty-ninth":29,thirtieth:30,"thirty first":31,"thirty-first":31};W.TIME_UNIT_DICTIONARY={sec:"second",second:"second",seconds:"second",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",hour:"hour",hours:"hour",day:"d",days:"d",week:"week",weeks:"week",month:"month",months:"month",qtr:"quarter",quarter:"quarter",quarters:"quarter",y:"year",yr:"year",year:"year",years:"year"};W.NUMBER_PATTERN=`(?:${Is.matchAnyPattern(W.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s{0,2}an?)?|an?\\b(?:\\s{0,2}few)?|few|several|a?\\s{0,2}couple\\s{0,2}(?:of)?)`;function Op(r){let e=r.toLowerCase();return W.INTEGER_WORD_DICTIONARY[e]!==void 0?W.INTEGER_WORD_DICTIONARY[e]:e==="a"||e==="an"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}W.parseNumberPattern=Op;W.ORDINAL_NUMBER_PATTERN=`(?:${Is.matchAnyPattern(W.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:st|nd|rd|th)?)`;function IT(r){let e=r.toLowerCase();return W.ORDINAL_WORD_DICTIONARY[e]!==void 0?W.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}W.parseOrdinalNumberPattern=IT;W.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s{0,2}(?:BE|AD|BC|BCE|CE)|[1-2][0-9]{3}|[5-9][0-9])";function xT(r){if(/BE/i.test(r))return r=r.replace(/BE/i,""),parseInt(r)-543;if(/BCE?/i.test(r))return r=r.replace(/BCE?/i,""),-parseInt(r);if(/(AD|CE)/i.test(r))return r=r.replace(/(AD|CE)/i,""),parseInt(r);let e=parseInt(r);return CT.findMostLikelyADYear(e)}W.parseYear=xT;var Pp=`(${W.NUMBER_PATTERN})\\s{0,3}(${Is.matchAnyPattern(W.TIME_UNIT_DICTIONARY)})`,Mp=new RegExp(Pp,"i");W.TIME_UNITS_PATTERN=Is.repeatedTimeunitPattern("(?:(?:about|around)\\s{0,3})?",Pp);function FT(r){let e={},t=r,n=Mp.exec(t);for(;n;)UT(e,n),t=t.substring(n[0].length).trim(),n=Mp.exec(t);return e}W.parseTimeUnits=FT;function UT(r,e){let t=Op(e[1]),n=W.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Ap=p((Do,Mo)=>{(function(r,e){typeof Do=="object"&&typeof Mo!="undefined"?Mo.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs_plugin_quarterOfYear=e()})(Do,function(){"use strict";var r="month",e="quarter";return function(t,n){var i=n.prototype;i.quarter=function(o){return this.$utils().u(o)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(o-1))};var s=i.add;i.add=function(o,u){return o=Number(o),this.$utils().p(u)===e?this.add(3*o,r):s.bind(this)(o,u)};var a=i.startOf;i.startOf=function(o,u){var l=this.$utils(),c=!!l.u(u)||u;if(l.p(o)===e){var d=this.quarter()-1;return c?this.month(3*d).startOf(r).startOf("day"):this.month(3*d+2).endOf(r).endOf("day")}return a.bind(this)(o,u)}}})});var pt=p(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});Lt.implySimilarTime=Lt.assignSimilarTime=Lt.assignSimilarDate=Lt.assignTheNextDay=void 0;var kp=we();function qT(r,e){e=e.add(1,"day"),Np(r,e),Sp(r,e)}Lt.assignTheNextDay=qT;function Np(r,e){r.assign("day",e.date()),r.assign("month",e.month()+1),r.assign("year",e.year())}Lt.assignSimilarDate=Np;function WT(r,e){r.assign("hour",e.hour()),r.assign("minute",e.minute()),r.assign("second",e.second()),r.assign("millisecond",e.millisecond()),r.get("hour")<12?r.assign("meridiem",kp.Meridiem.AM):r.assign("meridiem",kp.Meridiem.PM)}Lt.assignSimilarTime=WT;function Sp(r,e){r.imply("hour",e.hour()),r.imply("minute",e.minute()),r.imply("second",e.second()),r.imply("millisecond",e.millisecond())}Lt.implySimilarTime=Sp});var Cp=p(Ur=>{"use strict";Object.defineProperty(Ur,"__esModule",{value:!0});Ur.toTimezoneOffset=Ur.TIMEZONE_ABBR_MAP=void 0;Ur.TIMEZONE_ABBR_MAP={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:180,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360};function LT(r){var e;return r==null?null:typeof r=="number"?r:(e=Ur.TIMEZONE_ABBR_MAP[r])!==null&&e!==void 0?e:null}Ur.toTimezoneOffset=LT});var pe=p(Yt=>{"use strict";var Ip=Yt&&Yt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Yt,"__esModule",{value:!0});Yt.ParsingResult=Yt.ParsingComponents=Yt.ReferenceWithTimezone=void 0;var YT=Ip(Ap()),xs=Ip(X()),Oo=pt(),$T=Cp();xs.default.extend(YT.default);var Po=class{constructor(e){var t;e=e!=null?e:new Date,e instanceof Date?this.instant=e:(this.instant=(t=e.instant)!==null&&t!==void 0?t:new Date,this.timezoneOffset=$T.toTimezoneOffset(e.timezone))}};Yt.ReferenceWithTimezone=Po;var qr=class{constructor(e,t){if(this.reference=e,this.knownValues={},this.impliedValues={},t)for(let i in t)this.knownValues[i]=t[i];let n=xs.default(e.instant);this.imply("day",n.date()),this.imply("month",n.month()+1),this.imply("year",n.year()),this.imply("hour",12),this.imply("minute",0),this.imply("second",0),this.imply("millisecond",0)}get(e){return e in this.knownValues?this.knownValues[e]:e in this.impliedValues?this.impliedValues[e]:null}isCertain(e){return e in this.knownValues}getCertainComponents(){return Object.keys(this.knownValues)}imply(e,t){return e in this.knownValues?this:(this.impliedValues[e]=t,this)}assign(e,t){return this.knownValues[e]=t,delete this.impliedValues[e],this}delete(e){delete this.knownValues[e],delete this.impliedValues[e]}clone(){let e=new qr(this.reference);e.knownValues={},e.impliedValues={};for(let t in this.knownValues)e.knownValues[t]=this.knownValues[t];for(let t in this.impliedValues)e.impliedValues[t]=this.impliedValues[t];return e}isOnlyDate(){return!this.isCertain("hour")&&!this.isCertain("minute")&&!this.isCertain("second")}isOnlyTime(){return!this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyWeekdayComponent(){return this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyDayMonthComponent(){return this.isCertain("day")&&this.isCertain("month")&&!this.isCertain("year")}isValidDate(){let e=this.dateWithoutTimezoneAdjustment();return!(e.getFullYear()!==this.get("year")||e.getMonth()!==this.get("month")-1||e.getDate()!==this.get("day")||this.get("hour")!=null&&e.getHours()!=this.get("hour")||this.get("minute")!=null&&e.getMinutes()!=this.get("minute"))}toString(){return`[ParsingComponents {knownValues: ${JSON.stringify(this.knownValues)}, impliedValues: ${JSON.stringify(this.impliedValues)}}, reference: ${JSON.stringify(this.reference)}]`}dayjs(){return xs.default(this.date())}date(){let e=this.dateWithoutTimezoneAdjustment();return new Date(e.getTime()+this.getSystemTimezoneAdjustmentMinute(e)*6e4)}dateWithoutTimezoneAdjustment(){let e=new Date(this.get("year"),this.get("month")-1,this.get("day"),this.get("hour"),this.get("minute"),this.get("second"),this.get("millisecond"));return e.setFullYear(this.get("year")),e}getSystemTimezoneAdjustmentMinute(e){var t,n;(!e||e.getTime()<0)&&(e=new Date);let i=-e.getTimezoneOffset(),s=(n=(t=this.get("timezoneOffset"))!==null&&t!==void 0?t:this.reference.timezoneOffset)!==null&&n!==void 0?n:i;return i-s}static createRelativeFromReference(e,t){let n=xs.default(e.instant);for(let s in t)n=n.add(t[s],s);let i=new qr(e);return t.hour||t.minute||t.second?(Oo.assignSimilarTime(i,n),Oo.assignSimilarDate(i,n),e.timezoneOffset!==null&&i.assign("timezoneOffset",-e.instant.getTimezoneOffset())):(Oo.implySimilarTime(i,n),e.timezoneOffset!==null&&i.imply("timezoneOffset",-e.instant.getTimezoneOffset()),t.d?(i.assign("day",n.date()),i.assign("month",n.month()+1),i.assign("year",n.year())):(t.week&&i.imply("weekday",n.day()),i.imply("day",n.date()),t.month?(i.assign("month",n.month()+1),i.assign("year",n.year())):(i.imply("month",n.month()+1),t.year?i.assign("year",n.year()):i.imply("year",n.year())))),i}};Yt.ParsingComponents=qr;var ti=class{constructor(e,t,n,i,s){this.reference=e,this.refDate=e.instant,this.index=t,this.text=n,this.start=i||new qr(e),this.end=s}clone(){let e=new ti(this.reference,this.index,this.text);return e.start=this.start?this.start.clone():null,e.end=this.end?this.end.clone():null,e}date(){return this.start.date()}toString(){return`[ParsingResult {index: ${this.index}, text: '${this.text}', ...}]`}};Yt.ParsingResult=ti});var R=p(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});Fs.AbstractParserWithWordBoundaryChecking=void 0;var Ao=class{constructor(){this.cachedInnerPattern=null,this.cachedPattern=null}patternLeftBoundary(){return"(\\W|^)"}pattern(e){let t=this.innerPattern(e);return t==this.cachedInnerPattern?this.cachedPattern:(this.cachedPattern=new RegExp(`${this.patternLeftBoundary()}${t.source}`,t.flags),this.cachedInnerPattern=t,this.cachedPattern)}extract(e,t){var n;let i=(n=t[1])!==null&&n!==void 0?n:"";t.index=t.index+i.length,t[0]=t[0].substring(i.length);for(let s=2;s<t.length;s++)t[s-1]=t[s];return this.innerExtract(e,t)}};Fs.AbstractParserWithWordBoundaryChecking=Ao});var xp=p(So=>{"use strict";Object.defineProperty(So,"__esModule",{value:!0});var No=Ue(),jT=pe(),BT=R(),GT=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${No.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),HT=new RegExp(`(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${No.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),ko=class extends BT.AbstractParserWithWordBoundaryChecking{innerPattern(e){return e.option.forwardDate?HT:GT}innerExtract(e,t){let n=No.parseTimeUnits(t[1]);return jT.ParsingComponents.createRelativeFromReference(e.reference,n)}};So.default=ko});var Yp=p(Io=>{"use strict";Object.defineProperty(Io,"__esModule",{value:!0});var zT=Fe(),Wp=Ue(),Lp=Ue(),Us=Ue(),KT=se(),VT=R(),ZT=new RegExp(`(?:on\\s{0,3})?(${Us.ORDINAL_NUMBER_PATTERN})(?:\\s{0,3}(?:to|\\-|\\\u2013|until|through|till)?\\s{0,3}(${Us.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s{0,3}(?:of)?\\s{0,3})(${KT.matchAnyPattern(Wp.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s{0,3})(${Lp.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),Fp=1,Up=2,XT=3,qp=4,Co=class extends VT.AbstractParserWithWordBoundaryChecking{innerPattern(){return ZT}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Wp.MONTH_DICTIONARY[t[XT].toLowerCase()],s=Us.parseOrdinalNumberPattern(t[Fp]);if(s>31)return t.index=t.index+t[Fp].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[qp]){let a=Lp.parseYear(t[qp]);n.start.assign("year",a)}else{let a=zT.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Up]){let a=Us.parseOrdinalNumberPattern(t[Up]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Io.default=Co});var Hp=p(Fo=>{"use strict";Object.defineProperty(Fo,"__esModule",{value:!0});var QT=Fe(),Bp=Ue(),qs=Ue(),Gp=Ue(),JT=se(),eb=R(),tb=new RegExp(`(${JT.matchAnyPattern(Bp.MONTH_DICTIONARY)})(?:-|/|\\s*,?\\s*)(${qs.ORDINAL_NUMBER_PATTERN})(?!\\s*(?:am|pm))\\s*(?:(?:to|\\-)\\s*(${qs.ORDINAL_NUMBER_PATTERN})\\s*)?(?:(?:-|/|\\s*,?\\s*)(${Gp.YEAR_PATTERN}))?(?=\\W|$)(?!\\:\\d)`,"i"),rb=1,nb=2,$p=3,jp=4,xo=class extends eb.AbstractParserWithWordBoundaryChecking{innerPattern(){return tb}innerExtract(e,t){let n=Bp.MONTH_DICTIONARY[t[rb].toLowerCase()],i=qs.parseOrdinalNumberPattern(t[nb]);if(i>31)return null;let s=e.createParsingComponents({day:i,month:n});if(t[jp]){let u=Gp.parseYear(t[jp]);s.assign("year",u)}else{let u=QT.findYearClosestToRef(e.refDate,i,n);s.imply("year",u)}if(!t[$p])return s;let a=qs.parseOrdinalNumberPattern(t[$p]),o=e.createParsingResult(t.index,t[0]);return o.start=s,o.end=s.clone(),o.end.assign("day",a),o}};Fo.default=xo});var Vp=p(Wo=>{"use strict";Object.defineProperty(Wo,"__esModule",{value:!0});var Uo=Ue(),ib=Fe(),sb=se(),Kp=Ue(),ab=R(),ob=new RegExp(`((?:in)\\s*)?(${sb.matchAnyPattern(Uo.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${Kp.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),ub=1,lb=2,zp=3,qo=class extends ab.AbstractParserWithWordBoundaryChecking{innerPattern(){return ob}innerExtract(e,t){let n=t[lb].toLowerCase();if(t[0].length<=3&&!Uo.FULL_MONTH_NAME_DICTIONARY[n])return null;let i=e.createParsingResult(t.index+(t[ub]||"").length,t.index+t[0].length);i.start.imply("day",1);let s=Uo.MONTH_DICTIONARY[n];if(i.start.assign("month",s),t[zp]){let a=Kp.parseYear(t[zp]);i.start.assign("year",a)}else{let a=ib.findYearClosestToRef(e.refDate,1,s);i.start.imply("year",a)}return i}};Wo.default=qo});var Qp=p(Yo=>{"use strict";Object.defineProperty(Yo,"__esModule",{value:!0});var Xp=Ue(),cb=se(),db=R(),fb=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${cb.matchAnyPattern(Xp.MONTH_DICTIONARY)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),pb=1,hb=2,Zp=3,mb=4,Lo=class extends db.AbstractParserWithWordBoundaryChecking{innerPattern(){return fb}innerExtract(e,t){let n=t[Zp]?parseInt(t[Zp]):Xp.MONTH_DICTIONARY[t[hb].toLowerCase()];if(n<1||n>12)return null;let i=parseInt(t[pb]);return{day:parseInt(t[mb]),month:n,year:i}}};Yo.default=Lo});var Jp=p(jo=>{"use strict";Object.defineProperty(jo,"__esModule",{value:!0});var yb=R(),gb=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),_b=1,Tb=2,$o=class extends yb.AbstractParserWithWordBoundaryChecking{innerPattern(){return gb}innerExtract(e,t){let n=parseInt(t[Tb]),i=parseInt(t[_b]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};jo.default=$o});var Wr=p(Ys=>{"use strict";Object.defineProperty(Ys,"__esModule",{value:!0});Ys.AbstractTimeExpressionParser=void 0;var Ge=we();function bb(r,e,t,n){return new RegExp(`${r}${e}(\\d{1,4})(?:(?:\\.|:|\uFF1A)(\\d{1,2})(?:(?::|\uFF1A)(\\d{2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${t}`,n)}function vb(r,e){return new RegExp(`^(${r})(\\d{1,4})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${e}`,"i")}var eh=2,ln=3,Ws=4,Ls=5,ri=6,Bo=class{constructor(e=!1){this.cachedPrimaryPrefix=null,this.cachedPrimarySuffix=null,this.cachedPrimaryTimePattern=null,this.cachedFollowingPhase=null,this.cachedFollowingSuffix=null,this.cachedFollowingTimePatten=null,this.strictMode=e}patternFlags(){return"i"}primaryPatternLeftBoundary(){return"(^|\\s|T|\\b)"}primarySuffix(){return"(?=\\W|$)"}followingSuffix(){return"(?=\\W|$)"}pattern(e){return this.getPrimaryTimePatternThroughCache()}extract(e,t){let n=this.extractPrimaryTimeComponents(e,t);if(!n)return t.index+=t[0].length,null;let i=t.index+t[1].length,s=t[0].substring(t[1].length),a=e.createParsingResult(i,s,n);t.index+=t[0].length;let o=e.text.substring(t.index),l=this.getFollowingTimePatternThroughCache().exec(o);return s.match(/^\d{3,4}/)&&l&&l[0].match(/^\s*([+-])\s*\d{2,4}$/)?null:!l||l[0].match(/^\s*([+-])\s*\d{3,4}$/)?this.checkAndReturnWithoutFollowingPattern(a):(a.end=this.extractFollowingTimeComponents(e,l,a),a.end&&(a.text+=l[0]),this.checkAndReturnWithFollowingPattern(a))}extractPrimaryTimeComponents(e,t,n=!1){let i=e.createParsingComponents(),s=0,a=null,o=parseInt(t[eh]);if(o>100){if(this.strictMode||t[ln]!=null)return null;s=o%100,o=Math.floor(o/100)}if(o>24)return null;if(t[ln]!=null){if(t[ln].length==1&&!t[ri])return null;s=parseInt(t[ln])}if(s>=60)return null;if(o>12&&(a=Ge.Meridiem.PM),t[ri]!=null){if(o>12)return null;let u=t[ri][0].toLowerCase();u=="a"&&(a=Ge.Meridiem.AM,o==12&&(o=0)),u=="p"&&(a=Ge.Meridiem.PM,o!=12&&(o+=12))}if(i.assign("hour",o),i.assign("minute",s),a!==null?i.assign("meridiem",a):o<12?i.imply("meridiem",Ge.Meridiem.AM):i.imply("meridiem",Ge.Meridiem.PM),t[Ls]!=null){let u=parseInt(t[Ls].substring(0,3));if(u>=1e3)return null;i.assign("millisecond",u)}if(t[Ws]!=null){let u=parseInt(t[Ws]);if(u>=60)return null;i.assign("second",u)}return i}extractFollowingTimeComponents(e,t,n){let i=e.createParsingComponents();if(t[Ls]!=null){let u=parseInt(t[Ls].substring(0,3));if(u>=1e3)return null;i.assign("millisecond",u)}if(t[Ws]!=null){let u=parseInt(t[Ws]);if(u>=60)return null;i.assign("second",u)}let s=parseInt(t[eh]),a=0,o=-1;if(t[ln]!=null?a=parseInt(t[ln]):s>100&&(a=s%100,s=Math.floor(s/100)),a>=60||s>24)return null;if(s>=12&&(o=Ge.Meridiem.PM),t[ri]!=null){if(s>12)return null;let u=t[ri][0].toLowerCase();u=="a"&&(o=Ge.Meridiem.AM,s==12&&(s=0,i.isCertain("day")||i.imply("day",i.get("day")+1))),u=="p"&&(o=Ge.Meridiem.PM,s!=12&&(s+=12)),n.start.isCertain("meridiem")||(o==Ge.Meridiem.AM?(n.start.imply("meridiem",Ge.Meridiem.AM),n.start.get("hour")==12&&n.start.assign("hour",0)):(n.start.imply("meridiem",Ge.Meridiem.PM),n.start.get("hour")!=12&&n.start.assign("hour",n.start.get("hour")+12)))}return i.assign("hour",s),i.assign("minute",a),o>=0?i.assign("meridiem",o):n.start.isCertain("meridiem")&&n.start.get("hour")>12?n.start.get("hour")-12>s?i.imply("meridiem",Ge.Meridiem.AM):s<=12&&(i.assign("hour",s+12),i.assign("meridiem",Ge.Meridiem.PM)):s>12?i.imply("meridiem",Ge.Meridiem.PM):s<=12&&i.imply("meridiem",Ge.Meridiem.AM),i.date().getTime()<n.start.date().getTime()&&i.imply("day",i.get("day")+1),i}checkAndReturnWithoutFollowingPattern(e){if(e.text.match(/^\d$/)||e.text.match(/^\d\d\d+$/)||e.text.match(/\d[apAP]$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)$/);if(t){let n=t[1];if(this.strictMode||n.includes(".")&&!n.match(/\d(\.\d{2})+$/)||parseInt(n)>24)return null}return e}checkAndReturnWithFollowingPattern(e){if(e.text.match(/^\d+-\d+$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)\s*-\s*(\d[\d.]+)$/);if(t){if(this.strictMode)return null;let n=t[1],i=t[2];if(i.includes(".")&&!i.match(/\d(\.\d{2})+$/))return null;let s=parseInt(i),a=parseInt(n);if(s>24||a>24)return null}return e}getPrimaryTimePatternThroughCache(){let e=this.primaryPrefix(),t=this.primarySuffix();return this.cachedPrimaryPrefix===e&&this.cachedPrimarySuffix===t?this.cachedPrimaryTimePattern:(this.cachedPrimaryTimePattern=bb(this.primaryPatternLeftBoundary(),e,t,this.patternFlags()),this.cachedPrimaryPrefix=e,this.cachedPrimarySuffix=t,this.cachedPrimaryTimePattern)}getFollowingTimePatternThroughCache(){let e=this.followingPhase(),t=this.followingSuffix();return this.cachedFollowingPhase===e&&this.cachedFollowingSuffix===t?this.cachedFollowingTimePatten:(this.cachedFollowingTimePatten=vb(e,t),this.cachedFollowingPhase=e,this.cachedFollowingSuffix=t,this.cachedFollowingTimePatten)}};Ys.AbstractTimeExpressionParser=Bo});var th=p(Ho=>{"use strict";Object.defineProperty(Ho,"__esModule",{value:!0});var $s=we(),Eb=Wr(),Go=class extends Eb.AbstractTimeExpressionParser{constructor(e){super(e)}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|to|\\?)\\s*"}primaryPrefix(){return"(?:(?:at|from)\\s*)??"}primarySuffix(){return"(?:\\s*(?:o\\W*clock|at\\s*night|in\\s*the\\s*(?:morning|afternoon)))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){let n=super.extractPrimaryTimeComponents(e,t);if(n){if(t[0].endsWith("night")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",$s.Meridiem.PM)):i<6&&n.assign("meridiem",$s.Meridiem.AM)}if(t[0].endsWith("afternoon")){n.assign("meridiem",$s.Meridiem.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}t[0].endsWith("morning")&&(n.assign("meridiem",$s.Meridiem.AM),n.get("hour")<12&&n.assign("hour",n.get("hour")))}return n}};Ho.default=Go});var ht=p(cn=>{"use strict";Object.defineProperty(cn,"__esModule",{value:!0});cn.addImpliedTimeUnits=cn.reverseTimeUnits=void 0;function wb(r){let e={};for(let t in r)e[t]=-r[t];return e}cn.reverseTimeUnits=wb;function Rb(r,e){let t=r.clone(),n=r.dayjs();for(let i in e)n=n.add(e[i],i);return("day"in e||"d"in e||"week"in e||"month"in e||"year"in e)&&(t.imply("day",n.date()),t.imply("month",n.month()+1),t.imply("year",n.year())),("second"in e||"minute"in e||"hour"in e)&&(t.imply("second",n.second()),t.imply("minute",n.minute()),t.imply("hour",n.hour())),t}cn.addImpliedTimeUnits=Rb});var rh=p(Vo=>{"use strict";Object.defineProperty(Vo,"__esModule",{value:!0});var Ko=Ue(),Db=pe(),Mb=R(),Ob=ht(),Pb=new RegExp(`(${Ko.TIME_UNITS_PATTERN})\\s{0,5}(?:ago|before|earlier)(?=(?:\\W|$))`,"i"),Ab=new RegExp(`(${Ko.TIME_UNITS_PATTERN})\\s{0,5}ago(?=(?:\\W|$))`,"i"),zo=class extends Mb.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?Ab:Pb}innerExtract(e,t){let n=Ko.parseTimeUnits(t[1]),i=Ob.reverseTimeUnits(n);return Db.ParsingComponents.createRelativeFromReference(e.reference,i)}};Vo.default=zo});var nh=p(Qo=>{"use strict";Object.defineProperty(Qo,"__esModule",{value:!0});var Xo=Ue(),kb=pe(),Nb=R(),Sb=new RegExp(`(${Xo.TIME_UNITS_PATTERN})\\s{0,5}(?:later|after|from now|henceforth|forward|out)(?=(?:\\W|$))`,"i"),Cb=new RegExp("("+Xo.TIME_UNITS_PATTERN+")(later|from now)(?=(?:\\W|$))","i"),Ib=1,Zo=class extends Nb.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?Cb:Sb}innerExtract(e,t){let n=Xo.parseTimeUnits(t[Ib]);return kb.ParsingComponents.createRelativeFromReference(e.reference,n)}};Qo.default=Zo});var fn=p(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0});dn.MergingRefiner=dn.Filter=void 0;var Jo=class{refine(e,t){return t.filter(n=>this.isValid(e,n))}};dn.Filter=Jo;var eu=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0],s=null;for(let a=1;a<t.length;a++){s=t[a];let o=e.text.substring(i.index+i.text.length,s.index);if(!this.shouldMergeResults(o,i,s,e))n.push(i),i=s;else{let u=i,l=s,c=this.mergeResults(o,u,l,e);e.debug(()=>{console.log(`${this.constructor.name} merged ${u} and ${l} into ${c}`)}),i=c}}return i!=null&&n.push(i),n}};dn.MergingRefiner=eu});var $t=p(ru=>{"use strict";Object.defineProperty(ru,"__esModule",{value:!0});var xb=fn(),tu=class extends xb.MergingRefiner{shouldMergeResults(e,t,n){return!t.end&&!n.end&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){if(!t.start.isOnlyWeekdayComponent()&&!n.start.isOnlyWeekdayComponent()&&(n.start.getCertainComponents().forEach(s=>{t.start.isCertain(s)||t.start.assign(s,n.start.get(s))}),t.start.getCertainComponents().forEach(s=>{n.start.isCertain(s)||n.start.assign(s,t.start.get(s))})),t.start.date().getTime()>n.start.date().getTime()){let s=t.start.dayjs(),a=n.start.dayjs();t.start.isOnlyWeekdayComponent()&&s.add(-7,"days").isBefore(a)?(s=s.add(-7,"days"),t.start.imply("day",s.date()),t.start.imply("month",s.month()+1),t.start.imply("year",s.year())):n.start.isOnlyWeekdayComponent()&&a.add(7,"days").isAfter(s)?(a=a.add(7,"days"),n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())):[n,t]=[t,n]}let i=t.clone();return i.start=t.start,i.end=n.start,i.index=Math.min(t.index,n.index),t.index<n.index?i.text=t.text+e+n.text:i.text=n.text+e+t.text,i}};ru.default=tu});var ih=p(ni=>{"use strict";var Fb=ni&&ni.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ni,"__esModule",{value:!0});var Ub=Fb($t()),nu=class extends Ub.default{patternBetween(){return/^\s*(to|-)\s*$/i}};ni.default=nu});var sh=p(pn=>{"use strict";Object.defineProperty(pn,"__esModule",{value:!0});pn.mergeDateTimeComponent=pn.mergeDateTimeResult=void 0;var qb=we();function Wb(r,e){let t=r.clone(),n=r.start,i=e.start;if(t.start=iu(n,i),r.end!=null||e.end!=null){let s=r.end==null?r.start:r.end,a=e.end==null?e.start:e.end,o=iu(s,a);r.end==null&&o.date().getTime()<t.start.date().getTime()&&(o.isCertain("day")?o.assign("day",o.get("day")+1):o.imply("day",o.get("day")+1)),t.end=o}return t}pn.mergeDateTimeResult=Wb;function iu(r,e){let t=r.clone();return e.isCertain("hour")?(t.assign("hour",e.get("hour")),t.assign("minute",e.get("minute")),e.isCertain("second")?(t.assign("second",e.get("second")),e.isCertain("millisecond")?t.assign("millisecond",e.get("millisecond")):t.imply("millisecond",e.get("millisecond"))):(t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond")))):(t.imply("hour",e.get("hour")),t.imply("minute",e.get("minute")),t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond"))),e.isCertain("timezoneOffset")&&t.assign("timezoneOffset",e.get("timezoneOffset")),e.isCertain("meridiem")?t.assign("meridiem",e.get("meridiem")):e.get("meridiem")!=null&&t.get("meridiem")==null&&t.imply("meridiem",e.get("meridiem")),t.get("meridiem")==qb.Meridiem.PM&&t.get("hour")<12&&(e.isCertain("hour")?t.assign("hour",t.get("hour")+12):t.imply("hour",t.get("hour")+12)),t}pn.mergeDateTimeComponent=iu});var Jt=p(au=>{"use strict";Object.defineProperty(au,"__esModule",{value:!0});var Lb=fn(),ah=sh(),su=class extends Lb.MergingRefiner{shouldMergeResults(e,t,n){return(t.start.isOnlyDate()&&n.start.isOnlyTime()||n.start.isOnlyDate()&&t.start.isOnlyTime())&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){let i=t.start.isOnlyDate()?ah.mergeDateTimeResult(t,n):ah.mergeDateTimeResult(n,t);return i.index=t.index,i.text=t.text+e+n.text,i}};au.default=su});var oh=p(ii=>{"use strict";var Yb=ii&&ii.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ii,"__esModule",{value:!0});var $b=Yb(Jt()),ou=class extends $b.default{patternBetween(){return new RegExp("^\\s*(T|at|after|before|on|of|,|-)?\\s*$")}};ii.default=ou});var uh=p(lu=>{"use strict";Object.defineProperty(lu,"__esModule",{value:!0});var jb=new RegExp("^\\s*,?\\s*\\(?([A-Z]{2,4})\\)?(?=\\W|$)","i"),Bb={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:240,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360},uu=class{constructor(e){this.timezone=Object.assign(Object.assign({},Bb),e)}refine(e,t){var n;let i=(n=e.option.timezones)!==null&&n!==void 0?n:{};return t.forEach(s=>{var a,o;let u=e.text.substring(s.index+s.text.length),l=jb.exec(u);if(!l)return;let c=l[1].toUpperCase(),d=(o=(a=i[c])!==null&&a!==void 0?a:this.timezone[c])!==null&&o!==void 0?o:null;if(d===null)return;e.debug(()=>{console.log(`Extracting timezone: '${c}' into: ${d} for: ${s.start}`)});let f=s.start.get("timezoneOffset");f!==null&&d!=f&&(s.start.isCertain("timezoneOffset")||c!=l[1])||s.start.isOnlyDate()&&c!=l[1]||(s.text+=l[0],s.start.isCertain("timezoneOffset")||s.start.assign("timezoneOffset",d),s.end!=null&&!s.end.isCertain("timezoneOffset")&&s.end.assign("timezoneOffset",d))}),t}};lu.default=uu});var js=p(du=>{"use strict";Object.defineProperty(du,"__esModule",{value:!0});var Gb=new RegExp("^\\s*(?:\\(?(?:GMT|UTC)\\s?)?([+-])(\\d{1,2})(?::?(\\d{2}))?\\)?","i"),Hb=1,zb=2,Kb=3,cu=class{refine(e,t){return t.forEach(function(n){if(n.start.isCertain("timezoneOffset"))return;let i=e.text.substring(n.index+n.text.length),s=Gb.exec(i);if(!s)return;e.debug(()=>{console.log(`Extracting timezone: '${s[0]}' into : ${n}`)});let a=parseInt(s[zb]),o=parseInt(s[Kb]||"0"),u=a*60+o;u>14*60||(s[Hb]==="-"&&(u=-u),n.end!=null&&n.end.assign("timezoneOffset",u),n.start.assign("timezoneOffset",u),n.text+=s[0])}),t}};du.default=cu});var lh=p(pu=>{"use strict";Object.defineProperty(pu,"__esModule",{value:!0});var fu=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0];for(let s=1;s<t.length;s++){let a=t[s];a.index<i.index+i.text.length?a.text.length>i.text.length&&(i=a):(n.push(i),i=a)}return i!=null&&n.push(i),n}};pu.default=fu});var ch=p(si=>{"use strict";var Vb=si&&si.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(si,"__esModule",{value:!0});var Zb=Vb(X()),hu=class{refine(e,t){return e.option.forwardDate&&t.forEach(function(n){let i=Zb.default(e.refDate);if(n.start.isOnlyDayMonthComponent()&&i.isAfter(n.start.dayjs()))for(let s=0;s<3&&i.isAfter(n.start.dayjs());s++)n.start.imply("year",n.start.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.start})`)}),n.end&&!n.end.isCertain("year")&&(n.end.imply("year",n.end.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.end})`)}));n.start.isOnlyWeekdayComponent()&&i.isAfter(n.start.dayjs())&&(i.day()>=n.start.get("weekday")?i=i.day(n.start.get("weekday")+7):i=i.day(n.start.get("weekday")),n.start.imply("day",i.date()),n.start.imply("month",i.month()+1),n.start.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.start})`)}),n.end&&n.end.isOnlyWeekdayComponent()&&(i.day()>n.end.get("weekday")?i=i.day(n.end.get("weekday")+7):i=i.day(n.end.get("weekday")),n.end.imply("day",i.date()),n.end.imply("month",i.month()+1),n.end.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.end})`)})))}),t}};si.default=hu});var dh=p(yu=>{"use strict";Object.defineProperty(yu,"__esModule",{value:!0});var Xb=fn(),mu=class extends Xb.Filter{constructor(e){super(),this.strictMode=e}isValid(e,t){return t.text.replace(" ","").match(/^\d*(\.\d*)?$/)?(e.debug(()=>{console.log(`Removing unlikely result '${t.text}'`)}),!1):t.start.isValidDate()?t.end&&!t.end.isValidDate()?(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.end})`)}),!1):this.strictMode?this.isStrictModeValid(e,t):!0:(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.start})`)}),!1)}isStrictModeValid(e,t){return t.start.isOnlyWeekdayComponent()?(e.debug(()=>{console.log(`(Strict) Removing weekday only component: ${t} (${t.end})`)}),!1):t.start.isOnlyTime()&&(!t.start.isCertain("hour")||!t.start.isCertain("minute"))?(e.debug(()=>{console.log(`(Strict) Removing uncertain time component: ${t} (${t.end})`)}),!1):!0}};yu.default=mu});var Tu=p(_u=>{"use strict";Object.defineProperty(_u,"__esModule",{value:!0});var Qb=R(),Jb=new RegExp("([0-9]{4})\\-([0-9]{1,2})\\-([0-9]{1,2})(?:T([0-9]{1,2}):([0-9]{1,2})(?::([0-9]{1,2})(?:\\.(\\d{1,4}))?)?(?:Z|([+-]\\d{2}):?(\\d{2})?)?)?(?=\\W|$)","i"),ev=1,tv=2,rv=3,fh=4,nv=5,ph=6,hh=7,mh=8,yh=9,gu=class extends Qb.AbstractParserWithWordBoundaryChecking{innerPattern(){return Jb}innerExtract(e,t){let n={};if(n.year=parseInt(t[ev]),n.month=parseInt(t[tv]),n.day=parseInt(t[rv]),t[fh]!=null)if(n.hour=parseInt(t[fh]),n.minute=parseInt(t[nv]),t[ph]!=null&&(n.second=parseInt(t[ph])),t[hh]!=null&&(n.millisecond=parseInt(t[hh])),t[mh]==null)n.timezoneOffset=0;else{let i=parseInt(t[mh]),s=0;t[yh]!=null&&(s=parseInt(t[yh]));let a=i*60;a<0?a-=s:a+=s,n.timezoneOffset=a}return n}};_u.default=gu});var gh=p(vu=>{"use strict";Object.defineProperty(vu,"__esModule",{value:!0});var iv=fn(),bu=class extends iv.MergingRefiner{mergeResults(e,t,n){let i=n.clone();return i.index=t.index,i.text=t.text+e+i.text,i.start.assign("weekday",t.start.get("weekday")),i.end&&i.end.assign("weekday",t.start.get("weekday")),i}shouldMergeResults(e,t,n){return t.start.isOnlyWeekdayComponent()&&!t.start.isCertain("hour")&&n.start.isCertain("day")&&e.match(/^,?\s*$/)!=null}};vu.default=bu});var er=p(hn=>{"use strict";var Lr=hn&&hn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(hn,"__esModule",{value:!0});hn.includeCommonConfiguration=void 0;var sv=Lr(uh()),av=Lr(js()),_h=Lr(lh()),ov=Lr(ch()),uv=Lr(dh()),lv=Lr(Tu()),cv=Lr(gh());function dv(r,e=!1){return r.parsers.unshift(new lv.default),r.refiners.unshift(new cv.default),r.refiners.unshift(new sv.default),r.refiners.unshift(new av.default),r.refiners.unshift(new _h.default),r.refiners.push(new _h.default),r.refiners.push(new ov.default),r.refiners.push(new uv.default(e)),r}hn.includeCommonConfiguration=dv});var rr=p(re=>{"use strict";var fv=re&&re.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(re,"__esModule",{value:!0});re.noon=re.morning=re.midnight=re.yesterdayEvening=re.evening=re.lastNight=re.tonight=re.theDayAfter=re.tomorrow=re.theDayBefore=re.yesterday=re.today=re.now=void 0;var jt=pe(),mn=fv(X()),tr=pt(),ai=we();function pv(r){let e=mn.default(r.instant),t=new jt.ParsingComponents(r,{});return tr.assignSimilarDate(t,e),tr.assignSimilarTime(t,e),r.timezoneOffset!==null&&t.assign("timezoneOffset",e.utcOffset()),t}re.now=pv;function hv(r){let e=mn.default(r.instant),t=new jt.ParsingComponents(r,{});return tr.assignSimilarDate(t,e),tr.implySimilarTime(t,e),t}re.today=hv;function mv(r){return Th(r,1)}re.yesterday=mv;function Th(r,e){return Eu(r,-e)}re.theDayBefore=Th;function yv(r){return Eu(r,1)}re.tomorrow=yv;function Eu(r,e){let t=mn.default(r.instant),n=new jt.ParsingComponents(r,{});return t=t.add(e,"day"),tr.assignSimilarDate(n,t),tr.implySimilarTime(n,t),n}re.theDayAfter=Eu;function gv(r,e=22){let t=mn.default(r.instant),n=new jt.ParsingComponents(r,{});return n.imply("hour",e),n.imply("meridiem",ai.Meridiem.PM),tr.assignSimilarDate(n,t),n}re.tonight=gv;function _v(r,e=0){let t=mn.default(r.instant),n=new jt.ParsingComponents(r,{});return t.hour()<6&&(t=t.add(-1,"day")),tr.assignSimilarDate(n,t),n.imply("hour",e),n}re.lastNight=_v;function Tv(r,e=20){let t=new jt.ParsingComponents(r,{});return t.imply("meridiem",ai.Meridiem.PM),t.imply("hour",e),t}re.evening=Tv;function bv(r,e=20){let t=mn.default(r.instant),n=new jt.ParsingComponents(r,{});return t=t.add(-1,"day"),tr.assignSimilarDate(n,t),n.imply("hour",e),n.imply("meridiem",ai.Meridiem.PM),n}re.yesterdayEvening=bv;function vv(r){let e=new jt.ParsingComponents(r,{});return e.imply("hour",0),e.imply("minute",0),e.imply("second",0),e}re.midnight=vv;function Ev(r,e=6){let t=new jt.ParsingComponents(r,{});return t.imply("meridiem",ai.Meridiem.AM),t.imply("hour",e),t}re.morning=Ev;function wv(r){let e=new jt.ParsingComponents(r,{});return e.imply("meridiem",ai.Meridiem.AM),e.imply("hour",12),e}re.noon=wv});var bh=p(Dt=>{"use strict";var Rv=Dt&&Dt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Dv=Dt&&Dt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Mv=Dt&&Dt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Rv(e,r,t);return Dv(e,r),e},Ov=Dt&&Dt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Dt,"__esModule",{value:!0});var Pv=Ov(X()),Av=R(),kv=pt(),oi=Mv(rr()),Nv=/(now|today|tonight|tomorrow|tmr|tmrw|yesterday|last\s*night)(?=\W|$)/i,wu=class extends Av.AbstractParserWithWordBoundaryChecking{innerPattern(e){return Nv}innerExtract(e,t){let n=Pv.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();switch(i){case"now":return oi.now(e.reference);case"today":return oi.today(e.reference);case"yesterday":return oi.yesterday(e.reference);case"tomorrow":case"tmr":case"tmrw":return oi.tomorrow(e.reference);case"tonight":return oi.tonight(e.reference);default:i.match(/last\s*night/)&&(n.hour()>6&&(n=n.add(-1,"day")),kv.assignSimilarDate(s,n),s.imply("hour",0));break}return s}};Dt.default=wu});var vh=p(ui=>{"use strict";var Sv=ui&&ui.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ui,"__esModule",{value:!0});var Bs=we(),Cv=R(),Iv=Sv(X()),xv=pt(),Fv=/(?:this)?\s{0,3}(morning|afternoon|evening|night|midnight|noon)(?=\W|$)/i,Ru=class extends Cv.AbstractParserWithWordBoundaryChecking{innerPattern(){return Fv}innerExtract(e,t){let n=Iv.default(e.refDate),i=e.createParsingComponents();switch(t[1].toLowerCase()){case"afternoon":i.imply("meridiem",Bs.Meridiem.PM),i.imply("hour",15);break;case"evening":case"night":i.imply("meridiem",Bs.Meridiem.PM),i.imply("hour",20);break;case"midnight":xv.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"morning":i.imply("meridiem",Bs.Meridiem.AM),i.imply("hour",6);break;case"noon":i.imply("meridiem",Bs.Meridiem.AM),i.imply("hour",12);break}return i}};ui.default=Ru});var Yr=p(vr=>{"use strict";var Uv=vr&&vr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vr,"__esModule",{value:!0});vr.toDayJSClosestWeekday=vr.toDayJSWeekday=void 0;var Eh=Uv(X());function qv(r,e,t){if(!t)return wh(r,e);let n=Eh.default(r);switch(t){case"this":n=n.day(e);break;case"next":n=n.day(e+7);break;case"last":n=n.day(e-7);break}return n}vr.toDayJSWeekday=qv;function wh(r,e){let t=Eh.default(r),n=t.day();return Math.abs(e-7-n)<Math.abs(e-n)?t=t.day(e-7):Math.abs(e+7-n)<Math.abs(e-n)?t=t.day(e+7):t=t.day(e),t}vr.toDayJSClosestWeekday=wh});var Dh=p(Mu=>{"use strict";Object.defineProperty(Mu,"__esModule",{value:!0});var Rh=Ue(),Wv=se(),Lv=R(),Yv=Yr(),$v=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:on\\s*?)?(?:(this|last|past|next)\\s*)?(${Wv.matchAnyPattern(Rh.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(this|last|past|next)\\s*week)?(?=\\W|$)`,"i"),jv=1,Bv=2,Gv=3,Du=class extends Lv.AbstractParserWithWordBoundaryChecking{innerPattern(){return $v}innerExtract(e,t){let n=t[Bv].toLowerCase(),i=Rh.WEEKDAY_DICTIONARY[n],s=t[jv],a=t[Gv],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="last"||o=="past"?u="last":o=="next"?u="next":o=="this"&&(u="this");let l=Yv.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Mu.default=Du});var Ph=p(li=>{"use strict";var Hv=li&&li.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(li,"__esModule",{value:!0});var Oh=Ue(),Mh=pe(),zv=Hv(X()),Kv=R(),Vv=se(),Zv=new RegExp(`(this|last|past|next|after\\s*this)\\s*(${Vv.matchAnyPattern(Oh.TIME_UNIT_DICTIONARY)})(?=\\s*)(?=\\W|$)`,"i"),Xv=1,Qv=2,Ou=class extends Kv.AbstractParserWithWordBoundaryChecking{innerPattern(){return Zv}innerExtract(e,t){let n=t[Xv].toLowerCase(),i=t[Qv].toLowerCase(),s=Oh.TIME_UNIT_DICTIONARY[i];if(n=="next"||n.startsWith("after")){let u={};return u[s]=1,Mh.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="last"||n=="past"){let u={};return u[s]=-1,Mh.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=zv.default(e.reference.instant);return i.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):i.match(/month/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):i.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};li.default=Ou});var Mt=p(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});_n.ParsingContext=_n.Chrono=void 0;var yn=pe(),Jv=Pu(),gn=class{constructor(e){e=e||Jv.createCasualConfiguration(),this.parsers=[...e.parsers],this.refiners=[...e.refiners]}clone(){return new gn({parsers:[...this.parsers],refiners:[...this.refiners]})}parseDate(e,t,n){let i=this.parse(e,t,n);return i.length>0?i[0].start.date():null}parse(e,t,n){let i=new Gs(e,t,n),s=[];return this.parsers.forEach(a=>{let o=gn.executeParser(i,a);s=s.concat(o)}),s.sort((a,o)=>a.index-o.index),this.refiners.forEach(function(a){s=a.refine(i,s)}),s}static executeParser(e,t){let n=[],i=t.pattern(e),s=e.text,a=e.text,o=i.exec(a);for(;o;){let u=o.index+s.length-a.length;o.index=u;let l=t.extract(e,o);if(!l){a=s.substring(o.index+1),o=i.exec(a);continue}let c=null;l instanceof yn.ParsingResult?c=l:l instanceof yn.ParsingComponents?(c=e.createParsingResult(o.index,o[0]),c.start=l):c=e.createParsingResult(o.index,o[0],l),e.debug(()=>console.log(`${t.constructor.name} extracted result ${c}`)),n.push(c),a=s.substring(u+c.text.length),o=i.exec(a)}return n}};_n.Chrono=gn;var Gs=class{constructor(e,t,n){this.text=e,this.reference=new yn.ReferenceWithTimezone(t),this.option=n!=null?n:{},this.refDate=this.reference.instant}createParsingComponents(e){return e instanceof yn.ParsingComponents?e:new yn.ParsingComponents(this.reference,e)}createParsingResult(e,t,n,i){let s=typeof t=="string"?t:this.text.substring(e,t),a=n?this.createParsingComponents(n):null,o=i?this.createParsingComponents(i):null;return new yn.ParsingResult(this.reference,e,s,a,o)}debug(e){this.option.debug&&(this.option.debug instanceof Function?this.option.debug(e):this.option.debug.debug(e))}};_n.ParsingContext=Gs});var $r=p(Nu=>{"use strict";Object.defineProperty(Nu,"__esModule",{value:!0});var Ah=Fe(),e1=new RegExp("([^\\d]|^)([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}|[0-9]{2}))?(\\W|$)","i"),Hs=1,kh=5,Nh=2,Sh=3,Au=4,ku=class{constructor(e){this.groupNumberMonth=e?Sh:Nh,this.groupNumberDay=e?Nh:Sh}pattern(){return e1}extract(e,t){if(t[Hs]=="/"||t[kh]=="/"){t.index+=t[0].length;return}let n=t.index+t[Hs].length,i=t[0].substr(t[Hs].length,t[0].length-t[Hs].length-t[kh].length);if(i.match(/^\d\.\d$/)||i.match(/^\d\.\d{1,2}\.\d{1,2}\s*$/)||!t[Au]&&t[0].indexOf("/")<0)return;let s=e.createParsingResult(n,i),a=parseInt(t[this.groupNumberMonth]),o=parseInt(t[this.groupNumberDay]);if((a<1||a>12)&&a>12)if(o>=1&&o<=12&&a<=31)[o,a]=[a,o];else return null;if(o<1||o>31)return null;if(s.start.assign("day",o),s.start.assign("month",a),t[Au]){let u=parseInt(t[Au]),l=Ah.findMostLikelyADYear(u);s.start.assign("year",l)}else{let u=Ah.findYearClosestToRef(e.refDate,o,a);s.start.imply("year",u)}return s}};Nu.default=ku});var Ih=p(Cu=>{"use strict";Object.defineProperty(Cu,"__esModule",{value:!0});var Ch=Ue(),t1=pe(),r1=R(),n1=ht(),i1=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${Ch.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),Su=class extends r1.AbstractParserWithWordBoundaryChecking{innerPattern(){return i1}innerExtract(e,t){let n=t[1].toLowerCase(),i=Ch.parseTimeUnits(t[2]);switch(n){case"last":case"past":case"-":i=n1.reverseTimeUnits(i);break}return t1.ParsingComponents.createRelativeFromReference(e.reference,i)}};Cu.default=Su});var Fh=p(Fu=>{"use strict";Object.defineProperty(Fu,"__esModule",{value:!0});var s1=fn(),Iu=pe(),a1=Ue(),o1=ht();function xh(r){return r.text.match(/\s+(before|from)$/i)!=null}function u1(r){return r.text.match(/\s+(after|since)$/i)!=null}var xu=class extends s1.MergingRefiner{patternBetween(){return/^\s*$/i}shouldMergeResults(e,t,n){return!e.match(this.patternBetween())||!xh(t)&&!u1(t)?!1:!!n.start.get("day")&&!!n.start.get("month")&&!!n.start.get("year")}mergeResults(e,t,n){let i=a1.parseTimeUnits(t.text);xh(t)&&(i=o1.reverseTimeUnits(i));let s=Iu.ParsingComponents.createRelativeFromReference(new Iu.ReferenceWithTimezone(n.start.date()),i);return new Iu.ParsingResult(n.reference,t.index,`${t.text}${e}${n.text}`,s)}};Fu.default=xu});var Pu=p(_e=>{"use strict";var Me=_e&&_e.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_e,"__esModule",{value:!0});_e.createConfiguration=_e.createCasualConfiguration=_e.parseDate=_e.parse=_e.GB=_e.strict=_e.casual=void 0;var l1=Me(xp()),c1=Me(Yp()),d1=Me(Hp()),f1=Me(Vp()),p1=Me(Qp()),h1=Me(Jp()),m1=Me(th()),y1=Me(rh()),g1=Me(nh()),_1=Me(ih()),T1=Me(oh()),b1=er(),v1=Me(bh()),E1=Me(vh()),w1=Me(Dh()),R1=Me(Ph()),Uu=Mt(),D1=Me($r()),M1=Me(Ih()),O1=Me(Fh());_e.casual=new Uu.Chrono(Uh(!1));_e.strict=new Uu.Chrono(zs(!0,!1));_e.GB=new Uu.Chrono(zs(!1,!0));function P1(r,e,t){return _e.casual.parse(r,e,t)}_e.parse=P1;function A1(r,e,t){return _e.casual.parseDate(r,e,t)}_e.parseDate=A1;function Uh(r=!1){let e=zs(!1,r);return e.parsers.unshift(new v1.default),e.parsers.unshift(new E1.default),e.parsers.unshift(new f1.default),e.parsers.unshift(new R1.default),e.parsers.unshift(new M1.default),e}_e.createCasualConfiguration=Uh;function zs(r=!0,e=!1){return b1.includeCommonConfiguration({parsers:[new D1.default(e),new l1.default,new c1.default,new d1.default,new w1.default,new p1.default,new h1.default,new m1.default(r),new y1.default(r),new g1.default(r)],refiners:[new O1.default,new T1.default,new _1.default]},r)}_e.createConfiguration=zs});var qh=p(Wu=>{"use strict";Object.defineProperty(Wu,"__esModule",{value:!0});var k1=Wr(),qu=class extends k1.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:um|von)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|bis)\\s*"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};Wu.default=qu});var ci=p(ae=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0});ae.parseTimeUnits=ae.TIME_UNITS_PATTERN=ae.parseYear=ae.YEAR_PATTERN=ae.parseNumberPattern=ae.NUMBER_PATTERN=ae.TIME_UNIT_DICTIONARY=ae.INTEGER_WORD_DICTIONARY=ae.MONTH_DICTIONARY=ae.WEEKDAY_DICTIONARY=void 0;var Lu=se(),N1=Fe();ae.WEEKDAY_DICTIONARY={sonntag:0,so:0,montag:1,mo:1,dienstag:2,di:2,mittwoch:3,mi:3,donnerstag:4,do:4,freitag:5,fr:5,samstag:6,sa:6};ae.MONTH_DICTIONARY={januar:1,j\u00E4nner:1,janner:1,jan:1,"jan.":1,februar:2,feber:2,feb:2,"feb.":2,m\u00E4rz:3,maerz:3,m\u00E4r:3,"m\xE4r.":3,mrz:3,"mrz.":3,april:4,apr:4,"apr.":4,mai:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,august:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,dezember:12,dez:12,"dez.":12};ae.INTEGER_WORD_DICTIONARY={eins:1,eine:1,einem:1,einen:1,einer:1,zwei:2,drei:3,vier:4,f\u00FCnf:5,fuenf:5,sechs:6,sieben:7,acht:8,neun:9,zehn:10,elf:11,zw\u00F6lf:12,zwoelf:12};ae.TIME_UNIT_DICTIONARY={sek:"second",sekunde:"second",sekunden:"second",min:"minute",minute:"minute",minuten:"minute",h:"hour",std:"hour",stunde:"hour",stunden:"hour",tag:"d",tage:"d",tagen:"d",woche:"week",wochen:"week",monat:"month",monate:"month",monaten:"month",monats:"month",quartal:"quarter",quartals:"quarter",quartale:"quarter",quartalen:"quarter",a:"year",j:"year",jr:"year",jahr:"year",jahre:"year",jahren:"year",jahres:"year"};ae.NUMBER_PATTERN=`(?:${Lu.matchAnyPattern(ae.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s*an?)?|an?\\b(?:\\s*few)?|few|several|a?\\s*couple\\s*(?:of)?)`;function Lh(r){let e=r.toLowerCase();return ae.INTEGER_WORD_DICTIONARY[e]!==void 0?ae.INTEGER_WORD_DICTIONARY[e]:e==="a"||e==="an"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}ae.parseNumberPattern=Lh;ae.YEAR_PATTERN="(?:[0-9]{1,4}(?:\\s*[vn]\\.?\\s*(?:C(?:hr)?|(?:u\\.?|d\\.?(?:\\s*g\\.?)?)?\\s*Z)\\.?|\\s*(?:u\\.?|d\\.?(?:\\s*g\\.)?)\\s*Z\\.?)?)";function S1(r){if(/v/i.test(r))return-parseInt(r.replace(/[^0-9]+/gi,""));if(/n/i.test(r))return parseInt(r.replace(/[^0-9]+/gi,""));if(/z/i.test(r))return parseInt(r.replace(/[^0-9]+/gi,""));let e=parseInt(r);return N1.findMostLikelyADYear(e)}ae.parseYear=S1;var Yh=`(${ae.NUMBER_PATTERN})\\s{0,5}(${Lu.matchAnyPattern(ae.TIME_UNIT_DICTIONARY)})\\s{0,5}`,Wh=new RegExp(Yh,"i");ae.TIME_UNITS_PATTERN=Lu.repeatedTimeunitPattern("",Yh);function C1(r){let e={},t=r,n=Wh.exec(t);for(;n;)I1(e,n),t=t.substring(n[0].length),n=Wh.exec(t);return e}ae.parseTimeUnits=C1;function I1(r,e){let t=Lh(e[1]),n=ae.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var jh=p($u=>{"use strict";Object.defineProperty($u,"__esModule",{value:!0});var $h=ci(),x1=se(),F1=R(),U1=Yr(),q1=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:a[mn]\\s*?)?(?:(diese[mn]|letzte[mn]|n(?:\xE4|ae)chste[mn])\\s*)?(${x1.matchAnyPattern($h.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(diese|letzte|n(?:\xE4|ae)chste)\\s*woche)?(?=\\W|$)`,"i"),W1=1,L1=3,Y1=2,Yu=class extends F1.AbstractParserWithWordBoundaryChecking{innerPattern(){return q1}innerExtract(e,t){let n=t[Y1].toLowerCase(),i=$h.WEEKDAY_DICTIONARY[n],s=t[W1],a=t[L1],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o.match(/letzte/)?u="last":o.match(/chste/)?u="next":o.match(/diese/)&&(u="this");let l=U1.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};$u.default=Yu});var zh=p(ju=>{"use strict";Object.defineProperty(ju,"__esModule",{value:!0});var Er=we(),$1=new RegExp("(^|\\s|T)(?:(?:um|von)\\s*)?(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s)?)?(?:\\s*Uhr)?(?:\\s*(morgens|vormittags|nachmittags|abends|nachts|am\\s+(?:Morgen|Vormittag|Nachmittag|Abend)|in\\s+der\\s+Nacht))?(?=\\W|$)","i"),j1=new RegExp("^\\s*(\\-|\\\u2013|\\~|\\\u301C|bis(?:\\s+um)?|\\?)\\s*(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s)?)?(?:\\s*Uhr)?(?:\\s*(morgens|vormittags|nachmittags|abends|nachts|am\\s+(?:Morgen|Vormittag|Nachmittag|Abend)|in\\s+der\\s+Nacht))?(?=\\W|$)","i"),B1=2,Bh=3,Gh=4,Hh=5,Tn=class{pattern(e){return $1}extract(e,t){let n=e.createParsingResult(t.index+t[1].length,t[0].substring(t[1].length));if(n.text.match(/^\d{4}$/)||(n.start=Tn.extractTimeComponent(n.start.clone(),t),!n.start))return t.index+=t[0].length,null;let i=e.text.substring(t.index+t[0].length),s=j1.exec(i);return s&&(n.end=Tn.extractTimeComponent(n.start.clone(),s),n.end&&(n.text+=s[0])),n}static extractTimeComponent(e,t){let n=0,i=0,s=null;if(n=parseInt(t[B1]),t[Bh]!=null&&(i=parseInt(t[Bh])),i>=60||n>24)return null;if(n>=12&&(s=Er.Meridiem.PM),t[Hh]!=null){if(n>12)return null;let a=t[Hh].toLowerCase();a.match(/morgen|vormittag/)&&(s=Er.Meridiem.AM,n==12&&(n=0)),a.match(/nachmittag|abend/)&&(s=Er.Meridiem.PM,n!=12&&(n+=12)),a.match(/nacht/)&&(n==12?(s=Er.Meridiem.AM,n=0):n<6?s=Er.Meridiem.AM:(s=Er.Meridiem.PM,n+=12))}if(e.assign("hour",n),e.assign("minute",i),s!==null?e.assign("meridiem",s):n<12?e.imply("meridiem",Er.Meridiem.AM):e.imply("meridiem",Er.Meridiem.PM),t[Gh]!=null){let a=parseInt(t[Gh]);if(a>=60)return null;e.assign("second",a)}return e}};ju.default=Tn});var Kh=p(di=>{"use strict";var G1=di&&di.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(di,"__esModule",{value:!0});var H1=G1($t()),Bu=class extends H1.default{patternBetween(){return/^\s*(bis(?:\s*(?:am|zum))?|-)\s*$/i}};di.default=Bu});var Vh=p(fi=>{"use strict";var z1=fi&&fi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(fi,"__esModule",{value:!0});var K1=z1(Jt()),Gu=class extends K1.default{patternBetween(){return new RegExp("^\\s*(T|um|am|,|-)?\\s*$")}};fi.default=Gu});var Hu=p(hi=>{"use strict";var V1=hi&&hi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(hi,"__esModule",{value:!0});var Z1=V1(X()),jr=we(),X1=R(),Q1=pt(),J1=ht(),pi=class extends X1.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(diesen)?\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht)(?=\W|$)/i}innerExtract(e,t){let n=Z1.default(e.refDate),i=t[2].toLowerCase(),s=e.createParsingComponents();return Q1.implySimilarTime(s,n),pi.extractTimeComponents(s,i)}static extractTimeComponents(e,t){switch(t){case"morgen":e.imply("hour",6),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",jr.Meridiem.AM);break;case"vormittag":e.imply("hour",9),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",jr.Meridiem.AM);break;case"mittag":case"mittags":e.imply("hour",12),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",jr.Meridiem.AM);break;case"nachmittag":e.imply("hour",15),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",jr.Meridiem.PM);break;case"abend":e.imply("hour",18),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",jr.Meridiem.PM);break;case"nacht":e.imply("hour",22),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",jr.Meridiem.PM);break;case"mitternacht":e.get("hour")>1&&(e=J1.addImpliedTimeUnits(e,{day:1})),e.imply("hour",0),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",jr.Meridiem.AM);break}return e}};hi.default=pi});var Qh=p(Ot=>{"use strict";var eE=Ot&&Ot.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),tE=Ot&&Ot.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),rE=Ot&&Ot.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&eE(e,r,t);return tE(e,r),e},Xh=Ot&&Ot.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ot,"__esModule",{value:!0});var nE=Xh(X()),iE=R(),Br=pt(),sE=Xh(Hu()),Zh=rE(rr()),aE=new RegExp("(jetzt|heute|morgen|\xFCbermorgen|uebermorgen|gestern|vorgestern|letzte\\s*nacht)(?:\\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht))?(?=\\W|$)","i"),oE=1,uE=2,zu=class extends iE.AbstractParserWithWordBoundaryChecking{innerPattern(e){return aE}innerExtract(e,t){let n=nE.default(e.refDate),i=(t[oE]||"").toLowerCase(),s=(t[uE]||"").toLowerCase(),a=e.createParsingComponents();switch(i){case"jetzt":a=Zh.now(e.reference);break;case"heute":a=Zh.today(e.reference);break;case"morgen":Br.assignTheNextDay(a,n);break;case"\xFCbermorgen":case"uebermorgen":n=n.add(1,"day"),Br.assignTheNextDay(a,n);break;case"gestern":n=n.add(-1,"day"),Br.assignSimilarDate(a,n),Br.implySimilarTime(a,n);break;case"vorgestern":n=n.add(-2,"day"),Br.assignSimilarDate(a,n),Br.implySimilarTime(a,n);break;default:i.match(/letzte\s*nacht/)&&(n.hour()>6&&(n=n.add(-1,"day")),Br.assignSimilarDate(a,n),a.imply("hour",0));break}return s&&(a=sE.default.extractTimeComponents(a,s)),a}};Ot.default=zu});var im=p(Vu=>{"use strict";Object.defineProperty(Vu,"__esModule",{value:!0});var lE=Fe(),rm=ci(),nm=ci(),cE=se(),dE=R(),fE=new RegExp(`(?:am\\s*?)?(?:den\\s*?)?([0-9]{1,2})\\.(?:\\s*(?:bis(?:\\s*(?:am|zum))?|\\-|\\\u2013|\\s)\\s*([0-9]{1,2})\\.?)?\\s*(${cE.matchAnyPattern(rm.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s*)(${nm.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),Jh=1,em=2,pE=3,tm=4,Ku=class extends dE.AbstractParserWithWordBoundaryChecking{innerPattern(){return fE}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=rm.MONTH_DICTIONARY[t[pE].toLowerCase()],s=parseInt(t[Jh]);if(s>31)return t.index=t.index+t[Jh].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[tm]){let a=nm.parseYear(t[tm]);n.start.assign("year",a)}else{let a=lE.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[em]){let a=parseInt(t[em]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Vu.default=Ku});var sm=p(Xu=>{"use strict";Object.defineProperty(Xu,"__esModule",{value:!0});var Ks=ci(),hE=pe(),mE=R(),yE=ht(),gE=se(),Zu=class extends mE.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`(?:\\s*((?:n\xE4chste|kommende|folgende|letzte|vergangene|vorige|vor(?:her|an)gegangene)(?:s|n|m|r)?|vor|in)\\s*)?(${Ks.NUMBER_PATTERN})?(?:\\s*(n\xE4chste|kommende|folgende|letzte|vergangene|vorige|vor(?:her|an)gegangene)(?:s|n|m|r)?)?\\s*(${gE.matchAnyPattern(Ks.TIME_UNIT_DICTIONARY)})`,"i")}innerExtract(e,t){let n=t[2]?Ks.parseNumberPattern(t[2]):1,i=Ks.TIME_UNIT_DICTIONARY[t[4].toLowerCase()],s={};s[i]=n;let a=t[1]||t[3]||"";if(a=a.toLowerCase(),!!a)return(/vor/.test(a)||/letzte/.test(a)||/vergangen/.test(a))&&(s=yE.reverseTimeUnits(s)),hE.ParsingComponents.createRelativeFromReference(e.reference,s)}};Xu.default=Zu});var um=p(Oe=>{"use strict";var Pt=Oe&&Oe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.createConfiguration=Oe.createCasualConfiguration=Oe.parseDate=Oe.parse=Oe.strict=Oe.casual=void 0;var _E=er(),am=Mt(),TE=Pt($r()),bE=Pt(Tu()),vE=Pt(qh()),EE=Pt(jh()),wE=Pt(zh()),RE=Pt(Kh()),DE=Pt(Vh()),ME=Pt(Qh()),OE=Pt(Hu()),PE=Pt(im()),AE=Pt(sm());Oe.casual=new am.Chrono(om());Oe.strict=new am.Chrono(Qu(!0));function kE(r,e,t){return Oe.casual.parse(r,e,t)}Oe.parse=kE;function NE(r,e,t){return Oe.casual.parseDate(r,e,t)}Oe.parseDate=NE;function om(r=!0){let e=Qu(!1,r);return e.parsers.unshift(new OE.default),e.parsers.unshift(new ME.default),e.parsers.unshift(new AE.default),e}Oe.createCasualConfiguration=om;function Qu(r=!0,e=!0){return _E.includeCommonConfiguration({parsers:[new bE.default,new TE.default(e),new vE.default,new wE.default,new PE.default,new EE.default],refiners:[new RE.default,new DE.default]},r)}Oe.createConfiguration=Qu});var cm=p(At=>{"use strict";var SE=At&&At.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),CE=At&&At.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),IE=At&&At.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&SE(e,r,t);return CE(e,r),e},xE=At&&At.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(At,"__esModule",{value:!0});var FE=xE(X()),UE=we(),qE=R(),lm=pt(),Vs=IE(rr()),Ju=class extends qE.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(maintenant|aujourd'hui|demain|hier|cette\s*nuit|la\s*veille)(?=\W|$)/i}innerExtract(e,t){let n=FE.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();switch(i){case"maintenant":return Vs.now(e.reference);case"aujourd'hui":return Vs.today(e.reference);case"hier":return Vs.yesterday(e.reference);case"demain":return Vs.tomorrow(e.reference);default:i.match(/cette\s*nuit/)?(lm.assignSimilarDate(s,n),s.imply("hour",22),s.imply("meridiem",UE.Meridiem.PM)):i.match(/la\s*veille/)&&(n=n.add(-1,"day"),lm.assignSimilarDate(s,n),s.imply("hour",0))}return s}};At.default=Ju});var dm=p(tl=>{"use strict";Object.defineProperty(tl,"__esModule",{value:!0});var mi=we(),WE=R(),el=class extends WE.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(cet?)?\s*(matin|soir|après-midi|aprem|a midi|à minuit)(?=\W|$)/i}innerExtract(e,t){let n=t[2].toLowerCase(),i=e.createParsingComponents();switch(n){case"apr\xE8s-midi":case"aprem":i.imply("hour",14),i.imply("minute",0),i.imply("meridiem",mi.Meridiem.PM);break;case"soir":i.imply("hour",18),i.imply("minute",0),i.imply("meridiem",mi.Meridiem.PM);break;case"matin":i.imply("hour",8),i.imply("minute",0),i.imply("meridiem",mi.Meridiem.AM);break;case"a midi":i.imply("hour",12),i.imply("minute",0),i.imply("meridiem",mi.Meridiem.AM);break;case"\xE0 minuit":i.imply("hour",0),i.imply("meridiem",mi.Meridiem.AM);break}return i}};tl.default=el});var fm=p(nl=>{"use strict";Object.defineProperty(nl,"__esModule",{value:!0});var LE=Wr(),rl=class extends LE.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:[\xE0a])\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|[\xE0a]|\\?)\\s*"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};nl.default=rl});var pm=p(yi=>{"use strict";var YE=yi&&yi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(yi,"__esModule",{value:!0});var $E=YE(Jt()),il=class extends $E.default{patternBetween(){return new RegExp("^\\s*(T|\xE0|a|vers|de|,|-)?\\s*$")}};yi.default=il});var hm=p(gi=>{"use strict";var jE=gi&&gi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(gi,"__esModule",{value:!0});var BE=jE($t()),sl=class extends BE.default{patternBetween(){return/^\s*(à|a|-)\s*$/i}};gi.default=sl});var wr=p(Q=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0});Q.parseTimeUnits=Q.TIME_UNITS_PATTERN=Q.parseYear=Q.YEAR_PATTERN=Q.parseOrdinalNumberPattern=Q.ORDINAL_NUMBER_PATTERN=Q.parseNumberPattern=Q.NUMBER_PATTERN=Q.TIME_UNIT_DICTIONARY=Q.INTEGER_WORD_DICTIONARY=Q.MONTH_DICTIONARY=Q.WEEKDAY_DICTIONARY=void 0;var al=se();Q.WEEKDAY_DICTIONARY={dimanche:0,dim:0,lundi:1,lun:1,mardi:2,mar:2,mercredi:3,mer:3,jeudi:4,jeu:4,vendredi:5,ven:5,samedi:6,sam:6};Q.MONTH_DICTIONARY={janvier:1,jan:1,"jan.":1,f\u00E9vrier:2,f\u00E9v:2,"f\xE9v.":2,fevrier:2,fev:2,"fev.":2,mars:3,mar:3,"mar.":3,avril:4,avr:4,"avr.":4,mai:5,juin:6,jun:6,juillet:7,juil:7,jul:7,"jul.":7,ao\u00FBt:8,aout:8,septembre:9,sep:9,"sep.":9,sept:9,"sept.":9,octobre:10,oct:10,"oct.":10,novembre:11,nov:11,"nov.":11,d\u00E9cembre:12,decembre:12,dec:12,"dec.":12};Q.INTEGER_WORD_DICTIONARY={un:1,deux:2,trois:3,quatre:4,cinq:5,six:6,sept:7,huit:8,neuf:9,dix:10,onze:11,douze:12,treize:13};Q.TIME_UNIT_DICTIONARY={sec:"second",seconde:"second",secondes:"second",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",heure:"hour",heures:"hour",jour:"d",jours:"d",semaine:"week",semaines:"week",mois:"month",trimestre:"quarter",trimestres:"quarter",ans:"year",ann\u00E9e:"year",ann\u00E9es:"year"};Q.NUMBER_PATTERN=`(?:${al.matchAnyPattern(Q.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|une?\\b|quelques?|demi-?)`;function ym(r){let e=r.toLowerCase();return Q.INTEGER_WORD_DICTIONARY[e]!==void 0?Q.INTEGER_WORD_DICTIONARY[e]:e==="une"||e==="un"?1:e.match(/quelques?/)?3:e.match(/demi-?/)?.5:parseFloat(e)}Q.parseNumberPattern=ym;Q.ORDINAL_NUMBER_PATTERN="(?:[0-9]{1,2}(?:er)?)";function GE(r){let e=r.toLowerCase();return e=e.replace(/(?:er)$/i,""),parseInt(e)}Q.parseOrdinalNumberPattern=GE;Q.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s*(?:AC|AD|p\\.\\s*C(?:hr?)?\\.\\s*n\\.)|[1-2][0-9]{3}|[5-9][0-9])";function HE(r){if(/AC/i.test(r))return r=r.replace(/BC/i,""),-parseInt(r);if(/AD/i.test(r)||/C/i.test(r))return r=r.replace(/[^\d]+/i,""),parseInt(r);let e=parseInt(r);return e<100&&(e>50?e=e+1900:e=e+2e3),e}Q.parseYear=HE;var gm=`(${Q.NUMBER_PATTERN})\\s{0,5}(${al.matchAnyPattern(Q.TIME_UNIT_DICTIONARY)})\\s{0,5}`,mm=new RegExp(gm,"i");Q.TIME_UNITS_PATTERN=al.repeatedTimeunitPattern("",gm);function zE(r){let e={},t=r,n=mm.exec(t);for(;n;)KE(e,n),t=t.substring(n[0].length),n=mm.exec(t);return e}Q.parseTimeUnits=zE;function KE(r,e){let t=ym(e[1]),n=Q.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Tm=p(ul=>{"use strict";Object.defineProperty(ul,"__esModule",{value:!0});var _m=wr(),VE=se(),ZE=R(),XE=Yr(),QE=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:(?:ce)\\s*)?(${VE.matchAnyPattern(_m.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(dernier|prochain)\\s*)?(?=\\W|\\d|$)`,"i"),JE=1,e0=2,ol=class extends ZE.AbstractParserWithWordBoundaryChecking{innerPattern(){return QE}innerExtract(e,t){let n=t[JE].toLowerCase(),i=_m.WEEKDAY_DICTIONARY[n];if(i===void 0)return null;let s=t[e0];s=s||"",s=s.toLowerCase();let a=null;s=="dernier"?a="last":s=="prochain"&&(a="next");let o=XE.toDayJSWeekday(e.refDate,i,a);return e.createParsingComponents().assign("weekday",i).imply("day",o.date()).imply("month",o.month()+1).imply("year",o.year())}};ul.default=ol});var wm=p(ll=>{"use strict";Object.defineProperty(ll,"__esModule",{value:!0});var _i=we(),t0=new RegExp("(^|\\s|T)(?:(?:[\xE0a])\\s*)?(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s|:)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),r0=new RegExp("^\\s*(\\-|\\\u2013|\\~|\\\u301C|[\xE0a]|\\?)\\s*(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s|:)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),n0=2,bm=3,vm=4,Em=5,bn=class{pattern(e){return t0}extract(e,t){let n=e.createParsingResult(t.index+t[1].length,t[0].substring(t[1].length));if(n.text.match(/^\d{4}$/)||(n.start=bn.extractTimeComponent(n.start.clone(),t),!n.start))return t.index+=t[0].length,null;let i=e.text.substring(t.index+t[0].length),s=r0.exec(i);return s&&(n.end=bn.extractTimeComponent(n.start.clone(),s),n.end&&(n.text+=s[0])),n}static extractTimeComponent(e,t){let n=0,i=0,s=null;if(n=parseInt(t[n0]),t[bm]!=null&&(i=parseInt(t[bm])),i>=60||n>24)return null;if(n>=12&&(s=_i.Meridiem.PM),t[Em]!=null){if(n>12)return null;let a=t[Em][0].toLowerCase();a=="a"&&(s=_i.Meridiem.AM,n==12&&(n=0)),a=="p"&&(s=_i.Meridiem.PM,n!=12&&(n+=12))}if(e.assign("hour",n),e.assign("minute",i),s!==null?e.assign("meridiem",s):n<12?e.imply("meridiem",_i.Meridiem.AM):e.imply("meridiem",_i.Meridiem.PM),t[vm]!=null){let a=parseInt(t[vm]);if(a>=60)return null;e.assign("second",a)}return e}};ll.default=bn});var Am=p(dl=>{"use strict";Object.defineProperty(dl,"__esModule",{value:!0});var i0=Fe(),Om=wr(),Pm=wr(),Zs=wr(),s0=se(),a0=R(),o0=new RegExp(`(?:on\\s*?)?(${Zs.ORDINAL_NUMBER_PATTERN})(?:\\s*(?:au|\\-|\\\u2013|jusqu'au?|\\s)\\s*(${Zs.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s*(?:de)?\\s*)(${s0.matchAnyPattern(Om.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s*)(${Pm.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),Rm=1,Dm=2,u0=3,Mm=4,cl=class extends a0.AbstractParserWithWordBoundaryChecking{innerPattern(){return o0}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Om.MONTH_DICTIONARY[t[u0].toLowerCase()],s=Zs.parseOrdinalNumberPattern(t[Rm]);if(s>31)return t.index=t.index+t[Rm].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Mm]){let a=Pm.parseYear(t[Mm]);n.start.assign("year",a)}else{let a=i0.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Dm]){let a=Zs.parseOrdinalNumberPattern(t[Dm]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};dl.default=cl});var Nm=p(pl=>{"use strict";Object.defineProperty(pl,"__esModule",{value:!0});var km=wr(),l0=pe(),c0=R(),d0=ht(),fl=class extends c0.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`il y a\\s*(${km.TIME_UNITS_PATTERN})(?=(?:\\W|$))`,"i")}innerExtract(e,t){let n=km.parseTimeUnits(t[1]),i=d0.reverseTimeUnits(n);return l0.ParsingComponents.createRelativeFromReference(e.reference,i)}};pl.default=fl});var Cm=p(ml=>{"use strict";Object.defineProperty(ml,"__esModule",{value:!0});var Sm=wr(),f0=pe(),p0=R(),hl=class extends p0.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp(`(?:dans|en|pour|pendant|de)\\s*(${Sm.TIME_UNITS_PATTERN})(?=\\W|$)`,"i")}innerExtract(e,t){let n=Sm.parseTimeUnits(t[1]);return f0.ParsingComponents.createRelativeFromReference(e.reference,n)}};ml.default=hl});var Im=p(gl=>{"use strict";Object.defineProperty(gl,"__esModule",{value:!0});var Xs=wr(),h0=pe(),m0=R(),y0=ht(),g0=se(),yl=class extends m0.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`(?:les?|la|l'|du|des?)\\s*(${Xs.NUMBER_PATTERN})?(?:\\s*(prochaine?s?|derni[e\xE8]re?s?|pass[\xE9e]e?s?|pr[\xE9e]c[\xE9e]dents?|suivante?s?))?\\s*(${g0.matchAnyPattern(Xs.TIME_UNIT_DICTIONARY)})(?:\\s*(prochaine?s?|derni[e\xE8]re?s?|pass[\xE9e]e?s?|pr[\xE9e]c[\xE9e]dents?|suivante?s?))?`,"i")}innerExtract(e,t){let n=t[1]?Xs.parseNumberPattern(t[1]):1,i=Xs.TIME_UNIT_DICTIONARY[t[3].toLowerCase()],s={};s[i]=n;let a=t[2]||t[4]||"";if(a=a.toLowerCase(),!!a)return(/derni[eè]re?s?/.test(a)||/pass[ée]e?s?/.test(a)||/pr[ée]c[ée]dents?/.test(a))&&(s=y0.reverseTimeUnits(s)),h0.ParsingComponents.createRelativeFromReference(e.reference,s)}};gl.default=yl});var Um=p(Pe=>{"use strict";var mt=Pe&&Pe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.createConfiguration=Pe.createCasualConfiguration=Pe.parseDate=Pe.parse=Pe.strict=Pe.casual=void 0;var _0=er(),xm=Mt(),T0=mt(cm()),b0=mt(dm()),v0=mt($r()),E0=mt(fm()),w0=mt(pm()),R0=mt(hm()),D0=mt(Tm()),M0=mt(wm()),O0=mt(Am()),P0=mt(Nm()),A0=mt(Cm()),k0=mt(Im());Pe.casual=new xm.Chrono(Fm());Pe.strict=new xm.Chrono(_l(!0));function N0(r,e,t){return Pe.casual.parse(r,e,t)}Pe.parse=N0;function S0(r,e,t){return Pe.casual.parseDate(r,e,t)}Pe.parseDate=S0;function Fm(r=!0){let e=_l(!1,r);return e.parsers.unshift(new T0.default),e.parsers.unshift(new b0.default),e.parsers.unshift(new k0.default),e}Pe.createCasualConfiguration=Fm;function _l(r=!0,e=!0){return _0.includeCommonConfiguration({parsers:[new v0.default(e),new O0.default,new E0.default,new M0.default,new P0.default,new A0.default,new D0.default],refiners:[new w0.default,new R0.default]},r)}Pe.createConfiguration=_l});var qm=p(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});Qs.toHankaku=void 0;function C0(r){return String(r).replace(/\u2019/g,"'").replace(/\u201D/g,'"').replace(/\u3000/g," ").replace(/\uFFE5/g,"\xA5").replace(/[\uFF01\uFF03-\uFF06\uFF08\uFF09\uFF0C-\uFF19\uFF1C-\uFF1F\uFF21-\uFF3B\uFF3D\uFF3F\uFF41-\uFF5B\uFF5D\uFF5E]/g,I0)}Qs.toHankaku=C0;function I0(r){return String.fromCharCode(r.charCodeAt(0)-65248)}});var Lm=p(Ti=>{"use strict";var x0=Ti&&Ti.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ti,"__esModule",{value:!0});var Tl=qm(),F0=Fe(),U0=x0(X()),q0=/(?:(?:([同今本])|((昭和|平成|令和)?([0-9０-９]{1,4}|元)))年\s*)?([0-9０-９]{1,2})月\s*([0-9０-９]{1,2})日/i,Wm=1,W0=2,bl=3,L0=4,Y0=5,$0=6,vl=class{pattern(){return q0}extract(e,t){let n=parseInt(Tl.toHankaku(t[Y0])),i=parseInt(Tl.toHankaku(t[$0])),s=e.createParsingComponents({day:i,month:n});if(t[Wm]&&t[Wm].match("\u540C|\u4ECA|\u672C")){let a=U0.default(e.refDate);s.assign("year",a.year())}if(t[W0]){let a=t[L0],o=a=="\u5143"?1:parseInt(Tl.toHankaku(a));t[bl]=="\u4EE4\u548C"?o+=2018:t[bl]=="\u5E73\u6210"?o+=1988:t[bl]=="\u662D\u548C"&&(o+=1925),s.assign("year",o)}else{let a=F0.findYearClosestToRef(e.refDate,i,n);s.imply("year",a)}return s}};Ti.default=vl});var Ym=p(bi=>{"use strict";var j0=bi&&bi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(bi,"__esModule",{value:!0});var B0=j0($t()),El=class extends B0.default{patternBetween(){return/^\s*(から|ー|-)\s*$/i}};bi.default=El});var jm=p(kt=>{"use strict";var G0=kt&&kt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),H0=kt&&kt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),z0=kt&&kt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&G0(e,r,t);return H0(e,r),e},K0=kt&&kt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(kt,"__esModule",{value:!0});var V0=K0(X()),$m=we(),wl=z0(rr()),Z0=/今日|当日|昨日|明日|今夜|今夕|今晩|今朝/i,Rl=class{pattern(){return Z0}extract(e,t){let n=t[0],i=V0.default(e.refDate),s=e.createParsingComponents();switch(n){case"\u6628\u65E5":return wl.yesterday(e.reference);case"\u660E\u65E5":return wl.tomorrow(e.reference);case"\u4ECA\u65E5":case"\u5F53\u65E5":return wl.today(e.reference)}return n=="\u4ECA\u591C"||n=="\u4ECA\u5915"||n=="\u4ECA\u6669"?(s.imply("hour",22),s.assign("meridiem",$m.Meridiem.PM)):n.match("\u4ECA\u671D")&&(s.imply("hour",6),s.assign("meridiem",$m.Meridiem.AM)),s.assign("day",i.date()),s.assign("month",i.month()+1),s.assign("year",i.year()),s}};kt.default=Rl});var Hm=p(Ae=>{"use strict";var Dl=Ae&&Ae.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.createConfiguration=Ae.createCasualConfiguration=Ae.parseDate=Ae.parse=Ae.strict=Ae.casual=void 0;var X0=Dl(Lm()),Q0=Dl(Ym()),J0=Dl(jm()),Bm=Mt();Ae.casual=new Bm.Chrono(Gm());Ae.strict=new Bm.Chrono(Ml());function ew(r,e,t){return Ae.casual.parse(r,e,t)}Ae.parse=ew;function tw(r,e,t){return Ae.casual.parseDate(r,e,t)}Ae.parseDate=tw;function Gm(){let r=Ml();return r.parsers.unshift(new J0.default),r}Ae.createCasualConfiguration=Gm;function Ml(){return{parsers:[new X0.default],refiners:[new Q0.default]}}Ae.createConfiguration=Ml});var Js=p(Bt=>{"use strict";Object.defineProperty(Bt,"__esModule",{value:!0});Bt.parseYear=Bt.YEAR_PATTERN=Bt.MONTH_DICTIONARY=Bt.WEEKDAY_DICTIONARY=void 0;Bt.WEEKDAY_DICTIONARY={domingo:0,dom:0,segunda:1,"segunda-feira":1,seg:1,ter\u00E7a:2,"ter\xE7a-feira":2,ter:2,quarta:3,"quarta-feira":3,qua:3,quinta:4,"quinta-feira":4,qui:4,sexta:5,"sexta-feira":5,sex:5,s\u00E1bado:6,sabado:6,sab:6};Bt.MONTH_DICTIONARY={janeiro:1,jan:1,"jan.":1,fevereiro:2,fev:2,"fev.":2,mar\u00E7o:3,mar:3,"mar.":3,abril:4,abr:4,"abr.":4,maio:5,mai:5,"mai.":5,junho:6,jun:6,"jun.":6,julho:7,jul:7,"jul.":7,agosto:8,ago:8,"ago.":8,setembro:9,set:9,"set.":9,outubro:10,out:10,"out.":10,novembro:11,nov:11,"nov.":11,dezembro:12,dez:12,"dez.":12};Bt.YEAR_PATTERN="[0-9]{1,4}(?![^\\s]\\d)(?:\\s*[a|d]\\.?\\s*c\\.?|\\s*a\\.?\\s*d\\.?)?";function rw(r){if(r.match(/^[0-9]{1,4}$/)){let e=parseInt(r);return e<100&&(e>50?e=e+1900:e=e+2e3),e}return r.match(/a\.?\s*c\.?/i)?(r=r.replace(/a\.?\s*c\.?/i,""),-parseInt(r)):parseInt(r)}Bt.parseYear=rw});var Km=p(Pl=>{"use strict";Object.defineProperty(Pl,"__esModule",{value:!0});var zm=Js(),nw=se(),iw=R(),sw=Yr(),aw=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:(este|esta|passado|pr[o\xF3]ximo)\\s*)?(${nw.matchAnyPattern(zm.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(este|esta|passado|pr[\xF3o]ximo)\\s*semana)?(?=\\W|\\d|$)`,"i"),ow=1,uw=2,lw=3,Ol=class extends iw.AbstractParserWithWordBoundaryChecking{innerPattern(){return aw}innerExtract(e,t){let n=t[uw].toLowerCase(),i=zm.WEEKDAY_DICTIONARY[n];if(i===void 0)return null;let s=t[ow],a=t[lw],o=s||a||"";o=o.toLowerCase();let u=null;o=="passado"?u="this":o=="pr\xF3ximo"||o=="proximo"?u="next":o=="este"&&(u="this");let l=sw.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Pl.default=Ol});var Vm=p(kl=>{"use strict";Object.defineProperty(kl,"__esModule",{value:!0});var cw=Wr(),Al=class extends cw.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:ao?|\xE0s?|das|da|de|do)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|a(?:o)?|\\?)\\s*"}};kl.default=Al});var Zm=p(vi=>{"use strict";var dw=vi&&vi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vi,"__esModule",{value:!0});var fw=dw(Jt()),Nl=class extends fw.default{patternBetween(){return new RegExp("^\\s*(?:,|\xE0)?\\s*$")}};vi.default=Nl});var Xm=p(Ei=>{"use strict";var pw=Ei&&Ei.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ei,"__esModule",{value:!0});var hw=pw($t()),Sl=class extends hw.default{patternBetween(){return/^\s*(?:-)\s*$/i}};Ei.default=Sl});var ny=p(Il=>{"use strict";Object.defineProperty(Il,"__esModule",{value:!0});var mw=Fe(),ty=Js(),ry=Js(),yw=se(),gw=R(),_w=new RegExp(`([0-9]{1,2})(?:\xBA|\xAA|\xB0)?(?:\\s*(?:desde|de|\\-|\\\u2013|ao?|\\s)\\s*([0-9]{1,2})(?:\xBA|\xAA|\xB0)?)?\\s*(?:de)?\\s*(?:-|/|\\s*(?:de|,)?\\s*)(${yw.matchAnyPattern(ty.MONTH_DICTIONARY)})(?:\\s*(?:de|,)?\\s*(${ry.YEAR_PATTERN}))?(?=\\W|$)`,"i"),Qm=1,Jm=2,Tw=3,ey=4,Cl=class extends gw.AbstractParserWithWordBoundaryChecking{innerPattern(){return _w}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=ty.MONTH_DICTIONARY[t[Tw].toLowerCase()],s=parseInt(t[Qm]);if(s>31)return t.index=t.index+t[Qm].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[ey]){let a=ry.parseYear(t[ey]);n.start.assign("year",a)}else{let a=mw.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Jm]){let a=parseInt(t[Jm]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Il.default=Cl});var iy=p(nr=>{"use strict";var bw=nr&&nr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),vw=nr&&nr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Ew=nr&&nr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&bw(e,r,t);return vw(e,r),e};Object.defineProperty(nr,"__esModule",{value:!0});var ww=R(),ea=Ew(rr()),xl=class extends ww.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(agora|hoje|amanha|amanhã|ontem)(?=\W|$)/i}innerExtract(e,t){let n=t[0].toLowerCase(),i=e.createParsingComponents();switch(n){case"agora":return ea.now(e.reference);case"hoje":return ea.today(e.reference);case"amanha":case"amanh\xE3":return ea.tomorrow(e.reference);case"ontem":return ea.yesterday(e.reference)}return i}};nr.default=xl});var sy=p(wi=>{"use strict";var Rw=wi&&wi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(wi,"__esModule",{value:!0});var ta=we(),Dw=R(),Mw=pt(),Ow=Rw(X()),Fl=class extends Dw.AbstractParserWithWordBoundaryChecking{innerPattern(){return/(?:esta\s*)?(manha|manhã|tarde|meia-noite|meio-dia|noite)(?=\W|$)/i}innerExtract(e,t){let n=Ow.default(e.refDate),i=e.createParsingComponents();switch(t[1].toLowerCase()){case"tarde":i.imply("meridiem",ta.Meridiem.PM),i.imply("hour",15);break;case"noite":i.imply("meridiem",ta.Meridiem.PM),i.imply("hour",22);break;case"manha":case"manh\xE3":i.imply("meridiem",ta.Meridiem.AM),i.imply("hour",6);break;case"meia-noite":Mw.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"meio-dia":i.imply("meridiem",ta.Meridiem.AM),i.imply("hour",12);break}return i}};wi.default=Fl});var uy=p(ke=>{"use strict";var Rr=ke&&ke.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ke,"__esModule",{value:!0});ke.createConfiguration=ke.createCasualConfiguration=ke.parseDate=ke.parse=ke.strict=ke.casual=void 0;var Pw=er(),ay=Mt(),Aw=Rr($r()),kw=Rr(Km()),Nw=Rr(Vm()),Sw=Rr(Zm()),Cw=Rr(Xm()),Iw=Rr(ny()),xw=Rr(iy()),Fw=Rr(sy());ke.casual=new ay.Chrono(oy());ke.strict=new ay.Chrono(Ul(!0));function Uw(r,e,t){return ke.casual.parse(r,e,t)}ke.parse=Uw;function qw(r,e,t){return ke.casual.parseDate(r,e,t)}ke.parseDate=qw;function oy(r=!0){let e=Ul(!1,r);return e.parsers.push(new xw.default),e.parsers.push(new Fw.default),e}ke.createCasualConfiguration=oy;function Ul(r=!0,e=!0){return Pw.includeCommonConfiguration({parsers:[new Aw.default(e),new kw.default,new Nw.default,new Iw.default],refiners:[new Sw.default,new Cw.default]},r)}ke.createConfiguration=Ul});var ly=p(Ri=>{"use strict";var Ww=Ri&&Ri.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ri,"__esModule",{value:!0});var Lw=Ww($t()),ql=class extends Lw.default{patternBetween(){return/^\s*(tot|-)\s*$/i}};Ri.default=ql});var cy=p(Di=>{"use strict";var Yw=Di&&Di.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Di,"__esModule",{value:!0});var $w=Yw(Jt()),Wl=class extends $w.default{patternBetween(){return new RegExp("^\\s*(om|na|voor|in de|,|-)?\\s*$")}};Di.default=Wl});var dy=p(ir=>{"use strict";var jw=ir&&ir.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Bw=ir&&ir.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Gw=ir&&ir.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&jw(e,r,t);return Bw(e,r),e};Object.defineProperty(ir,"__esModule",{value:!0});var Hw=R(),ra=Gw(rr()),Ll=class extends Hw.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(nu|vandaag|morgen|morgend|gisteren)(?=\W|$)/i}innerExtract(e,t){let n=t[0].toLowerCase(),i=e.createParsingComponents();switch(n){case"nu":return ra.now(e.reference);case"vandaag":return ra.today(e.reference);case"morgen":case"morgend":return ra.tomorrow(e.reference);case"gisteren":return ra.yesterday(e.reference)}return i}};ir.default=Ll});var fy=p(Mi=>{"use strict";var zw=Mi&&Mi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Mi,"__esModule",{value:!0});var na=we(),Kw=R(),Vw=zw(X()),Zw=pt(),Xw=1,Qw=2,Yl=class extends Kw.AbstractParserWithWordBoundaryChecking{innerPattern(){return/(deze)?\s*(namiddag|avond|middernacht|ochtend|middag|'s middags|'s avonds|'s ochtends)(?=\W|$)/i}innerExtract(e,t){let n=Vw.default(e.refDate),i=e.createParsingComponents();switch(t[Xw]==="deze"&&(i.assign("day",e.refDate.getDate()),i.assign("month",e.refDate.getMonth()+1),i.assign("year",e.refDate.getFullYear())),t[Qw].toLowerCase()){case"namiddag":case"'s namiddags":i.imply("meridiem",na.Meridiem.PM),i.imply("hour",15);break;case"avond":case"'s avonds'":i.imply("meridiem",na.Meridiem.PM),i.imply("hour",20);break;case"middernacht":Zw.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"ochtend":case"'s ochtends":i.imply("meridiem",na.Meridiem.AM),i.imply("hour",6);break;case"middag":case"'s middags":i.imply("meridiem",na.Meridiem.AM),i.imply("hour",12);break}return i}};Mi.default=Yl});var it=p(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});j.parseTimeUnits=j.TIME_UNITS_PATTERN=j.parseYear=j.YEAR_PATTERN=j.parseOrdinalNumberPattern=j.ORDINAL_NUMBER_PATTERN=j.parseNumberPattern=j.NUMBER_PATTERN=j.TIME_UNIT_DICTIONARY=j.ORDINAL_WORD_DICTIONARY=j.INTEGER_WORD_DICTIONARY=j.MONTH_DICTIONARY=j.WEEKDAY_DICTIONARY=void 0;var ia=se(),Jw=Fe();j.WEEKDAY_DICTIONARY={zondag:0,zon:0,"zon.":0,zo:0,"zo.":0,maandag:1,ma:1,"ma.":1,dinsdag:2,din:2,"din.":2,di:2,"di.":2,woensdag:3,woe:3,"woe.":3,wo:3,"wo.":3,donderdag:4,dond:4,"dond.":4,do:4,"do.":4,vrijdag:5,vrij:5,"vrij.":5,vr:5,"vr.":5,zaterdag:6,zat:6,"zat.":6,za:6,"za.":6};j.MONTH_DICTIONARY={januari:1,jan:1,"jan.":1,februari:2,feb:2,"feb.":2,maart:3,mar:3,"mar.":3,april:4,apr:4,"apr.":4,mei:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,augustus:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,december:12,dec:12,"dec.":12};j.INTEGER_WORD_DICTIONARY={een:1,twee:2,drie:3,vier:4,vijf:5,zes:6,zeven:7,acht:8,negen:9,tien:10,elf:11,twaalf:12};j.ORDINAL_WORD_DICTIONARY={eerste:1,tweede:2,derde:3,vierde:4,vijfde:5,zesde:6,zevende:7,achtste:8,negende:9,tiende:10,elfde:11,twaalfde:12,dertiende:13,veertiende:14,vijftiende:15,zestiende:16,zeventiende:17,achttiende:18,negentiende:19,twintigste:20,eenentwintigste:21,twee\u00EBntwintigste:22,drieentwintigste:23,vierentwintigste:24,vijfentwintigste:25,zesentwintigste:26,zevenentwintigste:27,achtentwintig:28,negenentwintig:29,dertigste:30,eenendertigste:31};j.TIME_UNIT_DICTIONARY={sec:"second",second:"second",seconden:"second",min:"minute",mins:"minute",minute:"minute",minuut:"minute",minuten:"minute",minuutje:"minute",h:"hour",hr:"hour",hrs:"hour",uur:"hour",u:"hour",uren:"hour",dag:"d",dagen:"d",week:"week",weken:"week",maand:"month",maanden:"month",jaar:"year",jr:"year",jaren:"year"};j.NUMBER_PATTERN=`(?:${ia.matchAnyPattern(j.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+[\\.,][0-9]+|halve?|half|paar)`;function hy(r){let e=r.toLowerCase();return j.INTEGER_WORD_DICTIONARY[e]!==void 0?j.INTEGER_WORD_DICTIONARY[e]:e==="paar"?2:e==="half"||e.match(/halve?/)?.5:parseFloat(e.replace(",","."))}j.parseNumberPattern=hy;j.ORDINAL_NUMBER_PATTERN=`(?:${ia.matchAnyPattern(j.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:ste|de)?)`;function eR(r){let e=r.toLowerCase();return j.ORDINAL_WORD_DICTIONARY[e]!==void 0?j.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:ste|de)$/i,""),parseInt(e))}j.parseOrdinalNumberPattern=eR;j.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s*(?:voor Christus|na Christus)|[1-2][0-9]{3}|[5-9][0-9])";function tR(r){if(/voor Christus/i.test(r))return r=r.replace(/voor Christus/i,""),-parseInt(r);if(/na Christus/i.test(r))return r=r.replace(/na Christus/i,""),parseInt(r);let e=parseInt(r);return Jw.findMostLikelyADYear(e)}j.parseYear=tR;var my=`(${j.NUMBER_PATTERN})\\s{0,5}(${ia.matchAnyPattern(j.TIME_UNIT_DICTIONARY)})\\s{0,5}`,py=new RegExp(my,"i");j.TIME_UNITS_PATTERN=ia.repeatedTimeunitPattern("(?:(?:binnen|in)\\s*)?",my);function rR(r){let e={},t=r,n=py.exec(t);for(;n;)nR(e,n),t=t.substring(n[0].length),n=py.exec(t);return e}j.parseTimeUnits=rR;function nR(r,e){let t=hy(e[1]),n=j.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var gy=p(jl=>{"use strict";Object.defineProperty(jl,"__esModule",{value:!0});var yy=it(),iR=pe(),sR=R(),$l=class extends sR.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(?:binnen|in|binnen de|voor)\\s*("+yy.TIME_UNITS_PATTERN+")(?=\\W|$)","i")}innerExtract(e,t){let n=yy.parseTimeUnits(t[1]);return iR.ParsingComponents.createRelativeFromReference(e.reference,n)}};jl.default=$l});var Ty=p(Gl=>{"use strict";Object.defineProperty(Gl,"__esModule",{value:!0});var _y=it(),aR=se(),oR=R(),uR=Yr(),lR=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:op\\s*?)?(?:(deze|vorige|volgende)\\s*(?:week\\s*)?)?(${aR.matchAnyPattern(_y.WEEKDAY_DICTIONARY)})(?=\\W|$)`,"i"),cR=1,dR=2,fR=3,Bl=class extends oR.AbstractParserWithWordBoundaryChecking{innerPattern(){return lR}innerExtract(e,t){let n=t[dR].toLowerCase(),i=_y.WEEKDAY_DICTIONARY[n],s=t[cR],a=t[fR],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="vorige"?u="last":o=="volgende"?u="next":o=="deze"&&(u="this");let l=uR.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Gl.default=Bl});var Dy=p(zl=>{"use strict";Object.defineProperty(zl,"__esModule",{value:!0});var pR=Fe(),wy=it(),sa=it(),Ry=it(),hR=se(),mR=R(),yR=new RegExp(`(?:on\\s*?)?(${sa.ORDINAL_NUMBER_PATTERN})(?:\\s*(?:tot|\\-|\\\u2013|until|through|till|\\s)\\s*(${sa.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s*(?:of)?\\s*)(`+hR.matchAnyPattern(wy.MONTH_DICTIONARY)+`)(?:(?:-|/|,?\\s*)(${Ry.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),gR=3,by=1,vy=2,Ey=4,Hl=class extends mR.AbstractParserWithWordBoundaryChecking{innerPattern(){return yR}innerExtract(e,t){let n=wy.MONTH_DICTIONARY[t[gR].toLowerCase()],i=sa.parseOrdinalNumberPattern(t[by]);if(i>31)return t.index=t.index+t[by].length,null;let s=e.createParsingComponents({day:i,month:n});if(t[Ey]){let u=Ry.parseYear(t[Ey]);s.assign("year",u)}else{let u=pR.findYearClosestToRef(e.refDate,i,n);s.imply("year",u)}if(!t[vy])return s;let a=sa.parseOrdinalNumberPattern(t[vy]),o=e.createParsingResult(t.index,t[0]);return o.start=s,o.end=s.clone(),o.end.assign("day",a),o}};zl.default=Hl});var Ay=p(Vl=>{"use strict";Object.defineProperty(Vl,"__esModule",{value:!0});var Oy=it(),_R=Fe(),TR=se(),Py=it(),bR=R(),vR=new RegExp(`(${TR.matchAnyPattern(Oy.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${Py.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),ER=1,My=2,Kl=class extends bR.AbstractParserWithWordBoundaryChecking{innerPattern(){return vR}innerExtract(e,t){let n=e.createParsingComponents();n.imply("day",1);let i=t[ER],s=Oy.MONTH_DICTIONARY[i.toLowerCase()];if(n.assign("month",s),t[My]){let a=Py.parseYear(t[My]);n.assign("year",a)}else{let a=_R.findYearClosestToRef(e.refDate,1,s);n.imply("year",a)}return n}};Vl.default=Kl});var ky=p(Xl=>{"use strict";Object.defineProperty(Xl,"__esModule",{value:!0});var wR=R(),RR=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),DR=1,MR=2,Zl=class extends wR.AbstractParserWithWordBoundaryChecking{innerPattern(){return RR}innerExtract(e,t){let n=parseInt(t[MR]),i=parseInt(t[DR]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};Xl.default=Zl});var Ny=p(Jl=>{"use strict";Object.defineProperty(Jl,"__esModule",{value:!0});var OR=Wr(),Ql=class extends OR.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:om)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|om|\\?)\\s*"}primarySuffix(){return"(?:\\s*(?:uur))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};Jl.default=Ql});var Iy=p(tc=>{"use strict";Object.defineProperty(tc,"__esModule",{value:!0});var Cy=it(),PR=se(),AR=R(),kR=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${PR.matchAnyPattern(Cy.MONTH_DICTIONARY)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),NR=1,SR=2,Sy=3,CR=4,ec=class extends AR.AbstractParserWithWordBoundaryChecking{innerPattern(){return kR}innerExtract(e,t){let n=t[Sy]?parseInt(t[Sy]):Cy.MONTH_DICTIONARY[t[SR].toLowerCase()];if(n<1||n>12)return null;let i=parseInt(t[NR]);return{day:parseInt(t[CR]),month:n,year:i}}};tc.default=ec});var xy=p(Oi=>{"use strict";var IR=Oi&&Oi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Oi,"__esModule",{value:!0});var xR=R(),aa=we(),rc=pt(),FR=IR(X()),UR=1,qR=2,nc=class extends xR.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(gisteren|morgen|van)(ochtend|middag|namiddag|avond|nacht)(?=\W|$)/i}innerExtract(e,t){let n=t[UR].toLowerCase(),i=t[qR].toLowerCase(),s=e.createParsingComponents(),a=FR.default(e.refDate);switch(n){case"gisteren":rc.assignSimilarDate(s,a.add(-1,"day"));break;case"van":rc.assignSimilarDate(s,a);break;case"morgen":rc.assignTheNextDay(s,a);break}switch(i){case"ochtend":s.imply("meridiem",aa.Meridiem.AM),s.imply("hour",6);break;case"middag":s.imply("meridiem",aa.Meridiem.AM),s.imply("hour",12);break;case"namiddag":s.imply("meridiem",aa.Meridiem.PM),s.imply("hour",15);break;case"avond":s.imply("meridiem",aa.Meridiem.PM),s.imply("hour",20);break}return s}};Oi.default=nc});var Uy=p(sc=>{"use strict";Object.defineProperty(sc,"__esModule",{value:!0});var Fy=it(),WR=pe(),LR=R(),YR=ht(),$R=new RegExp(`(deze|vorige|afgelopen|komende|over|\\+|-)\\s*(${Fy.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),ic=class extends LR.AbstractParserWithWordBoundaryChecking{innerPattern(){return $R}innerExtract(e,t){let n=t[1].toLowerCase(),i=Fy.parseTimeUnits(t[2]);switch(n){case"vorige":case"afgelopen":case"-":i=YR.reverseTimeUnits(i);break}return WR.ParsingComponents.createRelativeFromReference(e.reference,i)}};sc.default=ic});var Ly=p(Pi=>{"use strict";var jR=Pi&&Pi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Pi,"__esModule",{value:!0});var Wy=it(),qy=pe(),BR=jR(X()),GR=R(),HR=se(),zR=new RegExp(`(dit|deze|komende|volgend|volgende|afgelopen|vorige)\\s*(${HR.matchAnyPattern(Wy.TIME_UNIT_DICTIONARY)})(?=\\s*)(?=\\W|$)`,"i"),KR=1,VR=2,ac=class extends GR.AbstractParserWithWordBoundaryChecking{innerPattern(){return zR}innerExtract(e,t){let n=t[KR].toLowerCase(),i=t[VR].toLowerCase(),s=Wy.TIME_UNIT_DICTIONARY[i];if(n=="volgend"||n=="volgende"||n=="komende"){let u={};return u[s]=1,qy.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="afgelopen"||n=="vorige"){let u={};return u[s]=-1,qy.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=BR.default(e.reference.instant);return i.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):i.match(/maand/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):i.match(/jaar/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};Pi.default=ac});var Yy=p(lc=>{"use strict";Object.defineProperty(lc,"__esModule",{value:!0});var uc=it(),ZR=pe(),XR=R(),QR=ht(),JR=new RegExp("("+uc.TIME_UNITS_PATTERN+")(?:geleden|voor|eerder)(?=(?:\\W|$))","i"),eD=new RegExp("("+uc.TIME_UNITS_PATTERN+")geleden(?=(?:\\W|$))","i"),oc=class extends XR.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?eD:JR}innerExtract(e,t){let n=uc.parseTimeUnits(t[1]),i=QR.reverseTimeUnits(n);return ZR.ParsingComponents.createRelativeFromReference(e.reference,i)}};lc.default=oc});var $y=p(fc=>{"use strict";Object.defineProperty(fc,"__esModule",{value:!0});var dc=it(),tD=pe(),rD=R(),nD=new RegExp("("+dc.TIME_UNITS_PATTERN+")(later|na|vanaf nu|voortaan|vooruit|uit)(?=(?:\\W|$))","i"),iD=new RegExp("("+dc.TIME_UNITS_PATTERN+")(later|vanaf nu)(?=(?:\\W|$))","i"),sD=1,cc=class extends rD.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?iD:nD}innerExtract(e,t){let n=dc.parseTimeUnits(t[sD]);return tD.ParsingComponents.createRelativeFromReference(e.reference,n)}};fc.default=cc});var Hy=p(Ne=>{"use strict";var qe=Ne&&Ne.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ne,"__esModule",{value:!0});Ne.createConfiguration=Ne.createCasualConfiguration=Ne.parseDate=Ne.parse=Ne.strict=Ne.casual=void 0;var aD=er(),jy=Mt(),oD=qe(ly()),uD=qe(cy()),lD=qe(dy()),cD=qe(fy()),dD=qe($r()),fD=qe(gy()),pD=qe(Ty()),hD=qe(Dy()),By=qe(Ay()),mD=qe(ky()),yD=qe(Ny()),gD=qe(Iy()),_D=qe(xy()),TD=qe(Uy()),bD=qe(Ly()),vD=qe(Yy()),ED=qe($y());Ne.casual=new jy.Chrono(Gy());Ne.strict=new jy.Chrono(pc(!0));function wD(r,e,t){return Ne.casual.parse(r,e,t)}Ne.parse=wD;function RD(r,e,t){return Ne.casual.parseDate(r,e,t)}Ne.parseDate=RD;function Gy(r=!0){let e=pc(!1,r);return e.parsers.unshift(new lD.default),e.parsers.unshift(new cD.default),e.parsers.unshift(new _D.default),e.parsers.unshift(new By.default),e.parsers.unshift(new bD.default),e.parsers.unshift(new TD.default),e}Ne.createCasualConfiguration=Gy;function pc(r=!0,e=!0){return aD.includeCommonConfiguration({parsers:[new dD.default(e),new fD.default,new hD.default,new By.default,new pD.default,new gD.default,new mD.default,new yD.default(r),new vD.default(r),new ED.default(r)],refiners:[new uD.default,new oD.default]},r)}Ne.createConfiguration=pc});var Zy=p(Ai=>{"use strict";var DD=Ai&&Ai.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ai,"__esModule",{value:!0});var MD=DD(X()),OD=R(),PD=1,zy=2,AD=3,Ky=4,Vy=5,kD=6,hc=class extends OD.AbstractParserWithWordBoundaryChecking{innerPattern(e){return new RegExp("(\u800C\u5BB6|\u7ACB(?:\u523B|\u5373)|\u5373\u523B)|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s|,|\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?","i")}innerExtract(e,t){let n=t.index,i=e.createParsingResult(n,t[0]),s=MD.default(e.refDate),a=s;if(t[PD])i.start.imply("hour",s.hour()),i.start.imply("minute",s.minute()),i.start.imply("second",s.second()),i.start.imply("millisecond",s.millisecond());else if(t[zy]){let o=t[zy],u=t[AD];o=="\u660E"||o=="\u807D"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u5F8C"?a=a.add(2,"day"):o=="\u5927\u5F8C"&&(a=a.add(3,"day")),u=="\u65E9"||u=="\u671D"?i.start.imply("hour",6):u=="\u665A"&&(i.start.imply("hour",22),i.start.imply("meridiem",1))}else if(t[Ky]){let u=t[Ky][0];u=="\u65E9"||u=="\u671D"||u=="\u4E0A"?i.start.imply("hour",6):u=="\u4E0B"||u=="\u664F"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):u=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):u=="\u591C"||u=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):u=="\u51CC"&&i.start.imply("hour",0)}else if(t[Vy]){let o=t[Vy];o=="\u660E"||o=="\u807D"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u5F8C"?a=a.add(2,"day"):o=="\u5927\u5F8C"&&(a=a.add(3,"day"));let u=t[kD];if(u){let l=u[0];l=="\u65E9"||l=="\u671D"||l=="\u4E0A"?i.start.imply("hour",6):l=="\u4E0B"||l=="\u664F"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):l=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):l=="\u591C"||l=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):l=="\u51CC"&&i.start.imply("hour",0)}}return i.start.assign("day",a.date()),i.start.assign("month",a.month()+1),i.start.assign("year",a.year()),i}};Ai.default=hc});var vn=p(Ve=>{"use strict";Object.defineProperty(Ve,"__esModule",{value:!0});Ve.zhStringToYear=Ve.zhStringToNumber=Ve.WEEKDAY_OFFSET=Ve.NUMBER=void 0;Ve.NUMBER={\u96F6:0,\u4E00:1,\u4E8C:2,\u5169:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6,\u4E03:7,\u516B:8,\u4E5D:9,\u5341:10,\u5EFF:20,\u5345:30};Ve.WEEKDAY_OFFSET={\u5929:0,\u65E5:0,\u4E00:1,\u4E8C:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6};function ND(r){let e=0;for(let t=0;t<r.length;t++){let n=r[t];n==="\u5341"?e=e===0?Ve.NUMBER[n]:e*Ve.NUMBER[n]:e+=Ve.NUMBER[n]}return e}Ve.zhStringToNumber=ND;function SD(r){let e="";for(let t=0;t<r.length;t++){let n=r[t];e=e+Ve.NUMBER[n]}return parseInt(e)}Ve.zhStringToYear=SD});var Qy=p(ki=>{"use strict";var CD=ki&&ki.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ki,"__esModule",{value:!0});var ID=CD(X()),xD=R(),Gr=vn(),mc=1,Xy=2,yc=3,gc=class extends xD.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(\\d{2,4}|["+Object.keys(Gr.NUMBER).join("")+"]{4}|["+Object.keys(Gr.NUMBER).join("")+"]{2})?(?:\\s*)(?:\u5E74)?(?:[\\s|,|\uFF0C]*)(\\d{1,2}|["+Object.keys(Gr.NUMBER).join("")+"]{1,2})(?:\\s*)(?:\u6708)(?:\\s*)(\\d{1,2}|["+Object.keys(Gr.NUMBER).join("")+"]{1,2})?(?:\\s*)(?:\u65E5|\u865F)?")}innerExtract(e,t){let n=ID.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=parseInt(t[Xy]);if(isNaN(s)&&(s=Gr.zhStringToNumber(t[Xy])),i.start.assign("month",s),t[yc]){let a=parseInt(t[yc]);isNaN(a)&&(a=Gr.zhStringToNumber(t[yc])),i.start.assign("day",a)}else i.start.imply("day",n.date());if(t[mc]){let a=parseInt(t[mc]);isNaN(a)&&(a=Gr.zhStringToYear(t[mc])),i.start.assign("year",a)}else i.start.imply("year",n.year());return i}};ki.default=gc});var eg=p(Ni=>{"use strict";var FD=Ni&&Ni.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ni,"__esModule",{value:!0});var UD=FD(X()),qD=R(),Jy=vn(),WD=new RegExp("(\\d+|["+Object.keys(Jy.NUMBER).join("")+"]+|\u534A|\u5E7E)(?:\\s*)(?:\u500B)?(\u79D2(?:\u9418)?|\u5206\u9418|\u5C0F\u6642|\u9418|\u65E5|\u5929|\u661F\u671F|\u79AE\u62DC|\u6708|\u5E74)(?:(?:\u4E4B|\u904E)?\u5F8C|(?:\u4E4B)?\u5167)","i"),_c=1,LD=2,Tc=class extends qD.AbstractParserWithWordBoundaryChecking{innerPattern(){return WD}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=parseInt(t[_c]);if(isNaN(i)&&(i=Jy.zhStringToNumber(t[_c])),isNaN(i)){let u=t[_c];if(u==="\u5E7E")i=3;else if(u==="\u534A")i=.5;else return null}let s=UD.default(e.refDate),o=t[LD][0];return o.match(/[日天星禮月年]/)?(o=="\u65E5"||o=="\u5929"?s=s.add(i,"d"):o=="\u661F"||o=="\u79AE"?s=s.add(i*7,"d"):o=="\u6708"?s=s.add(i,"month"):o=="\u5E74"&&(s=s.add(i,"year")),n.start.assign("year",s.year()),n.start.assign("month",s.month()+1),n.start.assign("day",s.date()),n):(o=="\u79D2"?s=s.add(i,"second"):o=="\u5206"?s=s.add(i,"minute"):(o=="\u5C0F"||o=="\u9418")&&(s=s.add(i,"hour")),n.start.imply("year",s.year()),n.start.imply("month",s.month()+1),n.start.imply("day",s.date()),n.start.assign("hour",s.hour()),n.start.assign("minute",s.minute()),n.start.assign("second",s.second()),n)}};Ni.default=Tc});var rg=p(Si=>{"use strict";var YD=Si&&Si.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Si,"__esModule",{value:!0});var $D=YD(X()),jD=R(),tg=vn(),BD=new RegExp("(?<prefix>\u4E0A|\u4ECA|\u4E0B|\u9019|\u5462)(?:\u500B)?(?:\u661F\u671F|\u79AE\u62DC|\u9031)(?<weekday>"+Object.keys(tg.WEEKDAY_OFFSET).join("|")+")"),bc=class extends jD.AbstractParserWithWordBoundaryChecking{innerPattern(){return BD}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=tg.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=null,o=t.groups.prefix;o=="\u4E0A"?a="last":o=="\u4E0B"?a="next":(o=="\u4ECA"||o=="\u9019"||o=="\u5462")&&(a="this");let u=$D.default(e.refDate),l=!1,c=u.day();return a=="last"||a=="past"?(u=u.day(s-7),l=!0):a=="next"?(u=u.day(s+7),l=!0):a=="this"?u=u.day(s):Math.abs(s-7-c)<Math.abs(s-c)?u=u.day(s-7):Math.abs(s+7-c)<Math.abs(s-c)?u=u.day(s+7):u=u.day(s),n.start.assign("weekday",s),l?(n.start.assign("day",u.date()),n.start.assign("month",u.month()+1),n.start.assign("year",u.year())):(n.start.imply("day",u.date()),n.start.imply("month",u.month()+1),n.start.imply("year",u.year())),n}};Si.default=bc});var ng=p(Ci=>{"use strict";var GD=Ci&&Ci.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ci,"__esModule",{value:!0});var HD=GD(X()),zD=R(),gt=vn(),KD=new RegExp("(?:\u7531|\u5F9E|\u81EA)?(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(gt.NUMBER).join("")+"]+)(?:\\s*)(?:\u9EDE|\u6642|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(gt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(gt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),VD=new RegExp("(?:^\\s*(?:\u5230|\u81F3|\\-|\\\u2013|\\~|\\\u301C)\\s*)(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(gt.NUMBER).join("")+"]+)(?:\\s*)(?:\u9EDE|\u6642|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(gt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(gt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),oa=1,ua=2,la=3,ca=4,da=5,fa=6,yt=7,En=8,pa=9,vc=class extends zD.AbstractParserWithWordBoundaryChecking{innerPattern(){return KD}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;let n=HD.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=n.clone();if(t[oa]){var a=t[oa];a=="\u660E"||a=="\u807D"?n.hour()>1&&s.add(1,"day"):a=="\u6628"||a=="\u5C0B"||a=="\u7434"?s.add(-1,"day"):a=="\u524D"?s.add(-2,"day"):a=="\u5927\u524D"?s.add(-3,"day"):a=="\u5F8C"?s.add(2,"day"):a=="\u5927\u5F8C"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else if(t[ca]){var o=t[ca];o=="\u660E"||o=="\u807D"?s.add(1,"day"):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?s.add(-1,"day"):o=="\u524D"?s.add(-2,"day"):o=="\u5927\u524D"?s.add(-3,"day"):o=="\u5F8C"?s.add(2,"day"):o=="\u5927\u5F8C"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else i.start.imply("day",s.date()),i.start.imply("month",s.month()+1),i.start.imply("year",s.year());let u=0,l=0,c=-1;if(t[En]){var d=parseInt(t[En]);if(isNaN(d)&&(d=gt.zhStringToNumber(t[En])),d>=60)return null;i.start.assign("second",d)}if(u=parseInt(t[fa]),isNaN(u)&&(u=gt.zhStringToNumber(t[fa])),t[yt]?t[yt]=="\u534A"?l=30:t[yt]=="\u6B63"||t[yt]=="\u6574"?l=0:(l=parseInt(t[yt]),isNaN(l)&&(l=gt.zhStringToNumber(t[yt]))):u>100&&(l=u%100,u=Math.floor(u/100)),l>=60||u>24)return null;if(u>=12&&(c=1),t[pa]){if(u>12)return null;var f=t[pa][0].toLowerCase();f=="a"&&(c=0,u==12&&(u=0)),f=="p"&&(c=1,u!=12&&(u+=12))}else if(t[ua]){var h=t[ua],g=h[0];g=="\u671D"||g=="\u65E9"?(c=0,u==12&&(u=0)):g=="\u665A"&&(c=1,u!=12&&(u+=12))}else if(t[la]){var m=t[la],y=m[0];y=="\u4E0A"||y=="\u671D"||y=="\u65E9"||y=="\u51CC"?(c=0,u==12&&(u=0)):(y=="\u4E0B"||y=="\u664F"||y=="\u665A")&&(c=1,u!=12&&(u+=12))}else if(t[da]){var P=t[da],w=P[0];w=="\u4E0A"||w=="\u671D"||w=="\u65E9"||w=="\u51CC"?(c=0,u==12&&(u=0)):(w=="\u4E0B"||w=="\u664F"||w=="\u665A")&&(c=1,u!=12&&(u+=12))}if(i.start.assign("hour",u),i.start.assign("minute",l),c>=0?i.start.assign("meridiem",c):u<12?i.start.imply("meridiem",0):i.start.imply("meridiem",1),t=VD.exec(e.text.substring(i.index+i.text.length)),!t)return i.text.match(/^\d+$/)?null:i;let N=s.clone();if(i.end=e.createParsingComponents(),t[oa]){var a=t[oa];a=="\u660E"||a=="\u807D"?n.hour()>1&&N.add(1,"day"):a=="\u6628"||a=="\u5C0B"||a=="\u7434"?N.add(-1,"day"):a=="\u524D"?N.add(-2,"day"):a=="\u5927\u524D"?N.add(-3,"day"):a=="\u5F8C"?N.add(2,"day"):a=="\u5927\u5F8C"&&N.add(3,"day"),i.end.assign("day",N.date()),i.end.assign("month",N.month()+1),i.end.assign("year",N.year())}else if(t[ca]){var o=t[ca];o=="\u660E"||o=="\u807D"?N.add(1,"day"):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?N.add(-1,"day"):o=="\u524D"?N.add(-2,"day"):o=="\u5927\u524D"?N.add(-3,"day"):o=="\u5F8C"?N.add(2,"day"):o=="\u5927\u5F8C"&&N.add(3,"day"),i.end.assign("day",N.date()),i.end.assign("month",N.month()+1),i.end.assign("year",N.year())}else i.end.imply("day",N.date()),i.end.imply("month",N.month()+1),i.end.imply("year",N.year());if(u=0,l=0,c=-1,t[En]){var d=parseInt(t[En]);if(isNaN(d)&&(d=gt.zhStringToNumber(t[En])),d>=60)return null;i.end.assign("second",d)}if(u=parseInt(t[fa]),isNaN(u)&&(u=gt.zhStringToNumber(t[fa])),t[yt]?t[yt]=="\u534A"?l=30:t[yt]=="\u6B63"||t[yt]=="\u6574"?l=0:(l=parseInt(t[yt]),isNaN(l)&&(l=gt.zhStringToNumber(t[yt]))):u>100&&(l=u%100,u=Math.floor(u/100)),l>=60||u>24)return null;if(u>=12&&(c=1),t[pa]){if(u>12)return null;var f=t[pa][0].toLowerCase();f=="a"&&(c=0,u==12&&(u=0)),f=="p"&&(c=1,u!=12&&(u+=12)),i.start.isCertain("meridiem")||(c==0?(i.start.imply("meridiem",0),i.start.get("hour")==12&&i.start.assign("hour",0)):(i.start.imply("meridiem",1),i.start.get("hour")!=12&&i.start.assign("hour",i.start.get("hour")+12)))}else if(t[ua]){var h=t[ua],g=h[0];g=="\u671D"||g=="\u65E9"?(c=0,u==12&&(u=0)):g=="\u665A"&&(c=1,u!=12&&(u+=12))}else if(t[la]){var m=t[la],y=m[0];y=="\u4E0A"||y=="\u671D"||y=="\u65E9"||y=="\u51CC"?(c=0,u==12&&(u=0)):(y=="\u4E0B"||y=="\u664F"||y=="\u665A")&&(c=1,u!=12&&(u+=12))}else if(t[da]){var P=t[da],w=P[0];w=="\u4E0A"||w=="\u671D"||w=="\u65E9"||w=="\u51CC"?(c=0,u==12&&(u=0)):(w=="\u4E0B"||w=="\u664F"||w=="\u665A")&&(c=1,u!=12&&(u+=12))}return i.text=i.text+t[0],i.end.assign("hour",u),i.end.assign("minute",l),c>=0?i.end.assign("meridiem",c):i.start.isCertain("meridiem")&&i.start.get("meridiem")==1&&i.start.get("hour")>u?i.end.imply("meridiem",0):u>12&&i.end.imply("meridiem",1),i.end.date().getTime()<i.start.date().getTime()&&i.end.imply("day",i.end.get("day")+1),i}};Ci.default=vc});var sg=p(Ii=>{"use strict";var ZD=Ii&&Ii.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ii,"__esModule",{value:!0});var XD=ZD(X()),QD=R(),ig=vn(),JD=new RegExp("(?:\u661F\u671F|\u79AE\u62DC|\u9031)(?<weekday>"+Object.keys(ig.WEEKDAY_OFFSET).join("|")+")"),Ec=class extends QD.AbstractParserWithWordBoundaryChecking{innerPattern(){return JD}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=ig.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=XD.default(e.refDate),o=!1,u=a.day();return Math.abs(s-7-u)<Math.abs(s-u)?a=a.day(s-7):Math.abs(s+7-u)<Math.abs(s-u)?a=a.day(s+7):a=a.day(s),n.start.assign("weekday",s),o?(n.start.assign("day",a.date()),n.start.assign("month",a.month()+1),n.start.assign("year",a.year())):(n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())),n}};Ii.default=Ec});var ag=p(xi=>{"use strict";var eM=xi&&xi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(xi,"__esModule",{value:!0});var tM=eM($t()),wc=class extends tM.default{patternBetween(){return/^\s*(至|到|\-|\~|～|－|ー)\s*$/i}};xi.default=wc});var og=p(Fi=>{"use strict";var rM=Fi&&Fi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Fi,"__esModule",{value:!0});var nM=rM(Jt()),Rc=class extends nM.default{patternBetween(){return/^\s*$/i}};Fi.default=Rc});var ug=p(Te=>{"use strict";var sr=Te&&Te.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Te,"__esModule",{value:!0});Te.createConfiguration=Te.createCasualConfiguration=Te.parseDate=Te.parse=Te.strict=Te.casual=Te.hant=void 0;var Dc=Mt(),iM=sr(js()),sM=er(),aM=sr(Zy()),oM=sr(Qy()),uM=sr(eg()),lM=sr(rg()),cM=sr(ng()),dM=sr(sg()),fM=sr(ag()),pM=sr(og());Te.hant=new Dc.Chrono(Mc());Te.casual=new Dc.Chrono(Mc());Te.strict=new Dc.Chrono(Oc());function hM(r,e,t){return Te.casual.parse(r,e,t)}Te.parse=hM;function mM(r,e,t){return Te.casual.parseDate(r,e,t)}Te.parseDate=mM;function Mc(){let r=Oc();return r.parsers.unshift(new aM.default),r}Te.createCasualConfiguration=Mc;function Oc(){let r=sM.includeCommonConfiguration({parsers:[new oM.default,new lM.default,new dM.default,new cM.default,new uM.default],refiners:[new fM.default,new pM.default]});return r.refiners=r.refiners.filter(e=>!(e instanceof iM.default)),r}Te.createConfiguration=Oc});var fg=p(Ui=>{"use strict";var yM=Ui&&Ui.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ui,"__esModule",{value:!0});var gM=yM(X()),_M=R(),TM=1,lg=2,bM=3,cg=4,dg=5,vM=6,Pc=class extends _M.AbstractParserWithWordBoundaryChecking{innerPattern(e){return new RegExp("(\u73B0\u5728|\u7ACB(?:\u523B|\u5373)|\u5373\u523B)|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s|,|\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?","i")}innerExtract(e,t){let n=t.index,i=e.createParsingResult(n,t[0]),s=gM.default(e.refDate),a=s;if(t[TM])i.start.imply("hour",s.hour()),i.start.imply("minute",s.minute()),i.start.imply("second",s.second()),i.start.imply("millisecond",s.millisecond());else if(t[lg]){let o=t[lg],u=t[bM];o=="\u660E"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u540E"?a=a.add(2,"day"):o=="\u5927\u540E"&&(a=a.add(3,"day")),u=="\u65E9"?i.start.imply("hour",6):u=="\u665A"&&(i.start.imply("hour",22),i.start.imply("meridiem",1))}else if(t[cg]){let u=t[cg][0];u=="\u65E9"||u=="\u4E0A"?i.start.imply("hour",6):u=="\u4E0B"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):u=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):u=="\u591C"||u=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):u=="\u51CC"&&i.start.imply("hour",0)}else if(t[dg]){let o=t[dg];o=="\u660E"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u540E"?a=a.add(2,"day"):o=="\u5927\u540E"&&(a=a.add(3,"day"));let u=t[vM];if(u){let l=u[0];l=="\u65E9"||l=="\u4E0A"?i.start.imply("hour",6):l=="\u4E0B"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):l=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):l=="\u591C"||l=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):l=="\u51CC"&&i.start.imply("hour",0)}}return i.start.assign("day",a.date()),i.start.assign("month",a.month()+1),i.start.assign("year",a.year()),i}};Ui.default=Pc});var wn=p(Ze=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});Ze.zhStringToYear=Ze.zhStringToNumber=Ze.WEEKDAY_OFFSET=Ze.NUMBER=void 0;Ze.NUMBER={\u96F6:0,"\u3007":0,\u4E00:1,\u4E8C:2,\u4E24:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6,\u4E03:7,\u516B:8,\u4E5D:9,\u5341:10};Ze.WEEKDAY_OFFSET={\u5929:0,\u65E5:0,\u4E00:1,\u4E8C:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6};function EM(r){let e=0;for(let t=0;t<r.length;t++){let n=r[t];n==="\u5341"?e=e===0?Ze.NUMBER[n]:e*Ze.NUMBER[n]:e+=Ze.NUMBER[n]}return e}Ze.zhStringToNumber=EM;function wM(r){let e="";for(let t=0;t<r.length;t++){let n=r[t];e=e+Ze.NUMBER[n]}return parseInt(e)}Ze.zhStringToYear=wM});var hg=p(qi=>{"use strict";var RM=qi&&qi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(qi,"__esModule",{value:!0});var DM=RM(X()),MM=R(),Hr=wn(),Ac=1,pg=2,kc=3,Nc=class extends MM.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(\\d{2,4}|["+Object.keys(Hr.NUMBER).join("")+"]{4}|["+Object.keys(Hr.NUMBER).join("")+"]{2})?(?:\\s*)(?:\u5E74)?(?:[\\s|,|\uFF0C]*)(\\d{1,2}|["+Object.keys(Hr.NUMBER).join("")+"]{1,3})(?:\\s*)(?:\u6708)(?:\\s*)(\\d{1,2}|["+Object.keys(Hr.NUMBER).join("")+"]{1,3})?(?:\\s*)(?:\u65E5|\u53F7)?")}innerExtract(e,t){let n=DM.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=parseInt(t[pg]);if(isNaN(s)&&(s=Hr.zhStringToNumber(t[pg])),i.start.assign("month",s),t[kc]){let a=parseInt(t[kc]);isNaN(a)&&(a=Hr.zhStringToNumber(t[kc])),i.start.assign("day",a)}else i.start.imply("day",n.date());if(t[Ac]){let a=parseInt(t[Ac]);isNaN(a)&&(a=Hr.zhStringToYear(t[Ac])),i.start.assign("year",a)}else i.start.imply("year",n.year());return i}};qi.default=Nc});var yg=p(Wi=>{"use strict";var OM=Wi&&Wi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Wi,"__esModule",{value:!0});var PM=OM(X()),AM=R(),mg=wn(),kM=new RegExp("(\\d+|["+Object.keys(mg.NUMBER).join("")+"]+|\u534A|\u51E0)(?:\\s*)(?:\u4E2A)?(\u79D2(?:\u949F)?|\u5206\u949F|\u5C0F\u65F6|\u949F|\u65E5|\u5929|\u661F\u671F|\u793C\u62DC|\u6708|\u5E74)(?:(?:\u4E4B|\u8FC7)?\u540E|(?:\u4E4B)?\u5185)","i"),Sc=1,NM=2,Cc=class extends AM.AbstractParserWithWordBoundaryChecking{innerPattern(){return kM}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=parseInt(t[Sc]);if(isNaN(i)&&(i=mg.zhStringToNumber(t[Sc])),isNaN(i)){let u=t[Sc];if(u==="\u51E0")i=3;else if(u==="\u534A")i=.5;else return null}let s=PM.default(e.refDate),o=t[NM][0];return o.match(/[日天星礼月年]/)?(o=="\u65E5"||o=="\u5929"?s=s.add(i,"d"):o=="\u661F"||o=="\u793C"?s=s.add(i*7,"d"):o=="\u6708"?s=s.add(i,"month"):o=="\u5E74"&&(s=s.add(i,"year")),n.start.assign("year",s.year()),n.start.assign("month",s.month()+1),n.start.assign("day",s.date()),n):(o=="\u79D2"?s=s.add(i,"second"):o=="\u5206"?s=s.add(i,"minute"):(o=="\u5C0F"||o=="\u949F")&&(s=s.add(i,"hour")),n.start.imply("year",s.year()),n.start.imply("month",s.month()+1),n.start.imply("day",s.date()),n.start.assign("hour",s.hour()),n.start.assign("minute",s.minute()),n.start.assign("second",s.second()),n)}};Wi.default=Cc});var _g=p(Li=>{"use strict";var SM=Li&&Li.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Li,"__esModule",{value:!0});var CM=SM(X()),IM=R(),gg=wn(),xM=new RegExp("(?<prefix>\u4E0A|\u4E0B|\u8FD9)(?:\u4E2A)?(?:\u661F\u671F|\u793C\u62DC|\u5468)(?<weekday>"+Object.keys(gg.WEEKDAY_OFFSET).join("|")+")"),Ic=class extends IM.AbstractParserWithWordBoundaryChecking{innerPattern(){return xM}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=gg.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=null,o=t.groups.prefix;o=="\u4E0A"?a="last":o=="\u4E0B"?a="next":o=="\u8FD9"&&(a="this");let u=CM.default(e.refDate),l=!1,c=u.day();return a=="last"||a=="past"?(u=u.day(s-7),l=!0):a=="next"?(u=u.day(s+7),l=!0):a=="this"?u=u.day(s):Math.abs(s-7-c)<Math.abs(s-c)?u=u.day(s-7):Math.abs(s+7-c)<Math.abs(s-c)?u=u.day(s+7):u=u.day(s),n.start.assign("weekday",s),l?(n.start.assign("day",u.date()),n.start.assign("month",u.month()+1),n.start.assign("year",u.year())):(n.start.imply("day",u.date()),n.start.imply("month",u.month()+1),n.start.imply("year",u.year())),n}};Li.default=Ic});var Tg=p(Yi=>{"use strict";var FM=Yi&&Yi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Yi,"__esModule",{value:!0});var UM=FM(X()),qM=R(),Tt=wn(),WM=new RegExp("(?:\u4ECE|\u81EA)?(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(Tt.NUMBER).join("")+"]+)(?:\\s*)(?:\u70B9|\u65F6|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(Tt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(Tt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),LM=new RegExp("(?:^\\s*(?:\u5230|\u81F3|\\-|\\\u2013|\\~|\\\u301C)\\s*)(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(Tt.NUMBER).join("")+"]+)(?:\\s*)(?:\u70B9|\u65F6|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(Tt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(Tt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),ha=1,ma=2,ya=3,ga=4,_a=5,Ta=6,_t=7,Rn=8,ba=9,xc=class extends qM.AbstractParserWithWordBoundaryChecking{innerPattern(){return WM}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;let n=UM.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=n.clone();if(t[ha]){let c=t[ha];c=="\u660E"?n.hour()>1&&s.add(1,"day"):c=="\u6628"?s.add(-1,"day"):c=="\u524D"?s.add(-2,"day"):c=="\u5927\u524D"?s.add(-3,"day"):c=="\u540E"?s.add(2,"day"):c=="\u5927\u540E"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else if(t[ga]){let c=t[ga];c=="\u660E"?s.add(1,"day"):c=="\u6628"?s.add(-1,"day"):c=="\u524D"?s.add(-2,"day"):c=="\u5927\u524D"?s.add(-3,"day"):c=="\u540E"?s.add(2,"day"):c=="\u5927\u540E"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else i.start.imply("day",s.date()),i.start.imply("month",s.month()+1),i.start.imply("year",s.year());let a=0,o=0,u=-1;if(t[Rn]){let c=parseInt(t[Rn]);if(isNaN(c)&&(c=Tt.zhStringToNumber(t[Rn])),c>=60)return null;i.start.assign("second",c)}if(a=parseInt(t[Ta]),isNaN(a)&&(a=Tt.zhStringToNumber(t[Ta])),t[_t]?t[_t]=="\u534A"?o=30:t[_t]=="\u6B63"||t[_t]=="\u6574"?o=0:(o=parseInt(t[_t]),isNaN(o)&&(o=Tt.zhStringToNumber(t[_t]))):a>100&&(o=a%100,a=Math.floor(a/100)),o>=60||a>24)return null;if(a>=12&&(u=1),t[ba]){if(a>12)return null;let c=t[ba][0].toLowerCase();c=="a"&&(u=0,a==12&&(a=0)),c=="p"&&(u=1,a!=12&&(a+=12))}else if(t[ma]){let d=t[ma][0];d=="\u65E9"?(u=0,a==12&&(a=0)):d=="\u665A"&&(u=1,a!=12&&(a+=12))}else if(t[ya]){let d=t[ya][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}else if(t[_a]){let d=t[_a][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}if(i.start.assign("hour",a),i.start.assign("minute",o),u>=0?i.start.assign("meridiem",u):a<12?i.start.imply("meridiem",0):i.start.imply("meridiem",1),t=LM.exec(e.text.substring(i.index+i.text.length)),!t)return i.text.match(/^\d+$/)?null:i;let l=s.clone();if(i.end=e.createParsingComponents(),t[ha]){let c=t[ha];c=="\u660E"?n.hour()>1&&l.add(1,"day"):c=="\u6628"?l.add(-1,"day"):c=="\u524D"?l.add(-2,"day"):c=="\u5927\u524D"?l.add(-3,"day"):c=="\u540E"?l.add(2,"day"):c=="\u5927\u540E"&&l.add(3,"day"),i.end.assign("day",l.date()),i.end.assign("month",l.month()+1),i.end.assign("year",l.year())}else if(t[ga]){let c=t[ga];c=="\u660E"?l.add(1,"day"):c=="\u6628"?l.add(-1,"day"):c=="\u524D"?l.add(-2,"day"):c=="\u5927\u524D"?l.add(-3,"day"):c=="\u540E"?l.add(2,"day"):c=="\u5927\u540E"&&l.add(3,"day"),i.end.assign("day",l.date()),i.end.assign("month",l.month()+1),i.end.assign("year",l.year())}else i.end.imply("day",l.date()),i.end.imply("month",l.month()+1),i.end.imply("year",l.year());if(a=0,o=0,u=-1,t[Rn]){let c=parseInt(t[Rn]);if(isNaN(c)&&(c=Tt.zhStringToNumber(t[Rn])),c>=60)return null;i.end.assign("second",c)}if(a=parseInt(t[Ta]),isNaN(a)&&(a=Tt.zhStringToNumber(t[Ta])),t[_t]?t[_t]=="\u534A"?o=30:t[_t]=="\u6B63"||t[_t]=="\u6574"?o=0:(o=parseInt(t[_t]),isNaN(o)&&(o=Tt.zhStringToNumber(t[_t]))):a>100&&(o=a%100,a=Math.floor(a/100)),o>=60||a>24)return null;if(a>=12&&(u=1),t[ba]){if(a>12)return null;let c=t[ba][0].toLowerCase();c=="a"&&(u=0,a==12&&(a=0)),c=="p"&&(u=1,a!=12&&(a+=12)),i.start.isCertain("meridiem")||(u==0?(i.start.imply("meridiem",0),i.start.get("hour")==12&&i.start.assign("hour",0)):(i.start.imply("meridiem",1),i.start.get("hour")!=12&&i.start.assign("hour",i.start.get("hour")+12)))}else if(t[ma]){let d=t[ma][0];d=="\u65E9"?(u=0,a==12&&(a=0)):d=="\u665A"&&(u=1,a!=12&&(a+=12))}else if(t[ya]){let d=t[ya][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}else if(t[_a]){let d=t[_a][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}return i.text=i.text+t[0],i.end.assign("hour",a),i.end.assign("minute",o),u>=0?i.end.assign("meridiem",u):i.start.isCertain("meridiem")&&i.start.get("meridiem")==1&&i.start.get("hour")>a?i.end.imply("meridiem",0):a>12&&i.end.imply("meridiem",1),i.end.date().getTime()<i.start.date().getTime()&&i.end.imply("day",i.end.get("day")+1),i}};Yi.default=xc});var vg=p($i=>{"use strict";var YM=$i&&$i.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty($i,"__esModule",{value:!0});var $M=YM(X()),jM=R(),bg=wn(),BM=new RegExp("(?:\u661F\u671F|\u793C\u62DC|\u5468)(?<weekday>"+Object.keys(bg.WEEKDAY_OFFSET).join("|")+")"),Fc=class extends jM.AbstractParserWithWordBoundaryChecking{innerPattern(){return BM}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=bg.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=$M.default(e.refDate),o=!1,u=a.day();return Math.abs(s-7-u)<Math.abs(s-u)?a=a.day(s-7):Math.abs(s+7-u)<Math.abs(s-u)?a=a.day(s+7):a=a.day(s),n.start.assign("weekday",s),o?(n.start.assign("day",a.date()),n.start.assign("month",a.month()+1),n.start.assign("year",a.year())):(n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())),n}};$i.default=Fc});var Eg=p(ji=>{"use strict";var GM=ji&&ji.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ji,"__esModule",{value:!0});var HM=GM($t()),Uc=class extends HM.default{patternBetween(){return/^\s*(至|到|-|~|～|－|ー)\s*$/i}};ji.default=Uc});var wg=p(Bi=>{"use strict";var zM=Bi&&Bi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Bi,"__esModule",{value:!0});var KM=zM(Jt()),qc=class extends KM.default{patternBetween(){return/^\s*$/i}};Bi.default=qc});var Rg=p(be=>{"use strict";var ar=be&&be.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(be,"__esModule",{value:!0});be.createConfiguration=be.createCasualConfiguration=be.parseDate=be.parse=be.strict=be.casual=be.hans=void 0;var Wc=Mt(),VM=ar(js()),ZM=er(),XM=ar(fg()),QM=ar(hg()),JM=ar(yg()),eO=ar(_g()),tO=ar(Tg()),rO=ar(vg()),nO=ar(Eg()),iO=ar(wg());be.hans=new Wc.Chrono(Lc());be.casual=new Wc.Chrono(Lc());be.strict=new Wc.Chrono(Yc());function sO(r,e,t){return be.casual.parse(r,e,t)}be.parse=sO;function aO(r,e,t){return be.casual.parseDate(r,e,t)}be.parseDate=aO;function Lc(){let r=Yc();return r.parsers.unshift(new XM.default),r}be.createCasualConfiguration=Lc;function Yc(){let r=ZM.includeCommonConfiguration({parsers:[new QM.default,new eO.default,new rO.default,new tO.default,new JM.default],refiners:[new nO.default,new iO.default]});return r.refiners=r.refiners.filter(e=>!(e instanceof VM.default)),r}be.createConfiguration=Yc});var Mg=p(st=>{"use strict";var Dg=st&&st.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),oO=st&&st.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),uO=st&&st.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Dg(e,r,t)},lO=st&&st.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Dg(e,r,t);return oO(e,r),e};Object.defineProperty(st,"__esModule",{value:!0});st.hans=void 0;uO(ug(),st);st.hans=lO(Rg())});var Xe=p(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.parseTimeUnits=U.TIME_UNITS_PATTERN=U.parseYear=U.YEAR_PATTERN=U.parseOrdinalNumberPattern=U.ORDINAL_NUMBER_PATTERN=U.parseNumberPattern=U.NUMBER_PATTERN=U.TIME_UNIT_DICTIONARY=U.ORDINAL_WORD_DICTIONARY=U.INTEGER_WORD_DICTIONARY=U.MONTH_DICTIONARY=U.FULL_MONTH_NAME_DICTIONARY=U.WEEKDAY_DICTIONARY=U.REGEX_PARTS=void 0;var va=se(),cO=Fe();U.REGEX_PARTS={leftBoundary:"([^\\p{L}\\p{N}_]|^)",rightBoundary:"(?=[^\\p{L}\\p{N}_]|$)",flags:"iu"};U.WEEKDAY_DICTIONARY={\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435:0,\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u044F:0,\u0432\u0441\u043A:0,"\u0432\u0441\u043A.":0,\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A:1,\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A\u0430:1,\u043F\u043D:1,"\u043F\u043D.":1,\u0432\u0442\u043E\u0440\u043D\u0438\u043A:2,\u0432\u0442\u043E\u0440\u043D\u0438\u043A\u0430:2,\u0432\u0442:2,"\u0432\u0442.":2,\u0441\u0440\u0435\u0434\u0430:3,\u0441\u0440\u0435\u0434\u044B:3,\u0441\u0440\u0435\u0434\u0443:3,\u0441\u0440:3,"\u0441\u0440.":3,\u0447\u0435\u0442\u0432\u0435\u0440\u0433:4,\u0447\u0435\u0442\u0432\u0435\u0440\u0433\u0430:4,\u0447\u0442:4,"\u0447\u0442.":4,\u043F\u044F\u0442\u043D\u0438\u0446\u0430:5,\u043F\u044F\u0442\u043D\u0438\u0446\u0443:5,\u043F\u044F\u0442\u043D\u0438\u0446\u044B:5,\u043F\u0442:5,"\u043F\u0442.":5,\u0441\u0443\u0431\u0431\u043E\u0442\u0430:6,\u0441\u0443\u0431\u0431\u043E\u0442\u0443:6,\u0441\u0443\u0431\u0431\u043E\u0442\u044B:6,\u0441\u0431:6,"\u0441\u0431.":6};U.FULL_MONTH_NAME_DICTIONARY={\u044F\u043D\u0432\u0430\u0440\u044C:1,\u044F\u043D\u0432\u0430\u0440\u044F:1,\u044F\u043D\u0432\u0430\u0440\u0435:1,\u0444\u0435\u0432\u0440\u044F\u043B\u044C:2,\u0444\u0435\u0432\u0440\u044F\u043B\u044F:2,\u0444\u0435\u0432\u0440\u044F\u043B\u0435:2,\u043C\u0430\u0440\u0442:3,\u043C\u0430\u0440\u0442\u0430:3,\u043C\u0430\u0440\u0442\u0435:3,\u0430\u043F\u0440\u0435\u043B\u044C:4,\u0430\u043F\u0440\u0435\u043B\u044F:4,\u0430\u043F\u0440\u0435\u043B\u0435:4,\u043C\u0430\u0439:5,\u043C\u0430\u044F:5,\u043C\u0430\u0435:5,\u0438\u044E\u043D\u044C:6,\u0438\u044E\u043D\u044F:6,\u0438\u044E\u043D\u0435:6,\u0438\u044E\u043B\u044C:7,\u0438\u044E\u043B\u044F:7,\u0438\u044E\u043B\u0435:7,\u0430\u0432\u0433\u0443\u0441\u0442:8,\u0430\u0432\u0433\u0443\u0441\u0442\u0430:8,\u0430\u0432\u0433\u0443\u0441\u0442\u0435:8,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044C:9,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044F:9,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u0435:9,\u043E\u043A\u0442\u044F\u0431\u0440\u044C:10,\u043E\u043A\u0442\u044F\u0431\u0440\u044F:10,\u043E\u043A\u0442\u044F\u0431\u0440\u0435:10,\u043D\u043E\u044F\u0431\u0440\u044C:11,\u043D\u043E\u044F\u0431\u0440\u044F:11,\u043D\u043E\u044F\u0431\u0440\u0435:11,\u0434\u0435\u043A\u0430\u0431\u0440\u044C:12,\u0434\u0435\u043A\u0430\u0431\u0440\u044F:12,\u0434\u0435\u043A\u0430\u0431\u0440\u0435:12};U.MONTH_DICTIONARY=Object.assign(Object.assign({},U.FULL_MONTH_NAME_DICTIONARY),{\u044F\u043D\u0432:1,"\u044F\u043D\u0432.":1,\u0444\u0435\u0432:2,"\u0444\u0435\u0432.":2,\u043C\u0430\u0440:3,"\u043C\u0430\u0440.":3,\u0430\u043F\u0440:4,"\u0430\u043F\u0440.":4,\u0430\u0432\u0433:8,"\u0430\u0432\u0433.":8,\u0441\u0435\u043D:9,"\u0441\u0435\u043D.":9,\u043E\u043A\u0442:10,"\u043E\u043A\u0442.":10,\u043D\u043E\u044F:11,"\u043D\u043E\u044F.":11,\u0434\u0435\u043A:12,"\u0434\u0435\u043A.":12});U.INTEGER_WORD_DICTIONARY={\u043E\u0434\u0438\u043D:1,\u043E\u0434\u043D\u0430:1,\u043E\u0434\u043D\u043E\u0439:1,\u043E\u0434\u043D\u0443:1,\u0434\u0432\u0435:2,\u0434\u0432\u0430:2,\u0434\u0432\u0443\u0445:2,\u0442\u0440\u0438:3,\u0442\u0440\u0435\u0445:3,\u0442\u0440\u0451\u0445:3,\u0447\u0435\u0442\u044B\u0440\u0435:4,\u0447\u0435\u0442\u044B\u0440\u0435\u0445:4,\u0447\u0435\u0442\u044B\u0440\u0451\u0445:4,\u043F\u044F\u0442\u044C:5,\u043F\u044F\u0442\u0438:5,\u0448\u0435\u0441\u0442\u044C:6,\u0448\u0435\u0441\u0442\u0438:6,\u0441\u0435\u043C\u044C:7,\u0441\u0435\u043C\u0438:7,\u0432\u043E\u0441\u0435\u043C\u044C:8,\u0432\u043E\u0441\u0435\u043C\u044C\u043C\u0438:8,\u0434\u0435\u0432\u044F\u0442\u044C:9,\u0434\u0435\u0432\u044F\u0442\u0438:9,\u0434\u0435\u0441\u044F\u0442\u044C:10,\u0434\u0435\u0441\u044F\u0442\u0438:10,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u044C:11,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u0438:11,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u044C:12,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u0438:12};U.ORDINAL_WORD_DICTIONARY={\u043F\u0435\u0440\u0432\u043E\u0435:1,\u043F\u0435\u0440\u0432\u043E\u0433\u043E:1,\u0432\u0442\u043E\u0440\u043E\u0435:2,\u0432\u0442\u043E\u0440\u043E\u0433\u043E:2,\u0442\u0440\u0435\u0442\u044C\u0435:3,\u0442\u0440\u0435\u0442\u044C\u0435\u0433\u043E:3,\u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0435:4,\u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0433\u043E:4,\u043F\u044F\u0442\u043E\u0435:5,\u043F\u044F\u0442\u043E\u0433\u043E:5,\u0448\u0435\u0441\u0442\u043E\u0435:6,\u0448\u0435\u0441\u0442\u043E\u0433\u043E:6,\u0441\u0435\u0434\u044C\u043C\u043E\u0435:7,\u0441\u0435\u0434\u044C\u043C\u043E\u0433\u043E:7,\u0432\u043E\u0441\u044C\u043C\u043E\u0435:8,\u0432\u043E\u0441\u044C\u043C\u043E\u0433\u043E:8,\u0434\u0435\u0432\u044F\u0442\u043E\u0435:9,\u0434\u0435\u0432\u044F\u0442\u043E\u0433\u043E:9,\u0434\u0435\u0441\u044F\u0442\u043E\u0435:10,\u0434\u0435\u0441\u044F\u0442\u043E\u0433\u043E:10,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:11,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:11,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:12,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:12,\u0442\u0440\u0438\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:13,\u0442\u0440\u0438\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:13,\u0447\u0435\u0442\u044B\u0440\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:14,\u0447\u0435\u0442\u044B\u0440\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:14,\u043F\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:15,\u043F\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:15,\u0448\u0435\u0441\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:16,\u0448\u0435\u0441\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:16,\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:17,\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:17,\u0432\u043E\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:18,\u0432\u043E\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:18,\u0434\u0435\u0432\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:19,\u0434\u0435\u0432\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:19,\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u043E\u0435:20,\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:20,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0435":21,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0433\u043E":21,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u0442\u043E\u0440\u043E\u0435":22,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u0442\u043E\u0440\u043E\u0433\u043E":22,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0442\u0440\u0435\u0442\u044C\u0435":23,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0442\u0440\u0435\u0442\u044C\u0435\u0433\u043E":23,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0435":24,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0433\u043E":24,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u044F\u0442\u043E\u0435":25,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u044F\u0442\u043E\u0433\u043E":25,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0448\u0435\u0441\u0442\u043E\u0435":26,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0448\u0435\u0441\u0442\u043E\u0433\u043E":26,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0441\u0435\u0434\u044C\u043C\u043E\u0435":27,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0441\u0435\u0434\u044C\u043C\u043E\u0433\u043E":27,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u043E\u0441\u044C\u043C\u043E\u0435":28,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u043E\u0441\u044C\u043C\u043E\u0433\u043E":28,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0434\u0435\u0432\u044F\u0442\u043E\u0435":29,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0434\u0435\u0432\u044F\u0442\u043E\u0433\u043E":29,\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u043E\u0435:30,\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u043E\u0433\u043E:30,"\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0435":31,"\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0433\u043E":31};U.TIME_UNIT_DICTIONARY={\u0441\u0435\u043A:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u0430:"second",\u0441\u0435\u043A\u0443\u043D\u0434:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u044B:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u0443:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0430:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0438:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u0435\u043A:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0443:"second",\u043C\u0438\u043D:"minute",\u043C\u0438\u043D\u0443\u0442\u0430:"minute",\u043C\u0438\u043D\u0443\u0442:"minute",\u043C\u0438\u043D\u0443\u0442\u044B:"minute",\u043C\u0438\u043D\u0443\u0442\u0443:"minute",\u043C\u0438\u043D\u0443\u0442\u043E\u043A:"minute",\u043C\u0438\u043D\u0443\u0442\u043A\u0438:"minute",\u043C\u0438\u043D\u0443\u0442\u043A\u0443:"minute",\u0447\u0430\u0441:"hour",\u0447\u0430\u0441\u043E\u0432:"hour",\u0447\u0430\u0441\u0430:"hour",\u0447\u0430\u0441\u0443:"hour",\u0447\u0430\u0441\u0438\u043A\u043E\u0432:"hour",\u0447\u0430\u0441\u0438\u043A\u0430:"hour",\u0447\u0430\u0441\u0438\u043A\u0435:"hour",\u0447\u0430\u0441\u0438\u043A:"hour",\u0434\u0435\u043D\u044C:"d",\u0434\u043D\u044F:"d",\u0434\u043D\u0435\u0439:"d",\u0441\u0443\u0442\u043E\u043A:"d",\u0441\u0443\u0442\u043A\u0438:"d",\u043D\u0435\u0434\u0435\u043B\u044F:"week",\u043D\u0435\u0434\u0435\u043B\u0435:"week",\u043D\u0435\u0434\u0435\u043B\u0438:"week",\u043D\u0435\u0434\u0435\u043B\u044E:"week",\u043D\u0435\u0434\u0435\u043B\u044C:"week",\u043D\u0435\u0434\u0435\u043B\u044C\u043A\u0435:"week",\u043D\u0435\u0434\u0435\u043B\u044C\u043A\u0438:"week",\u043D\u0435\u0434\u0435\u043B\u0435\u043A:"week",\u043C\u0435\u0441\u044F\u0446:"month",\u043C\u0435\u0441\u044F\u0446\u0435:"month",\u043C\u0435\u0441\u044F\u0446\u0435\u0432:"month",\u043C\u0435\u0441\u044F\u0446\u0430:"month",\u043A\u0432\u0430\u0440\u0442\u0430\u043B:"quarter",\u043A\u0432\u0430\u0440\u0442\u0430\u043B\u0435:"quarter",\u043A\u0432\u0430\u0440\u0442\u0430\u043B\u043E\u0432:"quarter",\u0433\u043E\u0434:"year",\u0433\u043E\u0434\u0430:"year",\u0433\u043E\u0434\u0443:"year",\u0433\u043E\u0434\u043E\u0432:"year",\u043B\u0435\u0442:"year",\u0433\u043E\u0434\u0438\u043A:"year",\u0433\u043E\u0434\u0438\u043A\u0430:"year",\u0433\u043E\u0434\u0438\u043A\u043E\u0432:"year"};U.NUMBER_PATTERN=`(?:${va.matchAnyPattern(U.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|\u043F\u043E\u043B|\u043D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u043E|\u043F\u0430\u0440(?:\u044B|\u0443)|\\s{0,3})`;function Pg(r){let e=r.toLowerCase();return U.INTEGER_WORD_DICTIONARY[e]!==void 0?U.INTEGER_WORD_DICTIONARY[e]:e.match(/несколько/)?3:e.match(/пол/)?.5:e.match(/пар/)?2:e===""?1:parseFloat(e)}U.parseNumberPattern=Pg;U.ORDINAL_NUMBER_PATTERN=`(?:${va.matchAnyPattern(U.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:\u0433\u043E|\u043E\u0433\u043E|\u0435|\u043E\u0435)?)`;function dO(r){let e=r.toLowerCase();return U.ORDINAL_WORD_DICTIONARY[e]!==void 0?U.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}U.parseOrdinalNumberPattern=dO;var $c="(?:\\s+(?:\u0433\u043E\u0434\u0443|\u0433\u043E\u0434\u0430|\u0433\u043E\u0434|\u0433|\u0433.))?";U.YEAR_PATTERN=`(?:[1-9][0-9]{0,3}${$c}\\s*(?:\u043D.\u044D.|\u0434\u043E \u043D.\u044D.|\u043D. \u044D.|\u0434\u043E \u043D. \u044D.)|[1-2][0-9]{3}${$c}|[5-9][0-9]${$c})`;function fO(r){if(/(год|года|г|г.)/i.test(r)&&(r=r.replace(/(год|года|г|г.)/i,"")),/(до н.э.|до н. э.)/i.test(r))return r=r.replace(/(до н.э.|до н. э.)/i,""),-parseInt(r);if(/(н. э.|н.э.)/i.test(r))return r=r.replace(/(н. э.|н.э.)/i,""),parseInt(r);let e=parseInt(r);return cO.findMostLikelyADYear(e)}U.parseYear=fO;var Ag=`(${U.NUMBER_PATTERN})\\s{0,3}(${va.matchAnyPattern(U.TIME_UNIT_DICTIONARY)})`,Og=new RegExp(Ag,"i");U.TIME_UNITS_PATTERN=va.repeatedTimeunitPattern("(?:(?:\u043E\u043A\u043E\u043B\u043E|\u043F\u0440\u0438\u043C\u0435\u0440\u043D\u043E)\\s{0,3})?",Ag);function pO(r){let e={},t=r,n=Og.exec(t);for(;n;)hO(e,n),t=t.substring(n[0].length).trim(),n=Og.exec(t);return e}U.parseTimeUnits=pO;function hO(r,e){let t=Pg(e[1]),n=U.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Ng=p(Bc=>{"use strict";Object.defineProperty(Bc,"__esModule",{value:!0});var Gi=Xe(),mO=pe(),yO=R(),kg=`(?:(?:\u043E\u043A\u043E\u043B\u043E|\u043F\u0440\u0438\u043C\u0435\u0440\u043D\u043E)\\s*(?:~\\s*)?)?(${Gi.TIME_UNITS_PATTERN})${Gi.REGEX_PARTS.rightBoundary}`,gO=new RegExp(`(?:\u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0435|\u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0438)\\s*${kg}`,Gi.REGEX_PARTS.flags),_O=new RegExp(kg,"i"),jc=class extends yO.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Gi.REGEX_PARTS.leftBoundary}innerPattern(e){return e.option.forwardDate?_O:gO}innerExtract(e,t){let n=Gi.parseTimeUnits(t[1]);return mO.ParsingComponents.createRelativeFromReference(e.reference,n)}};Bc.default=jc});var Fg=p(Hc=>{"use strict";Object.defineProperty(Hc,"__esModule",{value:!0});var TO=Fe(),Hi=Xe(),xg=Xe(),Ea=Xe(),bO=se(),vO=R(),EO=new RegExp(`(?:\u0441)?\\s*(${Ea.ORDINAL_NUMBER_PATTERN})(?:\\s{0,3}(?:\u043F\u043E|-|\u2013|\u0434\u043E)?\\s{0,3}(${Ea.ORDINAL_NUMBER_PATTERN}))?(?:-|\\/|\\s{0,3}(?:of)?\\s{0,3})(${bO.matchAnyPattern(Hi.MONTH_DICTIONARY)})(?:(?:-|\\/|,?\\s{0,3})(${xg.YEAR_PATTERN}(?![^\\s]\\d)))?${Hi.REGEX_PARTS.rightBoundary}`,Hi.REGEX_PARTS.flags),Sg=1,Cg=2,wO=3,Ig=4,Gc=class extends vO.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Hi.REGEX_PARTS.leftBoundary}innerPattern(){return EO}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Hi.MONTH_DICTIONARY[t[wO].toLowerCase()],s=Ea.parseOrdinalNumberPattern(t[Sg]);if(s>31)return t.index=t.index+t[Sg].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Ig]){let a=xg.parseYear(t[Ig]);n.start.assign("year",a)}else{let a=TO.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Cg]){let a=Ea.parseOrdinalNumberPattern(t[Cg]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Hc.default=Gc});var Wg=p(Kc=>{"use strict";Object.defineProperty(Kc,"__esModule",{value:!0});var zi=Xe(),RO=Fe(),DO=se(),qg=Xe(),MO=R(),OO=new RegExp(`((?:\u0432)\\s*)?(${DO.matchAnyPattern(zi.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${qg.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,zi.REGEX_PARTS.flags),PO=2,Ug=3,zc=class extends MO.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return zi.REGEX_PARTS.leftBoundary}innerPattern(){return OO}innerExtract(e,t){let n=t[PO].toLowerCase();if(t[0].length<=3&&!zi.FULL_MONTH_NAME_DICTIONARY[n])return null;let i=e.createParsingResult(t.index,t.index+t[0].length);i.start.imply("day",1);let s=zi.MONTH_DICTIONARY[n];if(i.start.assign("month",s),t[Ug]){let a=qg.parseYear(t[Ug]);i.start.assign("year",a)}else{let a=RO.findYearClosestToRef(e.refDate,1,s);i.start.imply("year",a)}return i}};Kc.default=zc});var Yg=p(Zc=>{"use strict";Object.defineProperty(Zc,"__esModule",{value:!0});var wa=we(),AO=Wr(),Lg=Xe(),Vc=class extends AO.AbstractTimeExpressionParser{constructor(e){super(e)}patternFlags(){return Lg.REGEX_PARTS.flags}primaryPatternLeftBoundary(){return"(^|\\s|T|(?:[^\\p{L}\\p{N}_]))"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|\u0434\u043E|\u0438|\u043F\u043E|\\?)\\s*"}primaryPrefix(){return"(?:(?:\u0432|\u0441)\\s*)??"}primarySuffix(){return`(?:\\s*(?:\u0443\u0442\u0440\u0430|\u0432\u0435\u0447\u0435\u0440\u0430|\u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u043B\u0443\u0434\u043D\u044F))?(?!\\/)${Lg.REGEX_PARTS.rightBoundary}`}extractPrimaryTimeComponents(e,t){let n=super.extractPrimaryTimeComponents(e,t);if(n){if(t[0].endsWith("\u0432\u0435\u0447\u0435\u0440\u0430")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",wa.Meridiem.PM)):i<6&&n.assign("meridiem",wa.Meridiem.AM)}if(t[0].endsWith("\u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u043B\u0443\u0434\u043D\u044F")){n.assign("meridiem",wa.Meridiem.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}t[0].endsWith("\u0443\u0442\u0440\u0430")&&(n.assign("meridiem",wa.Meridiem.AM),n.get("hour")<12&&n.assign("hour",n.get("hour")))}return n}};Zc.default=Vc});var $g=p(Qc=>{"use strict";Object.defineProperty(Qc,"__esModule",{value:!0});var Ra=Xe(),kO=pe(),NO=R(),SO=ht(),CO=new RegExp(`(${Ra.TIME_UNITS_PATTERN})\\s{0,5}\u043D\u0430\u0437\u0430\u0434(?=(?:\\W|$))`,Ra.REGEX_PARTS.flags),Xc=class extends NO.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Ra.REGEX_PARTS.leftBoundary}innerPattern(){return CO}innerExtract(e,t){let n=Ra.parseTimeUnits(t[1]),i=SO.reverseTimeUnits(n);return kO.ParsingComponents.createRelativeFromReference(e.reference,i)}};Qc.default=Xc});var jg=p(Ki=>{"use strict";var IO=Ki&&Ki.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ki,"__esModule",{value:!0});var xO=IO($t()),Jc=class extends xO.default{patternBetween(){return/^\s*(и до|и по|до|по|-)\s*$/i}};Ki.default=Jc});var Bg=p(Vi=>{"use strict";var FO=Vi&&Vi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Vi,"__esModule",{value:!0});var UO=FO(Jt()),ed=class extends UO.default{patternBetween(){return new RegExp("^\\s*(T|\u0432|,|-)?\\s*$")}};Vi.default=ed});var Gg=p(or=>{"use strict";var qO=or&&or.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),WO=or&&or.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),LO=or&&or.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&qO(e,r,t);return WO(e,r),e};Object.defineProperty(or,"__esModule",{value:!0});var YO=R(),Zi=LO(rr()),td=Xe(),$O=new RegExp(`(?:\u0441|\u0441\u043E)?\\s*(\u0441\u0435\u0433\u043E\u0434\u043D\u044F|\u0432\u0447\u0435\u0440\u0430|\u0437\u0430\u0432\u0442\u0440\u0430|\u043F\u043E\u0441\u043B\u0435\u0437\u0430\u0432\u0442\u0440\u0430|\u043F\u043E\u0437\u0430\u0432\u0447\u0435\u0440\u0430)${td.REGEX_PARTS.rightBoundary}`,td.REGEX_PARTS.flags),rd=class extends YO.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return td.REGEX_PARTS.leftBoundary}innerPattern(e){return $O}innerExtract(e,t){let n=t[1].toLowerCase(),i=e.createParsingComponents();switch(n){case"\u0441\u0435\u0433\u043E\u0434\u043D\u044F":return Zi.today(e.reference);case"\u0432\u0447\u0435\u0440\u0430":return Zi.yesterday(e.reference);case"\u0437\u0430\u0432\u0442\u0440\u0430":return Zi.tomorrow(e.reference);case"\u043F\u043E\u0441\u043B\u0435\u0437\u0430\u0432\u0442\u0440\u0430":return Zi.theDayAfter(e.reference,2);case"\u043F\u043E\u0437\u0430\u0432\u0447\u0435\u0440\u0430":return Zi.theDayBefore(e.reference,2)}return i}};or.default=rd});var Hg=p(Nt=>{"use strict";var jO=Nt&&Nt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),BO=Nt&&Nt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),GO=Nt&&Nt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&jO(e,r,t);return BO(e,r),e},HO=Nt&&Nt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Nt,"__esModule",{value:!0});var zO=R(),zr=GO(rr()),KO=pt(),VO=HO(X()),nd=Xe(),ZO=new RegExp(`(\u0441\u0435\u0439\u0447\u0430\u0441|\u043F\u0440\u043E\u0448\u043B\u044B\u043C\\s*\u0432\u0435\u0447\u0435\u0440\u043E\u043C|\u043F\u0440\u043E\u0448\u043B\u043E\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u0441\u0435\u0433\u043E\u0434\u043D\u044F\\s*\u043D\u043E\u0447\u044C\u044E|\u044D\u0442\u043E\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u043D\u043E\u0447\u044C\u044E|\u044D\u0442\u0438\u043C \u0443\u0442\u0440\u043E\u043C|\u0443\u0442\u0440\u043E\u043C|\u0443\u0442\u0440\u0430|\u0432\\s*\u043F\u043E\u043B\u0434\u0435\u043D\u044C|\u0432\u0435\u0447\u0435\u0440\u043E\u043C|\u0432\u0435\u0447\u0435\u0440\u0430|\u0432\\s*\u043F\u043E\u043B\u043D\u043E\u0447\u044C)${nd.REGEX_PARTS.rightBoundary}`,nd.REGEX_PARTS.flags),id=class extends zO.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return nd.REGEX_PARTS.leftBoundary}innerPattern(){return ZO}innerExtract(e,t){let n=VO.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();if(i==="\u0441\u0435\u0439\u0447\u0430\u0441")return zr.now(e.reference);if(i==="\u0432\u0435\u0447\u0435\u0440\u043E\u043C"||i==="\u0432\u0435\u0447\u0435\u0440\u0430")return zr.evening(e.reference);if(i.endsWith("\u0443\u0442\u0440\u043E\u043C")||i.endsWith("\u0443\u0442\u0440\u0430"))return zr.morning(e.reference);if(i.match(/в\s*полдень/))return zr.noon(e.reference);if(i.match(/прошлой\s*ночью/))return zr.lastNight(e.reference);if(i.match(/прошлым\s*вечером/))return zr.yesterdayEvening(e.reference);if(i.match(/следующей\s*ночью/)){let a=n.hour()<22?1:2;n=n.add(a,"day"),KO.assignSimilarDate(s,n),s.imply("hour",0)}return i.match(/в\s*полночь/)||i.endsWith("\u043D\u043E\u0447\u044C\u044E")?zr.midnight(e.reference):s}};Nt.default=id});var zg=p(ad=>{"use strict";Object.defineProperty(ad,"__esModule",{value:!0});var Xi=Xe(),XO=se(),QO=R(),JO=Yr(),eP=new RegExp(`(?:(?:,|\\(|\uFF08)\\s*)?(?:\u0432\\s*?)?(?:(\u044D\u0442\u0443|\u044D\u0442\u043E\u0442|\u043F\u0440\u043E\u0448\u043B\u044B\u0439|\u043F\u0440\u043E\u0448\u043B\u0443\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0443\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0433\u043E)\\s*)?(${XO.matchAnyPattern(Xi.WEEKDAY_DICTIONARY)})(?:\\s*(?:,|\\)|\uFF09))?(?:\\s*\u043D\u0430\\s*(\u044D\u0442\u043E\u0439|\u043F\u0440\u043E\u0448\u043B\u043E\u0439|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439)\\s*\u043D\u0435\u0434\u0435\u043B\u0435)?${Xi.REGEX_PARTS.rightBoundary}`,Xi.REGEX_PARTS.flags),tP=1,rP=2,nP=3,sd=class extends QO.AbstractParserWithWordBoundaryChecking{innerPattern(){return eP}patternLeftBoundary(){return Xi.REGEX_PARTS.leftBoundary}innerExtract(e,t){let n=t[rP].toLowerCase(),i=Xi.WEEKDAY_DICTIONARY[n],s=t[tP],a=t[nP],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="\u043F\u0440\u043E\u0448\u043B\u044B\u0439"||o=="\u043F\u0440\u043E\u0448\u043B\u0443\u044E"||o=="\u043F\u0440\u043E\u0448\u043B\u043E\u0439"?u="last":o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0443\u044E"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0433\u043E"?u="next":(o=="\u044D\u0442\u043E\u0442"||o=="\u044D\u0442\u0443"||o=="\u044D\u0442\u043E\u0439")&&(u="this");let l=JO.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};ad.default=sd});var Vg=p(Ji=>{"use strict";var iP=Ji&&Ji.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ji,"__esModule",{value:!0});var Qi=Xe(),Kg=pe(),sP=iP(X()),aP=R(),oP=se(),uP=new RegExp(`(\u0432 \u043F\u0440\u043E\u0448\u043B\u043E\u043C|\u043D\u0430 \u043F\u0440\u043E\u0448\u043B\u043E\u0439|\u043D\u0430 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439|\u0432 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C|\u043D\u0430 \u044D\u0442\u043E\u0439|\u0432 \u044D\u0442\u043E\u043C)\\s*(${oP.matchAnyPattern(Qi.TIME_UNIT_DICTIONARY)})(?=\\s*)${Qi.REGEX_PARTS.rightBoundary}`,Qi.REGEX_PARTS.flags),lP=1,cP=2,od=class extends aP.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Qi.REGEX_PARTS.leftBoundary}innerPattern(){return uP}innerExtract(e,t){let n=t[lP].toLowerCase(),i=t[cP].toLowerCase(),s=Qi.TIME_UNIT_DICTIONARY[i];if(n=="\u043D\u0430 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439"||n=="\u0432 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C"){let u={};return u[s]=1,Kg.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="\u0432 \u043F\u0440\u043E\u0448\u043B\u043E\u043C"||n=="\u043D\u0430 \u043F\u0440\u043E\u0448\u043B\u043E\u0439"){let u={};return u[s]=-1,Kg.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=sP.default(e.reference.instant);return s.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):s.match(/month/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):s.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};Ji.default=od});var Zg=p(ld=>{"use strict";Object.defineProperty(ld,"__esModule",{value:!0});var es=Xe(),dP=pe(),fP=R(),pP=ht(),hP=new RegExp(`(\u044D\u0442\u0438|\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435|\u043F\u0440\u043E\u0448\u043B\u044B\u0435|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0435|\u043F\u043E\u0441\u043B\u0435|\u0447\u0435\u0440\u0435\u0437|\\+|-)\\s*(${es.TIME_UNITS_PATTERN})${es.REGEX_PARTS.rightBoundary}`,es.REGEX_PARTS.flags),ud=class extends fP.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return es.REGEX_PARTS.leftBoundary}innerPattern(){return hP}innerExtract(e,t){let n=t[1].toLowerCase(),i=es.parseTimeUnits(t[2]);switch(n){case"\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435":case"\u043F\u0440\u043E\u0448\u043B\u044B\u0435":case"-":i=pP.reverseTimeUnits(i);break}return dP.ParsingComponents.createRelativeFromReference(e.reference,i)}};ld.default=ud});var Jg=p(Se=>{"use strict";var at=Se&&Se.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Se,"__esModule",{value:!0});Se.createConfiguration=Se.createCasualConfiguration=Se.parseDate=Se.parse=Se.strict=Se.casual=void 0;var mP=at(Ng()),yP=at(Fg()),gP=at(Wg()),_P=at(Yg()),TP=at($g()),bP=at(jg()),vP=at(Bg()),EP=er(),wP=at(Gg()),RP=at(Hg()),DP=at(zg()),MP=at(Vg()),Xg=Mt(),OP=at($r()),PP=at(Zg());Se.casual=new Xg.Chrono(Qg());Se.strict=new Xg.Chrono(cd(!0));function AP(r,e,t){return Se.casual.parse(r,e,t)}Se.parse=AP;function kP(r,e,t){return Se.casual.parseDate(r,e,t)}Se.parseDate=kP;function Qg(){let r=cd(!1);return r.parsers.unshift(new wP.default),r.parsers.unshift(new RP.default),r.parsers.unshift(new gP.default),r.parsers.unshift(new MP.default),r.parsers.unshift(new PP.default),r}Se.createCasualConfiguration=Qg;function cd(r=!0){return EP.includeCommonConfiguration({parsers:[new OP.default(!0),new mP.default,new yP.default,new DP.default,new _P.default(r),new TP.default],refiners:[new vP.default,new bP.default]},r)}Se.createConfiguration=cd});var we=p(L=>{"use strict";var NP=L&&L.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),SP=L&&L.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Dr=L&&L.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&NP(e,r,t);return SP(e,r),e};Object.defineProperty(L,"__esModule",{value:!0});L.parseDate=L.parse=L.casual=L.strict=L.ru=L.zh=L.nl=L.pt=L.ja=L.fr=L.de=L.Meridiem=L.Chrono=L.en=void 0;var dd=Dr(Pu());L.en=dd;var CP=Mt();Object.defineProperty(L,"Chrono",{enumerable:!0,get:function(){return CP.Chrono}});var IP;(function(r){r[r.AM=0]="AM",r[r.PM=1]="PM"})(IP=L.Meridiem||(L.Meridiem={}));var xP=Dr(um());L.de=xP;var FP=Dr(Um());L.fr=FP;var UP=Dr(Hm());L.ja=UP;var qP=Dr(uy());L.pt=qP;var WP=Dr(Hy());L.nl=WP;var LP=Dr(Mg());L.zh=LP;var YP=Dr(Jg());L.ru=YP;L.strict=dd.strict;L.casual=dd.casual;function $P(r,e,t){return L.casual.parse(r,e,t)}L.parse=$P;function jP(r,e,t){return L.casual.parseDate(r,e,t)}L.parseDate=jP});var Ht=p(Pr=>{"use strict";Pr.__esModule=!0;var QP;(function(r){r.AND="AND",r.OR="OR",r.XOR="XOR",r.NOT="NOT"})(QP=Pr.Operators||(Pr.Operators={}));var JP;(function(r){r.OPEN_PARENTHESIS="(",r.CLOSE_PARENTHESIS=")"})(JP=Pr.StructuralCharacters||(Pr.StructuralCharacters={}));var eA;(function(r){r.IDENTIFIER="IDENTIFIER",r.OPERATOR="OPERATOR",r.STRUCTURAL_CHARACTER="STRUCTURAL_CHARACTER",r.EOF="EOF",r.COMMENT="COMMENT"})(eA=Pr.Tokens||(Pr.Tokens={}))});var Rd=p(Ua=>{"use strict";Ua.__esModule=!0;var he=Ht();Ua.OPERATOR_PRECEDENCE={NOT:0,XOR:1,AND:2,OR:3};Ua.VALID_TOKENS={identifierOnly:[{name:he.Tokens.IDENTIFIER},{name:he.Tokens.STRUCTURAL_CHARACTER,value:he.StructuralCharacters.OPEN_PARENTHESIS}],identifierOrNot:[{name:he.Tokens.IDENTIFIER},{name:he.Tokens.STRUCTURAL_CHARACTER,value:he.StructuralCharacters.OPEN_PARENTHESIS},{name:he.Tokens.OPERATOR,value:he.Operators.NOT}],binaryOperator:[{name:he.Tokens.OPERATOR,value:he.Operators.AND},{name:he.Tokens.OPERATOR,value:he.Operators.OR},{name:he.Tokens.OPERATOR,value:he.Operators.XOR}],binaryOperatorOrClose:[{name:he.Tokens.OPERATOR,value:he.Operators.AND},{name:he.Tokens.OPERATOR,value:he.Operators.OR},{name:he.Tokens.OPERATOR,value:he.Operators.XOR},{name:he.Tokens.STRUCTURAL_CHARACTER,value:he.StructuralCharacters.CLOSE_PARENTHESIS}]}});var Dd=p(cr=>{"use strict";cr.__esModule=!0;var kn=Ht();cr.STRUCTURAL_CHARACTERS={"(":kn.StructuralCharacters.OPEN_PARENTHESIS,")":kn.StructuralCharacters.CLOSE_PARENTHESIS};cr.OPERATORS={AND:kn.Operators.AND,OR:kn.Operators.OR,XOR:kn.Operators.XOR,NOT:kn.Operators.NOT};cr.SEPARATORS=new Set([32,9,10,13].map(function(r){return String.fromCodePoint(r)}));cr.QUOTED_IDENTIFIER_DELIMITER=String.fromCodePoint(34);cr.COMMENT_DELIMITER=String.fromCodePoint(35);cr.EOL=String.fromCodePoint(10);cr.ESCAPE_CHARACTER=String.fromCodePoint(92)});var f_=p(dr=>{"use strict";var Md=dr&&dr.__assign||function(){return Md=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Md.apply(this,arguments)};dr.__esModule=!0;var d_=Ht(),Vr=Dd();dr.createResult=function(r,e,t){return{token:Md({name:r},e!==null?{value:e}:{}),remainingString:t}};dr.getComment=function(r){for(var e=r.length,t=0;t<r.length;t+=1){var n=r[t];if(n===Vr.EOL){e=t;break}}return dr.createResult(d_.Tokens.COMMENT,r.slice(0,e),r.slice(e+1))};dr.getQuotedIdentifier=function(r){for(var e=!1,t="",n=null,i=0;i<r.length;i+=1){var s=r[i];if(n===null)s===Vr.QUOTED_IDENTIFIER_DELIMITER?e?t=t.slice(-1)+Vr.QUOTED_IDENTIFIER_DELIMITER:n=i:(s===Vr.ESCAPE_CHARACTER?e=!0:e=!1,t=t+=s);else{if(!Vr.SEPARATORS.has(s)&&!Vr.STRUCTURAL_CHARACTERS[s])throw new Error("Unexpected character: "+s+" Expected ) character or separator");break}}if(n===null)throw new Error("Unexpected end of expression: expected "+Vr.QUOTED_IDENTIFIER_DELIMITER+" character");return dr.createResult(d_.Tokens.IDENTIFIER,t,r.slice(n+1))}});var p_=p(Od=>{"use strict";Od.__esModule=!0;var Nn=Ht(),ot=Dd(),Sn=f_();Od.lex=function(r){for(var e=null,t=null,n=null,i=0;i<r.length;i+=1){var s=r[i];if(e===null){if(!ot.SEPARATORS.has(s)){var a=ot.STRUCTURAL_CHARACTERS[s];if(a){var o=r[i+1];if(a===Nn.StructuralCharacters.CLOSE_PARENTHESIS&&o&&!ot.SEPARATORS.has(o)&&o!==Nn.StructuralCharacters.CLOSE_PARENTHESIS)throw new Error("Unexpected character: "+o+". A closing parenthesis should be followed by another closing parenthesis or whitespace");return Sn.createResult(Nn.Tokens.STRUCTURAL_CHARACTER,ot.STRUCTURAL_CHARACTERS[s],r.slice(i+1))}if(s===ot.QUOTED_IDENTIFIER_DELIMITER)return Sn.getQuotedIdentifier(r.slice(i+1));if(s===ot.COMMENT_DELIMITER)return Sn.getComment(r.slice(i+1));e=i}}else if(ot.SEPARATORS.has(s)||ot.STRUCTURAL_CHARACTERS[s]){t=i,n=s;break}else if(s===ot.QUOTED_IDENTIFIER_DELIMITER||s===ot.COMMENT_DELIMITER)throw new Error("Unexpected character: "+s)}if(e!==null){t=t!=null?t:r.length;var u=r.slice(e,t),l=r.slice(t);if(ot.OPERATORS[u]){if(n&&!ot.SEPARATORS.has(n))throw new Error("Unexpected character: "+n+". Operators should be separated using whitespace");return Sn.createResult(Nn.Tokens.OPERATOR,ot.OPERATORS[u],l)}else return Sn.createResult(Nn.Tokens.IDENTIFIER,u,l)}return Sn.createResult(Nn.Tokens.EOF,null,"")}});var h_=p(fr=>{"use strict";var tA=fr&&fr.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};fr.__esModule=!0;var rA=p_(),Cn=Ht(),qa=Rd();fr.newTokenGenerator=function(r){var e=r;return function(t,n){for(n===void 0&&(n=!1);;){var i=rA.lex(e),s=i.token,a=i.remainingString;if(e=a,s.name!==Cn.Tokens.COMMENT)return fr.validateToken(s,t,n),s}}};fr.getValue=function(r,e){var t=r(qa.VALID_TOKENS.identifierOrNot),n=t.value===Cn.Operators.NOT;n&&(t=r(qa.VALID_TOKENS.identifierOnly));var i=t.name===Cn.Tokens.STRUCTURAL_CHARACTER?e(r,!0):[t];return n?tA(i,[{name:Cn.Tokens.OPERATOR,value:Cn.Operators.NOT}]):i};fr.previousOperatorTakesPrecedent=function(r,e){return qa.OPERATOR_PRECEDENCE[r]<=qa.OPERATOR_PRECEDENCE[e]};fr.validateToken=function(r,e,t){if(t===void 0&&(t=!1),r.name===Cn.Tokens.EOF){if(t)return;throw new Error("Unexpected end of expression")}for(var n=0,i=e;n<i.length;n++){var s=i[n];if(s.name===r.name&&(!s.value||s.value===r.value))return}throw new TypeError("Invalid token")}});var Ad=p(os=>{"use strict";var In=os&&os.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};os.__esModule=!0;var m_=Ht(),y_=Rd(),Wa=h_();os.parse=function(r){if(typeof r!="string")throw new Error("Expected string but received "+typeof r);var e=Wa.newTokenGenerator(r);return Pd(e)};var Pd=function(r,e){e===void 0&&(e=!1);for(var t=In(Wa.getValue(r,Pd)),n=[];;){var i=e?y_.VALID_TOKENS.binaryOperatorOrClose:y_.VALID_TOKENS.binaryOperator,s=r(i,!e);if(s.name===m_.Tokens.EOF||s.name===m_.Tokens.STRUCTURAL_CHARACTER)return In(t,In(n).reverse());for(;n.length;){var a=n[n.length-1]||null;if(a&&Wa.previousOperatorTakesPrecedent(a.value,s.value))t=In(t,[a]),n=n.slice(0,-1);else break}n=In(n,[s]),t=In(t,Wa.getValue(r,Pd))}}});var kd=p(pr=>{"use strict";pr.__esModule=!0;var g_=Ht();pr.andUtil=function(r,e){return r&&e};pr.orUtil=function(r,e){return r||e};pr.xorUtil=function(r,e){return r!==e};pr.notUtil=function(r){return!r};pr.isIdentifier=function(r){var e=r.name,t=r.value;return e===g_.Tokens.IDENTIFIER&&typeof t=="string"};pr.isOperator=function(r){var e=r.name,t=r.value;return e===g_.Tokens.OPERATOR&&typeof t=="string"};pr.throwInvalidExpression=function(r){throw new TypeError("Invalid postfix expression: "+r)}});var __=p(Cd=>{"use strict";var us;Cd.__esModule=!0;var Nd=Ht(),Sd=kd();Cd.OPERATOR_MAP=(us={},us[Nd.Operators.AND]=Sd.andUtil,us[Nd.Operators.OR]=Sd.orUtil,us[Nd.Operators.XOR]=Sd.xorUtil,us)});var b_=p(Xr=>{"use strict";var Id=Xr&&Xr.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};Xr.__esModule=!0;var nA=Ad(),T_=Ht(),iA=__(),Zr=kd();Xr.getEvaluator=function(r){var e=nA.parse(r);return function(t){return Xr.evaluate(e,t)}};Xr.evaluate=function(r,e){if(!Array.isArray(r))throw new Error(r+" should be an array. evaluate takes in a parsed expression. Use in combination with parse or use getEvaluator");var t=r.reduce(function(n,i,s){if(!(i&&(Zr.isIdentifier(i)||Zr.isOperator(i))))throw new Error("Invalid token: "+i+". Found in parsed expression at index "+s);if(i.name===T_.Tokens.IDENTIFIER)return Id(n,[Boolean(e[i.value])]);var a=n[n.length-2],o=n[n.length-1];if(i.value===T_.Operators.NOT)return o===void 0&&Zr.throwInvalidExpression("missing identifier"),Id(n.slice(0,-1),[Zr.notUtil(o)]);(o===void 0||a===void 0)&&Zr.throwInvalidExpression("missing identifier");var u=iA.OPERATOR_MAP[i.value];return u||Zr.throwInvalidExpression("unknown operator"),Id(n.slice(0,-2),[u(a,o)])},[]);return t.length!==1&&Zr.throwInvalidExpression("too many identifiers after evaluation"),t[0]}});var E_=p(ls=>{"use strict";ls.__esModule=!0;var v_=b_();ls.getEvaluator=v_.getEvaluator;ls.evaluate=v_.evaluate;var sA=Ad();ls.parse=sA.parse});var fA={};I_(fA,{default:()=>eo});module.exports=x_(fA);var M_=require("obsidian");var As=require("obsidian");var hA=new Error("timeout while waiting for mutex to become available"),mA=new Error("mutex already locked"),F_=new Error("request for lock canceled"),rf=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?s(c.value):i(c.value).then(o,u)}l((n=n.apply(r,e||[])).next())})},so=class{constructor(e,t=F_){if(this._maxConcurrency=e,this._cancelError=t,this._queue=[],this._waiters=[],e<=0)throw new Error("semaphore must be initialized to a positive value");this._value=e}acquire(){let e=this.isLocked(),t=new Promise((n,i)=>this._queue.push({resolve:n,reject:i}));return e||this._dispatch(),t}runExclusive(e){return rf(this,void 0,void 0,function*(){let[t,n]=yield this.acquire();try{return yield e(t)}finally{n()}})}waitForUnlock(){return rf(this,void 0,void 0,function*(){return this.isLocked()?new Promise(t=>this._waiters.push({resolve:t})):Promise.resolve()})}isLocked(){return this._value<=0}release(){if(this._maxConcurrency>1)throw new Error("this method is unavailable on semaphores with concurrency > 1; use the scoped release returned by acquire instead");if(this._currentReleaser){let e=this._currentReleaser;this._currentReleaser=void 0,e()}}cancel(){this._queue.forEach(e=>e.reject(this._cancelError)),this._queue=[]}_dispatch(){let e=this._queue.shift();if(!e)return;let t=!1;this._currentReleaser=()=>{t||(t=!0,this._value++,this._resolveWaiters(),this._dispatch())},e.resolve([this._value--,this._currentReleaser])}_resolveWaiters(){this._waiters.forEach(e=>e.resolve()),this._waiters=[]}},U_=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?s(c.value):i(c.value).then(o,u)}l((n=n.apply(r,e||[])).next())})},bs=class{constructor(e){this._semaphore=new so(1,e)}acquire(){return U_(this,void 0,void 0,function*(){let[,e]=yield this._semaphore.acquire();return e})}runExclusive(e){return this._semaphore.runExclusive(()=>e())}isLocked(){return this._semaphore.isLocked()}waitForUnlock(){return this._semaphore.waitForUnlock()}release(){this._semaphore.release()}cancel(){return this._semaphore.cancel()}};var dp=require("obsidian");var sf=require("obsidian");var nf=[{index:9999,internalName:"INTERNAL_TESTING_ENABLED_BY_DEFAULT",displayName:"Test Item. Used to validate the Feature Framework.",description:"Description",enabledByDefault:!0,stable:!1}];var Ct=class{constructor(e,t,n,i,s,a){this.internalName=e;this.index=t;this.description=n;this.displayName=i;this.enabledByDefault=s;this.stable=a}static get values(){let e=[];return nf.forEach(t=>{e=[...e,new Ct(t.internalName,t.index,t.description,t.displayName,t.enabledByDefault,t.stable)]}),e}static get settingsFlags(){let e={};return Ct.values.forEach(t=>{e[t.internalName]=t.enabledByDefault}),e}static fromString(e){for(let t of Ct.values)if(e===t.internalName)return t;throw new RangeError(`Illegal argument passed to fromString(): ${e} does not correspond to any available Feature ${this.prototype.constructor.name}`)}};var W_={globalFilter:"",removeGlobalFilter:!1,setDoneDate:!0,autoSuggestInEditor:!0,autoSuggestMinMatch:0,autoSuggestMaxItems:6,provideAccessKeys:!0,useFilenameAsScheduledDate:!1,filenameAsDateFolders:[],features:Ct.settingsFlags},jn=Re({},W_),z=()=>{for(let r in Ct.settingsFlags)jn.features[r]===void 0&&(jn.features[r]=Ct.settingsFlags[r]);return Re({},jn)},ct=r=>(jn=Re(Re({},jn),r),z());var ao,oo,af=({metadataCache:r,vault:e})=>{ao=r,oo=e},vs=t=>J(void 0,[t],function*({originalTask:r,newTasks:e}){if(oo===void 0||ao===void 0){console.error("Tasks: cannot use File before initializing it.");return}Array.isArray(e)||(e=[e]),of({originalTask:r,newTasks:e,vault:oo,metadataCache:ao,previousTries:0})}),of=s=>J(void 0,[s],function*({originalTask:r,newTasks:e,vault:t,metadataCache:n,previousTries:i}){let a=()=>{if(i>10){console.error("Tasks: Too many retries. File update not possible ...");return}let y=Math.min(Math.pow(10,i),100);setTimeout(()=>{of({originalTask:r,newTasks:e,vault:t,metadataCache:n,previousTries:i+1})},y)},o=t.getAbstractFileByPath(r.path);if(!(o instanceof sf.TFile))return console.warn(`Tasks: No file found for task ${r.description}. Retrying ...`),a();if(o.extension!=="md"){console.error("Tasks: Only supporting files with the .md file extension.");return}let u=n.getFileCache(o);if(u==null||u===null)return console.warn(`Tasks: No file cache found for file ${o.path}. Retrying ...`),a();let l=u.listItems;if(l===void 0||l.length===0)return console.warn(`Tasks: No list items found in file cache of ${o.path}. Retrying ...`),a();let d=(yield t.read(o)).split(`
`),{globalFilter:f}=z(),h,g=0;for(let y of l){if(y.position.start.line<r.sectionStart||y.task===void 0)continue;if(d[y.position.start.line].includes(f)){if(g===r.sectionIndex){h=y;break}g++}}if(h===void 0){console.error("Tasks: could not find task to toggle in the file.");return}let m=[...d.slice(0,h.position.start.line),...e.map(y=>y.toFileLineString()),...d.slice(h.position.start.line+1)];yield t.modify(o,m.join(`
`))});var rn=class{constructor(){this.hideTaskCount=!1;this.hideBacklinks=!1;this.hidePriority=!1;this.hideStartDate=!1;this.hideScheduledDate=!1;this.hideDoneDate=!1;this.hideDueDate=!1;this.hideRecurrenceRule=!1;this.hideEditButton=!1;this.hideUrgency=!0;this.shortMode=!1}};var Es=["MO","TU","WE","TH","FR","SA","SU"],ge=function(){function r(e,t){if(t===0)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=t}return r.fromStr=function(e){return new r(Es.indexOf(e))},r.prototype.nth=function(e){return this.n===e?this:new r(this.weekday,e)},r.prototype.equals=function(e){return this.weekday===e.weekday&&this.n===e.n},r.prototype.toString=function(){var e=Es[this.weekday];return this.n&&(e=(this.n>0?"+":"")+String(this.n)+e),e},r.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},r}();var ue=function(r){return r!=null},et=function(r){return typeof r=="number"},uo=function(r){return typeof r=="string"&&Es.includes(r)},xe=Array.isArray,dt=function(r,e){e===void 0&&(e=r),arguments.length===1&&(e=r,r=0);for(var t=[],n=r;n<e;n++)t.push(n);return t};var B=function(r,e){var t=0,n=[];if(xe(r))for(;t<e;t++)n[t]=[].concat(r);else for(;t<e;t++)n[t]=r;return n},uf=function(r){return xe(r)?r:[r]};function Nr(r,e,t){t===void 0&&(t=" ");var n=String(r);return e=e>>0,n.length>e?String(n):(e=e-n.length,e>t.length&&(t+=B(t,e/t.length)),t.slice(0,e)+String(n))}var lf=function(r,e,t){var n=r.split(e);return t?n.slice(0,t).concat([n.slice(t).join(e)]):n},Ye=function(r,e){var t=r%e;return t*e<0?t+e:t},ws=function(r,e){return{div:Math.floor(r/e),mod:Ye(r,e)}},tt=function(r){return!ue(r)||r.length===0},me=function(r){return!tt(r)},G=function(r,e){return me(r)&&r.indexOf(e)!==-1};var mr;(function(r){r.MONTH_DAYS=[31,28,31,30,31,30,31,31,30,31,30,31],r.ONE_DAY=1e3*60*60*24,r.MAXYEAR=9999,r.ORDINAL_BASE=new Date(Date.UTC(1970,0,1)),r.PY_WEEKDAYS=[6,0,1,2,3,4,5],r.getYearDay=function(e){var t=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate());return Math.ceil((t.valueOf()-new Date(e.getUTCFullYear(),0,1).valueOf())/r.ONE_DAY)+1},r.isLeapYear=function(e){return e%4===0&&e%100!==0||e%400===0},r.isDate=function(e){return e instanceof Date},r.isValidDate=function(e){return r.isDate(e)&&!isNaN(e.getTime())},r.tzOffset=function(e){return e.getTimezoneOffset()*60*1e3},r.daysBetween=function(e,t){var n=e.getTime()-r.tzOffset(e),i=t.getTime()-r.tzOffset(t),s=n-i;return Math.round(s/r.ONE_DAY)},r.toOrdinal=function(e){return r.daysBetween(e,r.ORDINAL_BASE)},r.fromOrdinal=function(e){return new Date(r.ORDINAL_BASE.getTime()+e*r.ONE_DAY)},r.getMonthDays=function(e){var t=e.getUTCMonth();return t===1&&r.isLeapYear(e.getUTCFullYear())?29:r.MONTH_DAYS[t]},r.getWeekday=function(e){return r.PY_WEEKDAYS[e.getUTCDay()]},r.monthRange=function(e,t){var n=new Date(Date.UTC(e,t,1));return[r.getWeekday(n),r.getMonthDays(n)]},r.combine=function(e,t){return t=t||e,new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()))},r.clone=function(e){var t=new Date(e.getTime());return t},r.cloneDates=function(e){for(var t=[],n=0;n<e.length;n++)t.push(r.clone(e[n]));return t},r.sort=function(e){e.sort(function(t,n){return t.getTime()-n.getTime()})},r.timeToUntilString=function(e,t){t===void 0&&(t=!0);var n=new Date(e);return[Nr(n.getUTCFullYear().toString(),4,"0"),Nr(n.getUTCMonth()+1,2,"0"),Nr(n.getUTCDate(),2,"0"),"T",Nr(n.getUTCHours(),2,"0"),Nr(n.getUTCMinutes(),2,"0"),Nr(n.getUTCSeconds(),2,"0"),t?"Z":""].join("")},r.untilStringToDate=function(e){var t=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,n=t.exec(e);if(!n)throw new Error("Invalid UNTIL value: ".concat(e));return new Date(Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[5],10)||0,parseInt(n[6],10)||0,parseInt(n[7],10)||0))}})(mr||(mr={}));var I=mr;var L_=function(){function r(e,t){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=e,this.args=t,e==="between"?(this.maxDate=t.inc?t.before:new Date(t.before.getTime()-1),this.minDate=t.inc?t.after:new Date(t.after.getTime()+1)):e==="before"?this.maxDate=t.inc?t.dt:new Date(t.dt.getTime()-1):e==="after"&&(this.minDate=t.inc?t.dt:new Date(t.dt.getTime()+1))}return r.prototype.accept=function(e){++this.total;var t=this.minDate&&e<this.minDate,n=this.maxDate&&e>this.maxDate;if(this.method==="between"){if(t)return!0;if(n)return!1}else if(this.method==="before"){if(n)return!1}else if(this.method==="after")return t?!0:(this.add(e),!1);return this.add(e)},r.prototype.add=function(e){return this._result.push(e),!0},r.prototype.getValue=function(){var e=this._result;switch(this.method){case"all":case"between":return e;case"before":case"after":default:return e.length?e[e.length-1]:null}},r.prototype.clone=function(){return new r(this.method,this.args)},r}(),Vt=L_;var Sf=Ts(Nf(),1),{__extends:sn,__assign:Be,__rest:IA,__decorate:xA,__param:FA,__metadata:UA,__awaiter:qA,__generator:WA,__exportStar:LA,__createBinding:YA,__values:$A,__read:jA,__spread:BA,__spreadArrays:GA,__spreadArray:T,__await:HA,__asyncGenerator:zA,__asyncDelegator:KA,__asyncValues:VA,__makeTemplateObject:ZA,__importStar:XA,__importDefault:QA,__classPrivateFieldGet:JA,__classPrivateFieldSet:ek,__classPrivateFieldIn:tk}=Sf.default;var Y_=function(r){sn(e,r);function e(t,n,i){var s=r.call(this,t,n)||this;return s.iterator=i,s}return e.prototype.add=function(t){return this.iterator(t,this._result.length)?(this._result.push(t),!0):!1},e}(Vt),co=Y_;var $_={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},Sr=$_;var Cf=function(r,e){return r.indexOf(e)!==-1},j_=function(r){return r.toString()},B_=function(r,e,t){return"".concat(e," ").concat(t,", ").concat(r)},G_=function(){function r(e,t,n,i){if(t===void 0&&(t=j_),n===void 0&&(n=Sr),i===void 0&&(i=B_),this.text=[],this.language=n||Sr,this.gettext=t,this.dateFormatter=i,this.rrule=e,this.options=e.options,this.origOptions=e.origOptions,this.origOptions.bymonthday){var s=[].concat(this.options.bymonthday),a=[].concat(this.options.bynmonthday);s.sort(function(c,d){return c-d}),a.sort(function(c,d){return d-c}),this.bymonthday=s.concat(a),this.bymonthday.length||(this.bymonthday=null)}if(ue(this.origOptions.byweekday)){var o=xe(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],u=String(o);this.byweekday={allWeeks:o.filter(function(c){return!c.n}),someWeeks:o.filter(function(c){return Boolean(c.n)}),isWeekdays:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")===-1&&u.indexOf("SU")===-1,isEveryDay:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")!==-1&&u.indexOf("SU")!==-1};var l=function(c,d){return c.weekday-d.weekday};this.byweekday.allWeeks.sort(l),this.byweekday.someWeeks.sort(l),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return r.isFullyConvertible=function(e){var t=!0;if(!(e.options.freq in r.IMPLEMENTED)||e.origOptions.until&&e.origOptions.count)return!1;for(var n in e.origOptions){if(Cf(["dtstart","wkst","freq"],n))return!0;if(!Cf(r.IMPLEMENTED[e.options.freq],n))return!1}return t},r.prototype.isFullyConvertible=function(){return r.isFullyConvertible(this.rrule)},r.prototype.toString=function(){var e=this.gettext;if(!(this.options.freq in r.IMPLEMENTED))return e("RRule error: Unable to fully convert this rrule to text");if(this.text=[e("every")],this[M.FREQUENCIES[this.options.freq]](),this.options.until){this.add(e("until"));var t=this.options.until;this.add(this.dateFormatter(t.getUTCFullYear(),this.language.monthNames[t.getUTCMonth()],t.getUTCDate()))}else this.options.count&&this.add(e("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?e("times"):e("time"));return this.isFullyConvertible()||this.add(e("(~ approximate)")),this.text.join("")},r.prototype.HOURLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("hours"):e("hour"))},r.prototype.MINUTELY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("minutes"):e("minute"))},r.prototype.DAILY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(this.plural(this.options.interval)?e("days"):e("day")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},r.prototype.WEEKLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?e("weeks"):e("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(e("on")).add(e("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?e("days"):e("day")):(this.options.interval===1&&this.add(e("week")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday())},r.prototype.MONTHLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(e("months")),this.plural(this.options.interval)&&this.add(e("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("months"):e("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(e("on")).add(e("weekdays")):this.byweekday&&this._byweekday()},r.prototype.YEARLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(e("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("years"):e("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(e("on the")).add(this.list(this.options.byyearday,this.nth,e("and"))).add(e("day")),this.options.byweekno&&this.add(e("in")).add(this.plural(this.options.byweekno.length)?e("weeks"):e("week")).add(this.list(this.options.byweekno,void 0,e("and")))},r.prototype._bymonthday=function(){var e=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,e("or"))).add(e("the")).add(this.list(this.bymonthday,this.nth,e("or"))):this.add(e("on the")).add(this.list(this.bymonthday,this.nth,e("and")))},r.prototype._byweekday=function(){var e=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(e("and")),this.add(e("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,e("and"))))},r.prototype._byhour=function(){var e=this.gettext;this.add(e("at")).add(this.list(this.origOptions.byhour,void 0,e("and")))},r.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},r.prototype.nth=function(e){e=parseInt(e.toString(),10);var t,n=this.gettext;if(e===-1)return n("last");var i=Math.abs(e);switch(i){case 1:case 21:case 31:t=i+n("st");break;case 2:case 22:t=i+n("nd");break;case 3:case 23:t=i+n("rd");break;default:t=i+n("th")}return e<0?t+" "+n("last"):t},r.prototype.monthtext=function(e){return this.language.monthNames[e-1]},r.prototype.weekdaytext=function(e){var t=et(e)?(e+1)%7:e.getJsWeekday();return(e.n?this.nth(e.n)+" ":"")+this.language.dayNames[t]},r.prototype.plural=function(e){return e%100!==1},r.prototype.add=function(e){return this.text.push(" "),this.text.push(e),this},r.prototype.list=function(e,t,n,i){var s=this;i===void 0&&(i=","),xe(e)||(e=[e]);var a=function(u,l,c){for(var d="",f=0;f<u.length;f++)f!==0&&(f===u.length-1?d+=" "+c+" ":d+=l+" "),d+=u[f];return d};t=t||function(u){return u.toString()};var o=function(u){return t&&t.call(s,u)};return n?a(e.map(o),i,n):e.map(o).join(i+" ")},r}(),It=G_;var H_=function(){function r(e){this.done=!0,this.rules=e}return r.prototype.start=function(e){return this.text=e,this.done=!1,this.nextSymbol()},r.prototype.isDone=function(){return this.done&&this.symbol===null},r.prototype.nextSymbol=function(){var e,t;this.symbol=null,this.value=null;do{if(this.done)return!1;var n=void 0;e=null;for(var i in this.rules){n=this.rules[i];var s=n.exec(this.text);s&&(e===null||s[0].length>e[0].length)&&(e=s,t=i)}if(e!=null&&(this.text=this.text.substr(e[0].length),this.text===""&&(this.done=!0)),e==null){this.done=!0,this.symbol=null,this.value=null;return}}while(t==="SKIP");return this.symbol=t,this.value=e,!0},r.prototype.accept=function(e){if(this.symbol===e){if(this.value){var t=this.value;return this.nextSymbol(),t}return this.nextSymbol(),!0}return!1},r.prototype.acceptNumber=function(){return this.accept("number")},r.prototype.expect=function(e){if(this.accept(e))return!0;throw new Error("expected "+e+" but found "+this.symbol)},r}();function Bn(r,e){e===void 0&&(e=Sr);var t={},n=new H_(e.tokens);if(!n.start(r))return null;return i(),t;function i(){n.expect("every");var f=n.acceptNumber();if(f&&(t.interval=parseInt(f[0],10)),n.isDone())throw new Error("Unexpected end");switch(n.symbol){case"day(s)":t.freq=M.DAILY,n.nextSymbol()&&(a(),d());break;case"weekday(s)":t.freq=M.WEEKLY,t.byweekday=[M.MO,M.TU,M.WE,M.TH,M.FR],n.nextSymbol(),d();break;case"week(s)":t.freq=M.WEEKLY,n.nextSymbol()&&(s(),d());break;case"hour(s)":t.freq=M.HOURLY,n.nextSymbol()&&(s(),d());break;case"minute(s)":t.freq=M.MINUTELY,n.nextSymbol()&&(s(),d());break;case"month(s)":t.freq=M.MONTHLY,n.nextSymbol()&&(s(),d());break;case"year(s)":t.freq=M.YEARLY,n.nextSymbol()&&(s(),d());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":t.freq=M.WEEKLY;var h=n.symbol.substr(0,2).toUpperCase();if(t.byweekday=[M[h]],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var g=u();if(!g)throw new Error("Unexpected symbol "+n.symbol+", expected weekday");t.byweekday.push(M[g]),n.nextSymbol()}c(),d();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(t.freq=M.YEARLY,t.bymonth=[o()],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var m=o();if(!m)throw new Error("Unexpected symbol "+n.symbol+", expected month");t.bymonth.push(m),n.nextSymbol()}s(),d();break;default:throw new Error("Unknown symbol")}}function s(){var f=n.accept("on"),h=n.accept("the");if(!!(f||h))do{var g=l(),m=u(),y=o();if(g)m?(n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(M[m].nth(g))):(t.bymonthday||(t.bymonthday=[]),t.bymonthday.push(g),n.accept("day(s)"));else if(m)n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(M[m]);else if(n.symbol==="weekday(s)")n.nextSymbol(),t.byweekday||(t.byweekday=[M.MO,M.TU,M.WE,M.TH,M.FR]);else if(n.symbol==="week(s)"){n.nextSymbol();var P=n.acceptNumber();if(!P)throw new Error("Unexpected symbol "+n.symbol+", expected week number");for(t.byweekno=[parseInt(P[0],10)];n.accept("comma");){if(P=n.acceptNumber(),!P)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.byweekno.push(parseInt(P[0],10))}}else if(y)n.nextSymbol(),t.bymonth||(t.bymonth=[]),t.bymonth.push(y);else return}while(n.accept("comma")||n.accept("the")||n.accept("on"))}function a(){var f=n.accept("at");if(!!f)do{var h=n.acceptNumber();if(!h)throw new Error("Unexpected symbol "+n.symbol+", expected hour");for(t.byhour=[parseInt(h[0],10)];n.accept("comma");){if(h=n.acceptNumber(),!h)throw new Error("Unexpected symbol "+n.symbol+"; expected hour");t.byhour.push(parseInt(h[0],10))}}while(n.accept("comma")||n.accept("at"))}function o(){switch(n.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function u(){switch(n.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return n.symbol.substr(0,2).toUpperCase();default:return!1}}function l(){switch(n.symbol){case"last":return n.nextSymbol(),-1;case"first":return n.nextSymbol(),1;case"second":return n.nextSymbol(),n.accept("last")?-2:2;case"third":return n.nextSymbol(),n.accept("last")?-3:3;case"nth":var f=parseInt(n.value[1],10);if(f<-366||f>366)throw new Error("Nth out of range: "+f);return n.nextSymbol(),n.accept("last")?-f:f;default:return!1}}function c(){n.accept("on"),n.accept("the");var f=l();if(!!f)for(t.bymonthday=[f],n.nextSymbol();n.accept("comma");){if(f=l(),!f)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.bymonthday.push(f),n.nextSymbol()}}function d(){if(n.symbol==="until"){var f=Date.parse(n.text);if(!f)throw new Error("Cannot parse until date:"+n.text);t.until=new Date(f)}else n.accept("for")&&(t.count=parseInt(n.value[0],10),n.expect("number"))}}var Y;(function(r){r[r.YEARLY=0]="YEARLY",r[r.MONTHLY=1]="MONTHLY",r[r.WEEKLY=2]="WEEKLY",r[r.DAILY=3]="DAILY",r[r.HOURLY=4]="HOURLY",r[r.MINUTELY=5]="MINUTELY",r[r.SECONDLY=6]="SECONDLY"})(Y||(Y={}));function Gn(r){return r<Y.HOURLY}var If=function(r,e){return e===void 0&&(e=Sr),new M(Bn(r,e)||void 0)},an=["count","until","interval","byweekday","bymonthday","bymonth"];It.IMPLEMENTED=[];It.IMPLEMENTED[Y.HOURLY]=an;It.IMPLEMENTED[Y.MINUTELY]=an;It.IMPLEMENTED[Y.DAILY]=["byhour"].concat(an);It.IMPLEMENTED[Y.WEEKLY]=an;It.IMPLEMENTED[Y.MONTHLY]=an;It.IMPLEMENTED[Y.YEARLY]=["byweekno","byyearday"].concat(an);var xf=function(r,e,t,n){return new It(r,e,t,n).toString()},Ff=It.isFullyConvertible;var on=function(){function r(e,t,n,i){this.hour=e,this.minute=t,this.second=n,this.millisecond=i||0}return r.prototype.getHours=function(){return this.hour},r.prototype.getMinutes=function(){return this.minute},r.prototype.getSeconds=function(){return this.second},r.prototype.getMilliseconds=function(){return this.millisecond},r.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},r}();var Uf=function(r){sn(e,r);function e(t,n,i,s,a,o,u){var l=r.call(this,s,a,o,u)||this;return l.year=t,l.month=n,l.day=i,l}return e.fromDate=function(t){return new this(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.valueOf()%1e3)},e.prototype.getWeekday=function(){return mr.getWeekday(new Date(this.getTime()))},e.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},e.prototype.getDay=function(){return this.day},e.prototype.getMonth=function(){return this.month},e.prototype.getYear=function(){return this.year},e.prototype.addYears=function(t){this.year+=t},e.prototype.addMonths=function(t){if(this.month+=t,this.month>12){var n=Math.floor(this.month/12),i=Ye(this.month,12);this.month=i,this.year+=n,this.month===0&&(this.month=12,--this.year)}},e.prototype.addWeekly=function(t,n){n>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-n))+t*7:this.day+=-(this.getWeekday()-n)+t*7,this.fixDay()},e.prototype.addDaily=function(t){this.day+=t,this.fixDay()},e.prototype.addHours=function(t,n,i){for(n&&(this.hour+=Math.floor((23-this.hour)/t)*t);;){this.hour+=t;var s=ws(this.hour,24),a=s.div,o=s.mod;if(a&&(this.hour=o,this.addDaily(a)),tt(i)||G(i,this.hour))break}},e.prototype.addMinutes=function(t,n,i,s){for(n&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/t)*t);;){this.minute+=t;var a=ws(this.minute,60),o=a.div,u=a.mod;if(o&&(this.minute=u,this.addHours(o,!1,i)),(tt(i)||G(i,this.hour))&&(tt(s)||G(s,this.minute)))break}},e.prototype.addSeconds=function(t,n,i,s,a){for(n&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/t)*t);;){this.second+=t;var o=ws(this.second,60),u=o.div,l=o.mod;if(u&&(this.second=l,this.addMinutes(u,!1,i,s)),(tt(i)||G(i,this.hour))&&(tt(s)||G(s,this.minute))&&(tt(a)||G(a,this.second)))break}},e.prototype.fixDay=function(){if(!(this.day<=28)){var t=mr.monthRange(this.year,this.month-1)[1];if(!(this.day<=t))for(;this.day>t;){if(this.day-=t,++this.month,this.month===13&&(this.month=1,++this.year,this.year>mr.MAXYEAR))return;t=mr.monthRange(this.year,this.month-1)[1]}}},e.prototype.add=function(t,n){var i=t.freq,s=t.interval,a=t.wkst,o=t.byhour,u=t.byminute,l=t.bysecond;switch(i){case Y.YEARLY:return this.addYears(s);case Y.MONTHLY:return this.addMonths(s);case Y.WEEKLY:return this.addWeekly(s,a);case Y.DAILY:return this.addDaily(s);case Y.HOURLY:return this.addHours(s,n,o);case Y.MINUTELY:return this.addMinutes(s,n,o,u);case Y.SECONDLY:return this.addSeconds(s,n,o,u,l)}},e}(on);function fo(r){for(var e=[],t=Object.keys(r),n=0,i=t;n<i.length;n++){var s=i[n];G(Lf,s)||e.push(s),I.isDate(r[s])&&!I.isValidDate(r[s])&&e.push(s)}if(e.length)throw new Error("Invalid options: "+e.join(", "));return Be({},r)}function qf(r){var e=Be(Be({},Hn),fo(r));if(ue(e.byeaster)&&(e.freq=M.YEARLY),!(ue(e.freq)&&M.FREQUENCIES[e.freq]))throw new Error("Invalid frequency: ".concat(e.freq," ").concat(r.freq));if(e.dtstart||(e.dtstart=new Date(new Date().setMilliseconds(0))),ue(e.wkst)?et(e.wkst)||(e.wkst=e.wkst.weekday):e.wkst=M.MO.weekday,ue(e.bysetpos)){et(e.bysetpos)&&(e.bysetpos=[e.bysetpos]);for(var t=0;t<e.bysetpos.length;t++){var n=e.bysetpos[t];if(n===0||!(n>=-366&&n<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(Boolean(e.byweekno)||me(e.byweekno)||me(e.byyearday)||Boolean(e.bymonthday)||me(e.bymonthday)||ue(e.byweekday)||ue(e.byeaster)))switch(e.freq){case M.YEARLY:e.bymonth||(e.bymonth=e.dtstart.getUTCMonth()+1),e.bymonthday=e.dtstart.getUTCDate();break;case M.MONTHLY:e.bymonthday=e.dtstart.getUTCDate();break;case M.WEEKLY:e.byweekday=[I.getWeekday(e.dtstart)];break}if(ue(e.bymonth)&&!xe(e.bymonth)&&(e.bymonth=[e.bymonth]),ue(e.byyearday)&&!xe(e.byyearday)&&et(e.byyearday)&&(e.byyearday=[e.byyearday]),!ue(e.bymonthday))e.bymonthday=[],e.bynmonthday=[];else if(xe(e.bymonthday)){for(var i=[],s=[],t=0;t<e.bymonthday.length;t++){var n=e.bymonthday[t];n>0?i.push(n):n<0&&s.push(n)}e.bymonthday=i,e.bynmonthday=s}else e.bymonthday<0?(e.bynmonthday=[e.bymonthday],e.bymonthday=[]):(e.bynmonthday=[],e.bymonthday=[e.bymonthday]);if(ue(e.byweekno)&&!xe(e.byweekno)&&(e.byweekno=[e.byweekno]),!ue(e.byweekday))e.bynweekday=null;else if(et(e.byweekday))e.byweekday=[e.byweekday],e.bynweekday=null;else if(uo(e.byweekday))e.byweekday=[ge.fromStr(e.byweekday).weekday],e.bynweekday=null;else if(e.byweekday instanceof ge)!e.byweekday.n||e.freq>M.MONTHLY?(e.byweekday=[e.byweekday.weekday],e.bynweekday=null):(e.bynweekday=[[e.byweekday.weekday,e.byweekday.n]],e.byweekday=null);else{for(var a=[],o=[],t=0;t<e.byweekday.length;t++){var u=e.byweekday[t];if(et(u)){a.push(u);continue}else if(uo(u)){a.push(ge.fromStr(u).weekday);continue}!u.n||e.freq>M.MONTHLY?a.push(u.weekday):o.push([u.weekday,u.n])}e.byweekday=me(a)?a:null,e.bynweekday=me(o)?o:null}return ue(e.byhour)?et(e.byhour)&&(e.byhour=[e.byhour]):e.byhour=e.freq<M.HOURLY?[e.dtstart.getUTCHours()]:null,ue(e.byminute)?et(e.byminute)&&(e.byminute=[e.byminute]):e.byminute=e.freq<M.MINUTELY?[e.dtstart.getUTCMinutes()]:null,ue(e.bysecond)?et(e.bysecond)&&(e.bysecond=[e.bysecond]):e.bysecond=e.freq<M.SECONDLY?[e.dtstart.getUTCSeconds()]:null,{parsedOptions:e}}function Wf(r){var e=r.dtstart.getTime()%1e3;if(!Gn(r.freq))return[];var t=[];return r.byhour.forEach(function(n){r.byminute.forEach(function(i){r.bysecond.forEach(function(s){t.push(new on(n,i,s,e))})})}),t}function Kn(r){var e=r.split(`
`).map(z_).filter(function(t){return t!==null});return Be(Be({},e[0]),e[1])}function zn(r){var e={},t=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(r);if(!t)return e;var n=t[1],i=t[2];return n&&(e.tzid=n),e.dtstart=I.untilStringToDate(i),e}function z_(r){if(r=r.replace(/^\s+|\s+$/,""),!r.length)return null;var e=/^([A-Z]+?)[:;]/.exec(r.toUpperCase());if(!e)return Yf(r);var t=e[1];switch(t.toUpperCase()){case"RRULE":case"EXRULE":return Yf(r);case"DTSTART":return zn(r);default:throw new Error("Unsupported RFC prop ".concat(t," in ").concat(r))}}function Yf(r){var e=r.replace(/^RRULE:/i,""),t=zn(e),n=r.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return n.forEach(function(i){var s=i.split("="),a=s[0],o=s[1];switch(a.toUpperCase()){case"FREQ":t.freq=Y[o.toUpperCase()];break;case"WKST":t.wkst=ft[o.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var u=K_(o),l=a.toLowerCase();t[l]=u;break;case"BYWEEKDAY":case"BYDAY":t.byweekday=V_(o);break;case"DTSTART":case"TZID":var c=zn(r);t.tzid=c.tzid,t.dtstart=c.dtstart;break;case"UNTIL":t.until=I.untilStringToDate(o);break;case"BYEASTER":t.byeaster=Number(o);break;default:throw new Error("Unknown RRULE property '"+a+"'")}}),t}function K_(r){if(r.indexOf(",")!==-1){var e=r.split(",");return e.map($f)}return $f(r)}function $f(r){return/^[+-]?\d+$/.test(r)?Number(r):r}function V_(r){var e=r.split(",");return e.map(function(t){if(t.length===2)return ft[t];var n=t.match(/^([+-]?\d{1,2})([A-Z]{2})$/);if(!n||n.length<3)throw new SyntaxError("Invalid weekday string: ".concat(t));var i=Number(n[1]),s=n[2],a=ft[s].weekday;return new ge(a,i)})}var Cr=function(){function r(e,t){if(isNaN(e.getTime()))throw new RangeError("Invalid date passed to DateWithZone");this.date=e,this.tzid=t}return Object.defineProperty(r.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!1,configurable:!0}),r.prototype.toString=function(){var e=I.timeToUntilString(this.date.getTime(),this.isUTC);return this.isUTC?":".concat(e):";TZID=".concat(this.tzid,":").concat(e)},r.prototype.getTime=function(){return this.date.getTime()},r.prototype.rezonedDate=function(){var e;if(this.isUTC)return this.date;var t=Intl.DateTimeFormat().resolvedOptions().timeZone,n=new Date(this.date.toLocaleString(void 0,{timeZone:t})),i=new Date(this.date.toLocaleString(void 0,{timeZone:(e=this.tzid)!==null&&e!==void 0?e:"UTC"})),s=i.getTime()-n.getTime();return new Date(this.date.getTime()-s)},r}();function Vn(r){for(var e=[],t="",n=Object.keys(r),i=Object.keys(Hn),s=0;s<n.length;s++)if(n[s]!=="tzid"&&!!G(i,n[s])){var a=n[s].toUpperCase(),o=r[n[s]],u="";if(!(!ue(o)||xe(o)&&!o.length)){switch(a){case"FREQ":u=M.FREQUENCIES[r.freq];break;case"WKST":et(o)?u=new ge(o).toString():u=o.toString();break;case"BYWEEKDAY":a="BYDAY",u=uf(o).map(function(h){return h instanceof ge?h:xe(h)?new ge(h[0],h[1]):new ge(h)}).toString();break;case"DTSTART":t=Z_(o,r.tzid);break;case"UNTIL":u=I.timeToUntilString(o,!r.tzid);break;default:if(xe(o)){for(var l=[],c=0;c<o.length;c++)l[c]=String(o[c]);u=l.toString()}else u=String(o)}u&&e.push([a,u])}}var d=e.map(function(h){var g=h[0],m=h[1];return"".concat(g,"=").concat(m.toString())}).join(";"),f="";return d!==""&&(f="RRULE:".concat(d)),[t,f].filter(function(h){return!!h}).join(`
`)}function Z_(r,e){return r?"DTSTART"+new Cr(new Date(r),e).toString():""}function X_(r,e){return Array.isArray(r)?!Array.isArray(e)||r.length!==e.length?!1:r.every(function(t,n){return t.getTime()===e[n].getTime()}):r instanceof Date?e instanceof Date&&r.getTime()===e.getTime():r===e}var jf=function(){function r(){this.all=!1,this.before=[],this.after=[],this.between=[]}return r.prototype._cacheAdd=function(e,t,n){t&&(t=t instanceof Date?I.clone(t):I.cloneDates(t)),e==="all"?this.all=t:(n._value=t,this[e].push(n))},r.prototype._cacheGet=function(e,t){var n=!1,i=t?Object.keys(t):[],s=function(c){for(var d=0;d<i.length;d++){var f=i[d];if(!X_(t[f],c[f]))return!0}return!1},a=this[e];if(e==="all")n=this.all;else if(xe(a))for(var o=0;o<a.length;o++){var u=a[o];if(!(i.length&&s(u))){n=u._value;break}}if(!n&&this.all){for(var l=new Vt(e,t),o=0;o<this.all.length&&l.accept(this.all[o]);o++);n=l.getValue(),this._cacheAdd(e,n,t)}return xe(n)?I.cloneDates(n):n instanceof Date?I.clone(n):n},r}();var Bf=T(T(T(T(T(T(T(T(T(T(T(T(T([],B(1,31),!0),B(2,28),!0),B(3,31),!0),B(4,30),!0),B(5,31),!0),B(6,30),!0),B(7,31),!0),B(8,31),!0),B(9,30),!0),B(10,31),!0),B(11,30),!0),B(12,31),!0),B(1,7),!0),Gf=T(T(T(T(T(T(T(T(T(T(T(T(T([],B(1,31),!0),B(2,29),!0),B(3,31),!0),B(4,30),!0),B(5,31),!0),B(6,30),!0),B(7,31),!0),B(8,31),!0),B(9,30),!0),B(10,31),!0),B(11,30),!0),B(12,31),!0),B(1,7),!0),Q_=dt(1,29),J_=dt(1,30),yr=dt(1,31),$e=dt(1,32),Hf=T(T(T(T(T(T(T(T(T(T(T(T(T([],$e,!0),J_,!0),$e,!0),yr,!0),$e,!0),yr,!0),$e,!0),$e,!0),yr,!0),$e,!0),yr,!0),$e,!0),$e.slice(0,7),!0),zf=T(T(T(T(T(T(T(T(T(T(T(T(T([],$e,!0),Q_,!0),$e,!0),yr,!0),$e,!0),yr,!0),$e,!0),$e,!0),yr,!0),$e,!0),yr,!0),$e,!0),$e.slice(0,7),!0),eT=dt(-28,0),tT=dt(-29,0),gr=dt(-30,0),je=dt(-31,0),Kf=T(T(T(T(T(T(T(T(T(T(T(T(T([],je,!0),tT,!0),je,!0),gr,!0),je,!0),gr,!0),je,!0),je,!0),gr,!0),je,!0),gr,!0),je,!0),je.slice(0,7),!0),Vf=T(T(T(T(T(T(T(T(T(T(T(T(T([],je,!0),eT,!0),je,!0),gr,!0),je,!0),gr,!0),je,!0),je,!0),gr,!0),je,!0),gr,!0),je,!0),je.slice(0,7),!0),Zf=[0,31,60,91,121,152,182,213,244,274,305,335,366],Xf=[0,31,59,90,120,151,181,212,243,273,304,334,365],po=function(){for(var r=[],e=0;e<55;e++)r=r.concat(dt(7));return r}();function Qf(r,e){var t=new Date(Date.UTC(r,0,1)),n=I.isLeapYear(r)?366:365,i=I.isLeapYear(r+1)?366:365,s=I.toOrdinal(t),a=I.getWeekday(t),o=Be(Be({yearlen:n,nextyearlen:i,yearordinal:s,yearweekday:a},rT(r)),{wnomask:null});if(tt(e.byweekno))return o;o.wnomask=B(0,n+7);var u,l,c=u=Ye(7-a+e.wkst,7);c>=4?(c=0,l=o.yearlen+Ye(a-e.wkst,7)):l=n-c;for(var d=Math.floor(l/7),f=Ye(l,7),h=Math.floor(d+f/4),g=0;g<e.byweekno.length;g++){var m=e.byweekno[g];if(m<0&&(m+=h+1),m>0&&m<=h){var y=void 0;m>1?(y=c+(m-1)*7,c!==u&&(y-=7-u)):y=c;for(var P=0;P<7&&(o.wnomask[y]=1,y++,o.wdaymask[y]!==e.wkst);P++);}}if(G(e.byweekno,1)){var y=c+h*7;if(c!==u&&(y-=7-u),y<n)for(var g=0;g<7&&(o.wnomask[y]=1,y+=1,o.wdaymask[y]!==e.wkst);g++);}if(c){var w=void 0;if(G(e.byweekno,-1))w=-1;else{var N=I.getWeekday(new Date(Date.UTC(r-1,0,1))),V=Ye(7-N.valueOf()+e.wkst,7),le=I.isLeapYear(r-1)?366:365,ye=void 0;V>=4?(V=0,ye=le+Ye(N-e.wkst,7)):ye=n-c,w=Math.floor(52+Ye(ye,7)/4)}if(G(e.byweekno,w))for(var y=0;y<c;y++)o.wnomask[y]=1}return o}function rT(r){var e=I.isLeapYear(r)?366:365,t=new Date(Date.UTC(r,0,1)),n=I.getWeekday(t);return e===365?{mmask:Bf,mdaymask:zf,nmdaymask:Vf,wdaymask:po.slice(n),mrange:Xf}:{mmask:Gf,mdaymask:Hf,nmdaymask:Kf,wdaymask:po.slice(n),mrange:Zf}}function Jf(r,e,t,n,i,s){var a={lastyear:r,lastmonth:e,nwdaymask:[]},o=[];if(s.freq===M.YEARLY)if(tt(s.bymonth))o=[[0,t]];else for(var u=0;u<s.bymonth.length;u++)e=s.bymonth[u],o.push(n.slice(e-1,e+1));else s.freq===M.MONTHLY&&(o=[n.slice(e-1,e+1)]);if(tt(o))return a;a.nwdaymask=B(0,t);for(var u=0;u<o.length;u++)for(var l=o[u],c=l[0],d=l[1]-1,f=0;f<s.bynweekday.length;f++){var h=void 0,g=s.bynweekday[f],m=g[0],y=g[1];y<0?(h=d+(y+1)*7,h-=Ye(i[h]-m,7)):(h=c+(y-1)*7,h+=Ye(7-i[h]+m,7)),c<=h&&h<=d&&(a.nwdaymask[h]=1)}return a}function ep(r,e){e===void 0&&(e=0);var t=r%19,n=Math.floor(r/100),i=r%100,s=Math.floor(n/4),a=n%4,o=Math.floor((n+8)/25),u=Math.floor((n-o+1)/3),l=Math.floor(19*t+n-s-u+15)%30,c=Math.floor(i/4),d=i%4,f=Math.floor(32+2*a+2*c-l-d)%7,h=Math.floor((t+11*l+22*f)/451),g=Math.floor((l+f-7*h+114)/31),m=(l+f-7*h+114)%31+1,y=Date.UTC(r,g-1,m+e),P=Date.UTC(r,0,1);return[Math.ceil((y-P)/(1e3*60*60*24))]}var nT=function(){function r(e){this.options=e}return r.prototype.rebuild=function(e,t){var n=this.options;if(e!==this.lastyear&&(this.yearinfo=Qf(e,n)),me(n.bynweekday)&&(t!==this.lastmonth||e!==this.lastyear)){var i=this.yearinfo,s=i.yearlen,a=i.mrange,o=i.wdaymask;this.monthinfo=Jf(e,t,s,a,o,n)}ue(n.byeaster)&&(this.eastermask=ep(e,n.byeaster))},Object.defineProperty(r.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!1,configurable:!0}),r.prototype.ydayset=function(){return[dt(this.yearlen),0,this.yearlen]},r.prototype.mdayset=function(e,t){for(var n=this.mrange[t-1],i=this.mrange[t],s=B(null,this.yearlen),a=n;a<i;a++)s[a]=a;return[s,n,i]},r.prototype.wdayset=function(e,t,n){for(var i=B(null,this.yearlen+7),s=I.toOrdinal(new Date(Date.UTC(e,t-1,n)))-this.yearordinal,a=s,o=0;o<7&&(i[s]=s,++s,this.wdaymask[s]!==this.options.wkst);o++);return[i,a,s]},r.prototype.ddayset=function(e,t,n){var i=B(null,this.yearlen),s=I.toOrdinal(new Date(Date.UTC(e,t-1,n)))-this.yearordinal;return i[s]=s,[i,s,s+1]},r.prototype.htimeset=function(e,t,n,i){var s=this,a=[];return this.options.byminute.forEach(function(o){a=a.concat(s.mtimeset(e,o,n,i))}),I.sort(a),a},r.prototype.mtimeset=function(e,t,n,i){var s=this.options.bysecond.map(function(a){return new on(e,t,a,i)});return I.sort(s),s},r.prototype.stimeset=function(e,t,n,i){return[new on(e,t,n,i)]},r.prototype.getdayset=function(e){switch(e){case Y.YEARLY:return this.ydayset.bind(this);case Y.MONTHLY:return this.mdayset.bind(this);case Y.WEEKLY:return this.wdayset.bind(this);case Y.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},r.prototype.gettimeset=function(e){switch(e){case Y.HOURLY:return this.htimeset.bind(this);case Y.MINUTELY:return this.mtimeset.bind(this);case Y.SECONDLY:return this.stimeset.bind(this)}},r}(),tp=nT;function rp(r,e,t,n,i,s){for(var a=[],o=0;o<r.length;o++){var u=void 0,l=void 0,c=r[o];c<0?(u=Math.floor(c/e.length),l=Ye(c,e.length)):(u=Math.floor((c-1)/e.length),l=Ye(c-1,e.length));for(var d=[],f=t;f<n;f++){var h=s[f];!ue(h)||d.push(h)}var g=void 0;u<0?g=d.slice(u)[0]:g=d[u];var m=e[l],y=I.fromOrdinal(i.yearordinal+g),P=I.combine(y,m);G(a,P)||a.push(P)}return I.sort(a),a}function Os(r,e){var t=e.dtstart,n=e.freq,i=e.interval,s=e.until,a=e.bysetpos,o=e.count;if(o===0||i===0)return Zt(r);var u=Uf.fromDate(t),l=new tp(e);l.rebuild(u.year,u.month);for(var c=aT(l,u,e);;){var d=l.getdayset(n)(u.year,u.month,u.day),f=d[0],h=d[1],g=d[2],m=sT(f,h,g,l,e);if(me(a))for(var y=rp(a,c,h,g,l,f),P=0;P<y.length;P++){var w=y[P];if(s&&w>s)return Zt(r);if(w>=t){var N=np(w,e);if(!r.accept(N)||o&&(--o,!o))return Zt(r)}}else for(var P=h;P<g;P++){var V=f[P];if(!!ue(V))for(var le=I.fromOrdinal(l.yearordinal+V),ye=0;ye<c.length;ye++){var ne=c[ye],w=I.combine(le,ne);if(s&&w>s)return Zt(r);if(w>=t){var N=np(w,e);if(!r.accept(N)||o&&(--o,!o))return Zt(r)}}}if(e.interval===0||(u.add(e,m),u.year>I.MAXYEAR))return Zt(r);Gn(n)||(c=l.gettimeset(n)(u.hour,u.minute,u.second,0)),l.rebuild(u.year,u.month)}}function iT(r,e,t){var n=t.bymonth,i=t.byweekno,s=t.byweekday,a=t.byeaster,o=t.bymonthday,u=t.bynmonthday,l=t.byyearday;return me(n)&&!G(n,r.mmask[e])||me(i)&&!r.wnomask[e]||me(s)&&!G(s,r.wdaymask[e])||me(r.nwdaymask)&&!r.nwdaymask[e]||a!==null&&!G(r.eastermask,e)||(me(o)||me(u))&&!G(o,r.mdaymask[e])&&!G(u,r.nmdaymask[e])||me(l)&&(e<r.yearlen&&!G(l,e+1)&&!G(l,-r.yearlen+e)||e>=r.yearlen&&!G(l,e+1-r.yearlen)&&!G(l,-r.nextyearlen+e-r.yearlen))}function np(r,e){return new Cr(r,e.tzid).rezonedDate()}function Zt(r){return r.getValue()}function sT(r,e,t,n,i){for(var s=!1,a=e;a<t;a++){var o=r[a];s=iT(n,o,i),s&&(r[o]=null)}return s}function aT(r,e,t){var n=t.freq,i=t.byhour,s=t.byminute,a=t.bysecond;return Gn(n)?Wf(t):n>=M.HOURLY&&me(i)&&!G(i,e.hour)||n>=M.MINUTELY&&me(s)&&!G(s,e.minute)||n>=M.SECONDLY&&me(a)&&!G(a,e.second)?[]:r.gettimeset(n)(e.hour,e.minute,e.second,e.millisecond)}var ft={MO:new ge(0),TU:new ge(1),WE:new ge(2),TH:new ge(3),FR:new ge(4),SA:new ge(5),SU:new ge(6)},Hn={freq:Y.YEARLY,dtstart:null,interval:1,wkst:ft.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},Lf=Object.keys(Hn),M=function(){function r(e,t){e===void 0&&(e={}),t===void 0&&(t=!1),this._cache=t?null:new jf,this.origOptions=fo(e);var n=qf(e).parsedOptions;this.options=n}return r.parseText=function(e,t){return Bn(e,t)},r.fromText=function(e,t){return If(e,t)},r.fromString=function(e){return new r(r.parseString(e)||void 0)},r.prototype._iter=function(e){return Os(e,this.options)},r.prototype._cacheGet=function(e,t){return this._cache?this._cache._cacheGet(e,t):!1},r.prototype._cacheAdd=function(e,t,n){if(!!this._cache)return this._cache._cacheAdd(e,t,n)},r.prototype.all=function(e){if(e)return this._iter(new co("all",{},e));var t=this._cacheGet("all");return t===!1&&(t=this._iter(new Vt("all",{})),this._cacheAdd("all",t)),t},r.prototype.between=function(e,t,n,i){if(n===void 0&&(n=!1),!I.isValidDate(e)||!I.isValidDate(t))throw new Error("Invalid date passed in to RRule.between");var s={before:t,after:e,inc:n};if(i)return this._iter(new co("between",s,i));var a=this._cacheGet("between",s);return a===!1&&(a=this._iter(new Vt("between",s)),this._cacheAdd("between",a,s)),a},r.prototype.before=function(e,t){if(t===void 0&&(t=!1),!I.isValidDate(e))throw new Error("Invalid date passed in to RRule.before");var n={dt:e,inc:t},i=this._cacheGet("before",n);return i===!1&&(i=this._iter(new Vt("before",n)),this._cacheAdd("before",i,n)),i},r.prototype.after=function(e,t){if(t===void 0&&(t=!1),!I.isValidDate(e))throw new Error("Invalid date passed in to RRule.after");var n={dt:e,inc:t},i=this._cacheGet("after",n);return i===!1&&(i=this._iter(new Vt("after",n)),this._cacheAdd("after",i,n)),i},r.prototype.count=function(){return this.all().length},r.prototype.toString=function(){return Vn(this.origOptions)},r.prototype.toText=function(e,t,n){return xf(this,e,t,n)},r.prototype.isFullyConvertibleToText=function(){return Ff(this)},r.prototype.clone=function(){return new r(this.origOptions)},r.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],r.YEARLY=Y.YEARLY,r.MONTHLY=Y.MONTHLY,r.WEEKLY=Y.WEEKLY,r.DAILY=Y.DAILY,r.HOURLY=Y.HOURLY,r.MINUTELY=Y.MINUTELY,r.SECONDLY=Y.SECONDLY,r.MO=ft.MO,r.TU=ft.TU,r.WE=ft.WE,r.TH=ft.TH,r.FR=ft.FR,r.SA=ft.SA,r.SU=ft.SU,r.parseString=Kn,r.optionsToString=Vn,r}();function ip(r,e,t,n,i,s){var a={},o=r.accept;function u(f,h){t.forEach(function(g){g.between(f,h,!0).forEach(function(m){a[Number(m)]=!0})})}i.forEach(function(f){var h=new Cr(f,s).rezonedDate();a[Number(h)]=!0}),r.accept=function(f){var h=Number(f);return isNaN(h)?o.call(this,f):!a[h]&&(u(new Date(h-1),new Date(h+1)),!a[h])?(a[h]=!0,o.call(this,f)):!0},r.method==="between"&&(u(r.args.after,r.args.before),r.accept=function(f){var h=Number(f);return a[h]?!0:(a[h]=!0,o.call(this,f))});for(var l=0;l<n.length;l++){var c=new Cr(n[l],s).rezonedDate();if(!r.accept(new Date(c.getTime())))break}e.forEach(function(f){Os(r,f.options)});var d=r._result;switch(I.sort(d),r.method){case"all":case"between":return d;case"before":return d.length&&d[d.length-1]||null;case"after":default:return d.length&&d[0]||null}}var sp={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function oT(r,e){var t=[],n=[],i=[],s=[],a=zn(r),o=a.dtstart,u=a.tzid,l=fT(r,e.unfold);return l.forEach(function(c){var d;if(!!c){var f=dT(c),h=f.name,g=f.parms,m=f.value;switch(h.toUpperCase()){case"RRULE":if(g.length)throw new Error("unsupported RRULE parm: ".concat(g.join(",")));t.push(Kn(c));break;case"RDATE":var y=(d=/RDATE(?:;TZID=([^:=]+))?/i.exec(c))!==null&&d!==void 0?d:[],P=y[1];P&&!u&&(u=P),n=n.concat(ap(m,g));break;case"EXRULE":if(g.length)throw new Error("unsupported EXRULE parm: ".concat(g.join(",")));i.push(Kn(m));break;case"EXDATE":s=s.concat(ap(m,g));break;case"DTSTART":break;default:throw new Error("unsupported property: "+h)}}}),{dtstart:o,tzid:u,rrulevals:t,rdatevals:n,exrulevals:i,exdatevals:s}}function uT(r,e){var t=oT(r,e),n=t.rrulevals,i=t.rdatevals,s=t.exrulevals,a=t.exdatevals,o=t.dtstart,u=t.tzid,l=e.cache===!1;if(e.compatible&&(e.forceset=!0,e.unfold=!0),e.forceset||n.length>1||i.length||s.length||a.length){var c=new mo(l);return c.dtstart(o),c.tzid(u||void 0),n.forEach(function(f){c.rrule(new M(ho(f,o,u),l))}),i.forEach(function(f){c.rdate(f)}),s.forEach(function(f){c.exrule(new M(ho(f,o,u),l))}),a.forEach(function(f){c.exdate(f)}),e.compatible&&e.dtstart&&c.rdate(o),c}var d=n[0]||{};return new M(ho(d,d.dtstart||e.dtstart||o,d.tzid||e.tzid||u),l)}function Ps(r,e){return e===void 0&&(e={}),uT(r,lT(e))}function ho(r,e,t){return Be(Be({},r),{dtstart:e,tzid:t})}function lT(r){var e=[],t=Object.keys(r),n=Object.keys(sp);if(t.forEach(function(i){G(n,i)||e.push(i)}),e.length)throw new Error("Invalid options: "+e.join(", "));return Be(Be({},sp),r)}function cT(r){if(r.indexOf(":")===-1)return{name:"RRULE",value:r};var e=lf(r,":",1),t=e[0],n=e[1];return{name:t,value:n}}function dT(r){var e=cT(r),t=e.name,n=e.value,i=t.split(";");if(!i)throw new Error("empty property name");return{name:i[0].toUpperCase(),parms:i.slice(1),value:n}}function fT(r,e){if(e===void 0&&(e=!1),r=r&&r.trim(),!r)throw new Error("Invalid empty string");if(!e)return r.split(/\s/);for(var t=r.split(`
`),n=0;n<t.length;){var i=t[n]=t[n].replace(/\s+$/g,"");i?n>0&&i[0]===" "?(t[n-1]+=i.slice(1),t.splice(n,1)):n+=1:t.splice(n,1)}return t}function pT(r){r.forEach(function(e){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(e))throw new Error("unsupported RDATE/EXDATE parm: "+e)})}function ap(r,e){return pT(e),r.split(",").map(function(t){return I.untilStringToDate(t)})}function op(r){var e=this;return function(t){if(t!==void 0&&(e["_".concat(r)]=t),e["_".concat(r)]!==void 0)return e["_".concat(r)];for(var n=0;n<e._rrule.length;n++){var i=e._rrule[n].origOptions[r];if(i)return i}}}var mo=function(r){sn(e,r);function e(t){t===void 0&&(t=!1);var n=r.call(this,{},t)||this;return n.dtstart=op.apply(n,["dtstart"]),n.tzid=op.apply(n,["tzid"]),n._rrule=[],n._rdate=[],n._exrule=[],n._exdate=[],n}return e.prototype._iter=function(t){return ip(t,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},e.prototype.rrule=function(t){up(t,this._rrule)},e.prototype.exrule=function(t){up(t,this._exrule)},e.prototype.rdate=function(t){lp(t,this._rdate)},e.prototype.exdate=function(t){lp(t,this._exdate)},e.prototype.rrules=function(){return this._rrule.map(function(t){return Ps(t.toString())})},e.prototype.exrules=function(){return this._exrule.map(function(t){return Ps(t.toString())})},e.prototype.rdates=function(){return this._rdate.map(function(t){return new Date(t.getTime())})},e.prototype.exdates=function(){return this._exdate.map(function(t){return new Date(t.getTime())})},e.prototype.valueOf=function(){var t=[];return!this._rrule.length&&this._dtstart&&(t=t.concat(Vn({dtstart:this._dtstart}))),this._rrule.forEach(function(n){t=t.concat(n.toString().split(`
`))}),this._exrule.forEach(function(n){t=t.concat(n.toString().split(`
`).map(function(i){return i.replace(/^RRULE:/,"EXRULE:")}).filter(function(i){return!/^DTSTART/.test(i)}))}),this._rdate.length&&t.push(cp("RDATE",this._rdate,this.tzid())),this._exdate.length&&t.push(cp("EXDATE",this._exdate,this.tzid())),t},e.prototype.toString=function(){return this.valueOf().join(`
`)},e.prototype.clone=function(){var t=new e(!!this._cache);return this._rrule.forEach(function(n){return t.rrule(n.clone())}),this._exrule.forEach(function(n){return t.exrule(n.clone())}),this._rdate.forEach(function(n){return t.rdate(new Date(n.getTime()))}),this._exdate.forEach(function(n){return t.exdate(new Date(n.getTime()))}),t},e}(M);function up(r,e){if(!(r instanceof M))throw new TypeError(String(r)+" is not RRule instance");G(e.map(String),String(r))||e.push(r)}function lp(r,e){if(!(r instanceof Date))throw new TypeError(String(r)+" is not Date instance");G(e.map(Number),Number(r))||(e.push(r),I.sort(e))}function cp(r,e,t){var n=!t||t.toUpperCase()==="UTC",i=n?"".concat(r,":"):"".concat(r,";TZID=").concat(t,":"),s=e.map(function(a){return I.timeToUntilString(a.valueOf(),n)}).join(",");return"".concat(i).concat(s)}var K=class{static by(e,t){let n=[K.compareByUrgency,K.compareByStatus,K.compareByDueDate,K.compareByPriority,K.compareByPath],i=[];for(let{property:s,reverse:a,propertyInstance:o}of e.sorting){let u=K.comparators[s];i.push(a?K.makeReversedComparator(u):u),s==="tag"&&(K.tagPropertyInstance=o)}return t.sort(K.makeCompositeComparator([...i,...n]))}static makeReversedComparator(e){return(t,n)=>e(t,n)*-1}static makeCompositeComparator(e){return(t,n)=>{for(let i of e){let s=i(t,n);if(s!==0)return s}return 0}}static compareByUrgency(e,t){return t.urgency-e.urgency}static compareByStatus(e,t){return e.status<t.status?1:e.status>t.status?-1:0}static compareByPriority(e,t){return e.priority.localeCompare(t.priority)}static compareByStartDate(e,t){return K.compareByDate(e.startDate,t.startDate)}static compareByScheduledDate(e,t){return K.compareByDate(e.scheduledDate,t.scheduledDate)}static compareByDueDate(e,t){return K.compareByDate(e.dueDate,t.dueDate)}static compareByDoneDate(e,t){return K.compareByDate(e.doneDate,t.doneDate)}static compareByTag(e,t){if(e.tags.length===0&&t.tags.length===0)return 0;if(e.tags.length===0)return 1;if(t.tags.length===0)return-1;let n=K.tagPropertyInstance-1;return e.tags.length<K.tagPropertyInstance&&t.tags.length>=K.tagPropertyInstance?1:t.tags.length<K.tagPropertyInstance&&e.tags.length>=K.tagPropertyInstance?-1:e.tags.length<K.tagPropertyInstance&&t.tags.length<K.tagPropertyInstance?0:e.tags[n]<t.tags[n]?-1:e.tags[n]>t.tags[n]?1:0}static compareByDate(e,t){return e!==null&&t===null?-1:e===null&&t!==null?1:e!==null&&t!==null?e.isValid()&&!t.isValid()?-1:!e.isValid()&&t.isValid()||e.isAfter(t)?1:e.isBefore(t)?-1:0:0}static compareByPath(e,t){return e.path<t.path?-1:e.path>t.path?1:0}static compareByDescription(e,t){return K.cleanDescription(e.description).localeCompare(K.cleanDescription(t.description))}static cleanDescription(e){let t=z().globalFilter;e=e.replace(t,"").trim();let n=/^\[\[?([^\]]*)\]/,i=e.match(n);if(i!==null){let l=i[1];e=l.substring(l.indexOf("|")+1)+e.replace(n,"")}let s=/^\*\*?([^*]*)\*/,a=e.match(s);a!==null&&(e=a[1]+e.replace(n,""));let o=/^==?([^=]*)==/,u=e.match(o);return u!==null&&(e=u[1]+e.replace(o,"")),e}},Ke=K;Ke.tagPropertyInstance=1,Ke.comparators={urgency:K.compareByUrgency,description:K.compareByDescription,priority:K.compareByPriority,start:K.compareByStartDate,scheduled:K.compareByScheduledDate,due:K.compareByDueDate,done:K.compareByDoneDate,path:K.compareByPath,status:K.compareByStatus,tag:K.compareByTag};var De=class{constructor({rrule:e,baseOnToday:t,referenceDate:n,startDate:i,scheduledDate:s,dueDate:a}){this.rrule=e,this.baseOnToday=t,this.referenceDate=n,this.startDate=i,this.scheduledDate=s,this.dueDate=a}static fromText({recurrenceRuleText:e,startDate:t,scheduledDate:n,dueDate:i}){try{let s=e.match(/^([a-zA-Z0-9, !]+?)( when done)?$/i);if(s==null)return null;let a=s[1].trim(),o=s[2]!==void 0,u=M.parseText(a);if(u!==null){let l=null;i?l=window.moment(i):n?l=window.moment(n):t&&(l=window.moment(t)),!o&&l!==null?u.dtstart=window.moment(l).startOf("day").utc(!0).toDate():u.dtstart=window.moment().startOf("day").utc(!0).toDate();let c=new M(u);return new De({rrule:c,baseOnToday:o,referenceDate:l,startDate:t,scheduledDate:n,dueDate:i})}}catch(s){}return null}toText(){let e=this.rrule.toText();return this.baseOnToday&&(e+=" when done"),e}next(){var t;let e;if(this.baseOnToday){let n=window.moment(),i=new M(lt(Re({},this.rrule.origOptions),{dtstart:n.startOf("day").utc(!0).toDate()}));e=this.nextAfter(n.endOf("day"),i)}else{let n=window.moment((t=this.referenceDate)!=null?t:void 0).endOf("day");e=this.nextAfter(n,this.rrule)}if(e!==null){let n=null,i=null,s=null;if(this.referenceDate){if(this.startDate){let a=window.moment.duration(this.startDate.diff(this.referenceDate));n=window.moment(e),n.add(Math.round(a.asDays()),"days")}if(this.scheduledDate){let a=window.moment.duration(this.scheduledDate.diff(this.referenceDate));i=window.moment(e),i.add(Math.round(a.asDays()),"days")}if(this.dueDate){let a=window.moment.duration(this.dueDate.diff(this.referenceDate));s=window.moment(e),s.add(Math.round(a.asDays()),"days")}}return{startDate:n,scheduledDate:i,dueDate:s}}return null}identicalTo(e){return this.baseOnToday!==e.baseOnToday||Ke.compareByDate(this.startDate,e.startDate)!==0||Ke.compareByDate(this.scheduledDate,e.scheduledDate)!==0||Ke.compareByDate(this.dueDate,e.dueDate)!==0?!1:this.toText()===e.toText()}nextAfter(e,t){e.utc(!0);let n=window.moment(t.after(e.toDate())),i=this.toText(),s=i.match(/every( \d+)? month(s)?(.*)?/);s!==null&&(i.includes(" on ")||(n=De.nextAfterMonths(e,n,t,s[1])));let a=i.match(/every( \d+)? year(s)?(.*)?/);return a!==null&&(n=De.nextAfterYears(e,n,t,a[1])),De.addTimezone(n).toDate()}static nextAfterMonths(e,t,n,i){let s=1;for(i!==void 0&&(s=Number.parseInt(i.trim(),10));De.isSkippingTooManyMonths(e,t,s);)t=De.fromOneDayEarlier(e,n);return t}static isSkippingTooManyMonths(e,t,n){let i=t.month()-e.month();return i+=(t.year()-e.year())*12,i>n}static nextAfterYears(e,t,n,i){let s=1;for(i!==void 0&&(s=Number.parseInt(i.trim(),10));De.isSkippingTooManyYears(e,t,s);)t=De.fromOneDayEarlier(e,n);return t}static isSkippingTooManyYears(e,t,n){return t.year()-e.year()>n}static fromOneDayEarlier(e,t){e.subtract(1,"days").endOf("day");let n=t.origOptions;return n.dtstart=e.startOf("day").toDate(),t=new M(n),window.moment(t.after(e.toDate()))}static addTimezone(e){return window.moment.utc(e).local(!0).startOf("day")}};var Qt=class{static calculate(e){let t=0;if(e.dueDate!==null){let n=Math.round(window.moment().diff(e.dueDate)/Qt.milliSecondsPerDay),i;n>=7?i=1:n>=-14?i=(n+14)*.8/21+.2:i=.2,t+=i*Qt.dueCoefficient}switch(e.scheduledDate!==null&&window.moment().isSameOrAfter(e.scheduledDate)&&(t+=1*Qt.scheduledCoefficient),e.startDate!==null&&window.moment().isBefore(e.startDate)&&(t+=1*Qt.startedCoefficient),e.priority){case"1":t+=1*Qt.priorityCoefficient;break;case"2":t+=.65*Qt.priorityCoefficient;break;case"3":t+=.325*Qt.priorityCoefficient;break}return t}},Xt=Qt;Xt.dueCoefficient=12,Xt.scheduledCoefficient=5,Xt.startedCoefficient=-3,Xt.priorityCoefficient=6,Xt.milliSecondsPerDay=1e3*60*60*24;var rt=class{static fromPath(e){let{useFilenameAsScheduledDate:t,filenameAsDateFolders:n}=z();return!t||!this.matchesAnyFolder(n,e)?null:this.extractDateFromPath(e)}static matchesAnyFolder(e,t){return e.length===0?!0:e.some(n=>t.startsWith(n+"/"))}static extractDateFromPath(e){let t=Math.max(0,e.lastIndexOf("/")+1),n=e.lastIndexOf("."),i=e.substring(t,n),s=/(\d{4})-(\d{2})-(\d{2})/.exec(i);if(s||(s=/(\d{4})(\d{2})(\d{2})/.exec(i)),s){let a=window.moment([parseInt(s[1]),parseInt(s[2])-1,parseInt(s[3])]);if(a.isValid())return a}return null}static canApplyFallback({startDate:e,scheduledDate:t,dueDate:n}){return e===null&&n===null&&t===null}static updateTaskPath(e,t,n){let i=e.scheduledDate,s=e.scheduledDateIsInferred;return n===null?s&&(s=!1,i=null):s?i=n:this.canApplyFallback(e)&&(i=n,s=!0),new ie(lt(Re({},e),{path:t,scheduledDate:i,scheduledDateIsInferred:s}))}static removeInferredStatusIfNeeded(e,t){let n=e.scheduledDateIsInferred?e.scheduledDate:null;return t.map(i=>(n!==null&&!n.isSame(i.scheduledDate,"day")&&(i=new ie(lt(Re({},i),{scheduledDateIsInferred:!1}))),i))}};var Ee={High:"\u23EB",Medium:"\u{1F53C}",Low:"\u{1F53D}",None:""},xt="\u{1F501}",Ft="\u{1F6EB}",Ut="\u23F3",qt="\u{1F4C5}",yo="\u2705",nt=class{},D=nt;D.dateFormat="YYYY-MM-DD",D.indentationRegex=/^([\s\t>]*)/,D.listMarkerRegex=/[-*]/,D.checkboxRegex=/\[(.)\]/u,D.afterCheckboxRegex=/ *(.*)/u,D.taskRegex=new RegExp(nt.indentationRegex.source+nt.listMarkerRegex.source+" +"+nt.checkboxRegex.source+nt.afterCheckboxRegex.source,"u"),D.nonTaskRegex=new RegExp(nt.indentationRegex.source+nt.listMarkerRegex.source+"? *("+nt.checkboxRegex.source+")?"+nt.afterCheckboxRegex.source,"u"),D.listItemRegex=new RegExp(nt.indentationRegex.source+"("+nt.listMarkerRegex.source+")"),D.blockLinkRegex=/ \^[a-zA-Z0-9-]+$/u,D.priorityRegex=/([⏫🔼🔽])$/u,D.startDateRegex=/🛫 *(\d{4}-\d{2}-\d{2})$/u,D.scheduledDateRegex=/[⏳⌛] *(\d{4}-\d{2}-\d{2})$/u,D.dueDateRegex=/[📅📆🗓] *(\d{4}-\d{2}-\d{2})$/u,D.doneDateRegex=/✅ *(\d{4}-\d{2}-\d{2})$/u,D.recurrenceRegex=/🔁 ?([a-zA-Z0-9, !]+)$/iu,D.hashTags=/(^|\s)#[^ !@#$%^&*(),.?":{}|<>]*/g,D.hashTagsFromEnd=new RegExp(nt.hashTags.source+"$");var ie=class{constructor({status:e,description:t,path:n,indentation:i,sectionStart:s,sectionIndex:a,originalStatusCharacter:o,precedingHeader:u,priority:l,startDate:c,scheduledDate:d,dueDate:f,doneDate:h,recurrence:g,blockLink:m,tags:y,originalMarkdown:P,scheduledDateIsInferred:w}){this._urgency=null;this.status=e,this.description=t,this.path=n,this.indentation=i,this.sectionStart=s,this.sectionIndex=a,this.originalStatusCharacter=o,this.precedingHeader=u,this.tags=y,this.priority=l,this.startDate=c,this.scheduledDate=d,this.dueDate=f,this.doneDate=h,this.recurrence=g,this.blockLink=m,this.originalMarkdown=P,this.scheduledDateIsInferred=w}static fromLine({line:e,path:t,sectionStart:n,sectionIndex:i,precedingHeader:s,fallbackDate:a}){let o=e.match(D.taskRegex);if(o===null)return null;let u=o[3].trim(),{globalFilter:l}=z();if(!u.includes(l))return null;let c=u,d=o[1],f=o[2],h;switch(f){case" ":h="Todo";break;default:h="Done"}let g=c.match(D.blockLinkRegex),m=g!==null?g[0]:"";m!==""&&(c=c.replace(D.blockLinkRegex,"").trim());let y,P="3",w=null,N=null,V=!1,le=null,ye=null,ne="",$=null,ut=[],We="",S=20,E=0;do{y=!1;let A=c.match(D.priorityRegex);if(A!==null){switch(A[1]){case Ee.Low:P="4";break;case Ee.Medium:P="2";break;case Ee.High:P="1";break}c=c.replace(D.priorityRegex,"").trim(),y=!0}let _=c.match(D.doneDateRegex);_!==null&&(ye=window.moment(_[1],D.dateFormat),c=c.replace(D.doneDateRegex,"").trim(),y=!0);let C=c.match(D.dueDateRegex);C!==null&&(le=window.moment(C[1],D.dateFormat),c=c.replace(D.dueDateRegex,"").trim(),y=!0);let k=c.match(D.scheduledDateRegex);k!==null&&(N=window.moment(k[1],D.dateFormat),c=c.replace(D.scheduledDateRegex,"").trim(),y=!0);let x=c.match(D.startDateRegex);x!==null&&(w=window.moment(x[1],D.dateFormat),c=c.replace(D.startDateRegex,"").trim(),y=!0);let te=c.match(D.recurrenceRegex);te!==null&&(ne=te[1].trim(),c=c.replace(D.recurrenceRegex,"").trim(),y=!0);let H=c.match(D.hashTagsFromEnd);if(H!=null){c=c.replace(D.hashTagsFromEnd,"").trim(),y=!0;let oe=H[0].trim();We=We.length>0?[oe,We].join(" "):oe}E++}while(y&&E<=S);ne.length>0&&($=De.fromText({recurrenceRuleText:ne,startDate:w,scheduledDate:N,dueDate:le})),rt.canApplyFallback({startDate:w,scheduledDate:N,dueDate:le})&&a!==null&&(N=a,V=!0),We.length>0&&(c+=" "+We);let b=c.match(D.hashTags);return b!==null&&(ut=b.filter(A=>A!==l).map(A=>A.trim())),new ie({status:h,description:c,path:t,indentation:d,sectionStart:n,sectionIndex:i,originalStatusCharacter:f,precedingHeader:s,priority:P,startDate:w,scheduledDate:N,dueDate:le,doneDate:ye,recurrence:$,blockLink:m,tags:ut,originalMarkdown:e,scheduledDateIsInferred:V})}toLi(s){return J(this,arguments,function*({parentUlElement:e,listIndex:t,layoutOptions:n,isFilenameUnique:i}){let a=e.createEl("li");a.addClasses(["task-list-item","plugin-tasks-list-item"]);let o=this.toString(n),{globalFilter:u,removeGlobalFilter:l}=z();l&&(o=o.replace(u,"").trim());let c=a.createSpan();c.addClass("tasks-list-text"),yield dp.MarkdownRenderer.renderMarkdown(o,c,this.path,null);let d=c.querySelector("blockquote"),f=d!=null?d:c,h=f.querySelector("p");if(h!==null){for(;h.firstChild;)f.insertBefore(h.firstChild,h);h.remove()}c.findAll("p").forEach(m=>{m.hasChildNodes()||m.remove()}),c.findAll(".footnotes").forEach(m=>{m.remove()});let g=a.createEl("input");return g.addClass("task-list-item-checkbox"),g.type="checkbox",this.status!=="Todo"&&(g.checked=!0,a.addClass("is-checked")),g.onClickEvent(m=>{m.preventDefault(),m.stopPropagation(),g.disabled=!0;let y=this.toggle();vs({originalTask:this,newTasks:y})}),a.prepend(g),a.setAttr("data-task",this.originalStatusCharacter.trim()),a.setAttr("data-line",t),g.setAttr("data-line",t),n!=null&&n.shortMode&&this.addTooltip({element:c,isFilenameUnique:i}),a})}toString(e){var i;e=e!=null?e:new rn;let t=this.description;if(!e.hidePriority){let s="";this.priority==="1"?s=" "+Ee.High:this.priority==="2"?s=" "+Ee.Medium:this.priority==="4"&&(s=" "+Ee.Low),t+=s}return!e.hideRecurrenceRule&&this.recurrence&&(t+=e.shortMode?" "+xt:` ${xt} ${this.recurrence.toText()}`),!e.hideStartDate&&this.startDate&&(t+=e.shortMode?" "+Ft:` ${Ft} ${this.startDate.format(D.dateFormat)}`),!e.hideScheduledDate&&this.scheduledDate&&!this.scheduledDateIsInferred&&(t+=e.shortMode?" "+Ut:` ${Ut} ${this.scheduledDate.format(D.dateFormat)}`),!e.hideDueDate&&this.dueDate&&(t+=e.shortMode?" "+qt:` ${qt} ${this.dueDate.format(D.dateFormat)}`),!e.hideDoneDate&&this.doneDate&&(t+=e.shortMode?" "+yo:` ${yo} ${this.doneDate.format(D.dateFormat)}`),t+=(i=this.blockLink)!=null?i:"",t}toFileLineString(){return`${this.indentation}- [${this.originalStatusCharacter}] ${this.toString()}`}toggle(){let e=this.status==="Todo"?"Done":"Todo",t=null,n=null;if(e!=="Todo"){let{setDoneDate:a}=z();a&&(t=window.moment()),this.recurrence!==null&&(n=this.recurrence.next())}let i=new ie(lt(Re({},this),{status:e,doneDate:t,originalStatusCharacter:e==="Done"?"x":" "})),s=[];if(n!==null){let a=new ie(lt(Re(Re({},this),n),{blockLink:""}));s.push(a)}return s.push(i),s}get urgency(){return this._urgency===null&&(this._urgency=Xt.calculate(this)),this._urgency}get filename(){let e=this.path.match(/([^/]+)\.md$/);return e!==null?e[1]:null}getLinkText({isFilenameUnique:e}){let t;return e?t=this.filename:t="/"+this.path,t===null?null:(this.precedingHeader!==null&&this.precedingHeader!==t&&(t=t+" > "+this.precedingHeader),t)}static tasksListsIdentical(e,t){return e.length!==t.length?!1:e.every((n,i)=>n.identicalTo(t[i]))}identicalTo(e){let t=["status","description","path","indentation","sectionStart","sectionIndex","originalStatusCharacter","precedingHeader","priority","blockLink","scheduledDateIsInferred"];for(let s of t)if(this[s]!==e[s])return!1;if(this.tags.length!==e.tags.length||!this.tags.every(function(s,a){return s===e.tags[a]}))return!1;t=["startDate","scheduledDate","dueDate","doneDate"];for(let s of t){let a=this[s],o=e[s];if(Ke.compareByDate(a,o)!==0)return!1}let n=this.recurrence,i=e.recurrence;return n===null&&i!==null||n!==null&&i===null?!1:!(n&&i&&!n.identicalTo(i))}addTooltip({element:e,isFilenameUnique:t}){e.addEventListener("mouseenter",()=>{let n=e.createDiv();n.addClasses(["tooltip","mod-right"]),this.recurrence&&n.createDiv().setText(`${xt} ${this.recurrence.toText()}`),this.startDate&&n.createDiv().setText(ie.toTooltipDate({signifier:Ft,date:this.startDate})),this.scheduledDate&&n.createDiv().setText(ie.toTooltipDate({signifier:Ut,date:this.scheduledDate})),this.dueDate&&n.createDiv().setText(ie.toTooltipDate({signifier:qt,date:this.dueDate})),this.doneDate&&n.createDiv().setText(ie.toTooltipDate({signifier:yo,date:this.doneDate}));let i=this.getLinkText({isFilenameUnique:t});i&&n.createDiv().setText(`\u{1F517} ${i}`),e.addEventListener("mouseleave",()=>{n.remove()})})}static toTooltipDate({signifier:e,date:t}){return`${e} ${t.format(D.dateFormat)} (${t.from(window.moment().startOf("day"))})`}escapeRegExp(e){return e.replace(/([.*+?^${}()|[\]/\\])/g,"\\$1")}getDescriptionWithoutGlobalFilter(){let{globalFilter:e}=z(),t=this.description;if(e.length===0)return t;let n=RegExp("(^|\\s)"+this.escapeRegExp(e)+"($|\\s)","ug");return this.description.search(n)>-1&&(t=t.replace(n,"$1$2").replace("  "," ").trim()),t}};var Zn=class{constructor(e){this.fetch=e;this._value=void 0}get value(){return this._value===void 0&&(this._value=this.fetch()),this._value}};var _r=class{constructor({metadataCache:e,vault:t,events:n}){this.metadataCache=e,this.metadataCacheEventReferences=[],this.vault=t,this.vaultEventReferences=[],this.events=n,this.eventsEventReferences=[],this.tasksMutex=new bs,this.state="Cold",this.tasks=[],this.loadedAfterFirstResolve=!1,this.subscribeToCache(),this.subscribeToVault(),this.subscribeToEvents(),this.loadVault()}unload(){for(let e of this.metadataCacheEventReferences)this.metadataCache.offref(e);for(let e of this.vaultEventReferences)this.vault.offref(e);for(let e of this.eventsEventReferences)this.events.off(e)}getTasks(){return this.tasks}getState(){return this.state}notifySubscribers(){this.events.triggerCacheUpdate({tasks:this.tasks,state:this.state})}subscribeToCache(){let e=this.metadataCache.on("resolved",()=>J(this,null,function*(){this.loadedAfterFirstResolve||(this.loadedAfterFirstResolve=!0,this.loadVault())}));this.metadataCacheEventReferences.push(e);let t=this.metadataCache.on("changed",n=>{this.tasksMutex.runExclusive(()=>{this.indexFile(n)})});this.metadataCacheEventReferences.push(t)}subscribeToVault(){let{useFilenameAsScheduledDate:e}=z(),t=this.vault.on("create",s=>{s instanceof As.TFile&&this.tasksMutex.runExclusive(()=>{this.indexFile(s)})});this.vaultEventReferences.push(t);let n=this.vault.on("delete",s=>{s instanceof As.TFile&&this.tasksMutex.runExclusive(()=>{this.tasks=this.tasks.filter(a=>a.path!==s.path),this.notifySubscribers()})});this.vaultEventReferences.push(n);let i=this.vault.on("rename",(s,a)=>{s instanceof As.TFile&&this.tasksMutex.runExclusive(()=>{let o=new Zn(()=>rt.fromPath(s.path));this.tasks=this.tasks.map(u=>u.path===a?e?rt.updateTaskPath(u,s.path,o.value):new ie(lt(Re({},u),{path:s.path})):u),this.notifySubscribers()})});this.vaultEventReferences.push(i)}subscribeToEvents(){let e=this.events.onRequestCacheUpdate(t=>{t({tasks:this.tasks,state:this.state})});this.eventsEventReferences.push(e)}loadVault(){return this.tasksMutex.runExclusive(()=>J(this,null,function*(){this.state="Initializing",yield Promise.all(this.vault.getMarkdownFiles().map(e=>this.indexFile(e))),this.state="Warm",this.notifySubscribers()}))}indexFile(e){return J(this,null,function*(){let t=this.metadataCache.getFileCache(e);if(t==null)return;let n=this.tasks.filter(a=>a.path===e.path),i=t.listItems,s=[];if(i!==void 0){let a=yield this.vault.cachedRead(e);s=_r.getTasksFromFileContent(a,i,t,e)}ie.tasksListsIdentical(n,s)||(this.getState()=="Warm"&&console.debug(`At least one task, its line number or its heading has changed in ${e.path}: triggering a refresh of all active Tasks blocks in Live Preview and Reading mode views.`),this.tasks=this.tasks.filter(a=>a.path!==e.path),this.tasks.push(...s),this.notifySubscribers())})}static getTasksFromFileContent(e,t,n,i){let s=[],a=e.split(`
`),o=new Zn(()=>rt.fromPath(i.path)),u=null,l=0;for(let c of t)if(c.task!==void 0){if((u===null||u.position.end.line<c.position.start.line)&&(u=_r.getSection(c.position.start.line,n.sections),l=0),u===null)continue;let d=a[c.position.start.line],f=ie.fromLine({line:d,path:i.path,sectionStart:u.position.start.line,sectionIndex:l,precedingHeader:_r.getPrecedingHeader(c.position.start.line,n.headings),fallbackDate:o.value});f!==null&&(l++,s.push(f))}return s}static getSection(e,t){if(t===void 0)return null;for(let n of t)if(n.position.start.line<=e&&n.position.end.line>=e)return n;return null}static getPrecedingHeader(e,t){if(t===void 0)return null;let n=null;for(let i of t){if(i.position.start.line>e)return n;n=i.heading}return n}};var md=require("obsidian");var i_=require("obsidian");function xr(){}function bo(r){return r()}function pp(){return Object.create(null)}function Fr(r){r.forEach(bo)}function mp(r){return typeof r=="function"}function yp(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}function gp(r){return Object.keys(r).length===0}var _p=!1;function hT(){_p=!0}function mT(){_p=!1}function v(r,e){r.appendChild(e)}function ei(r,e,t){r.insertBefore(e,t||null)}function un(r){r.parentNode.removeChild(r)}function Tp(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function q(r){return document.createElement(r)}function yT(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function Wt(r){return document.createTextNode(r)}function Z(){return Wt(" ")}function wt(r,e,t,n){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}function bp(r){return function(e){return e.preventDefault(),r.call(this,e)}}function O(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function gT(r){return Array.from(r.childNodes)}function vp(r,e){e=""+e,r.wholeText!==e&&(r.data=e)}function Rt(r,e){r.value=e==null?"":e}function vo(r,e,t){r.classList[t?"add":"remove"](e)}var Ir=class{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=yT(t.nodeName):this.e=q(t.nodeName),this.t=t,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)ei(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(un)}};var Jn;function Qn(r){Jn=r}function _T(){if(!Jn)throw new Error("Function called outside component initialization");return Jn}function Eo(r){_T().$$.on_mount.push(r)}var Xn=[];var Ss=[],Ns=[],hp=[],TT=Promise.resolve(),_o=!1;function bT(){_o||(_o=!0,TT.then(Ep))}function To(r){Ns.push(r)}var go=new Set,ks=0;function Ep(){let r=Jn;do{for(;ks<Xn.length;){let e=Xn[ks];ks++,Qn(e),vT(e.$$)}for(Qn(null),Xn.length=0,ks=0;Ss.length;)Ss.pop()();for(let e=0;e<Ns.length;e+=1){let t=Ns[e];go.has(t)||(go.add(t),t())}Ns.length=0}while(Xn.length);for(;hp.length;)hp.pop()();_o=!1,go.clear(),Qn(r)}function vT(r){if(r.fragment!==null){r.update(),Fr(r.before_update);let e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(To)}}var ET=new Set;function wT(r,e){r&&r.i&&(ET.delete(r),r.i(e))}var YS=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function RT(r,e,t,n){let{fragment:i,on_mount:s,on_destroy:a,after_update:o}=r.$$;i&&i.m(e,t),n||To(()=>{let u=s.map(bo).filter(mp);a?a.push(...u):Fr(u),r.$$.on_mount=[]}),o.forEach(To)}function wp(r,e){let t=r.$$;t.fragment!==null&&(Fr(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function DT(r,e){r.$$.dirty[0]===-1&&(Xn.push(r),bT(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function Rp(r,e,t,n,i,s,a,o=[-1]){let u=Jn;Qn(r);let l=r.$$={fragment:null,ctx:null,props:s,update:xr,not_equal:i,bound:pp(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:pp(),dirty:o,skip_bound:!1,root:e.target||u.$$.root};a&&a(l.root);let c=!1;if(l.ctx=t?t(r,e.props||{},(d,f,...h)=>{let g=h.length?h[0]:f;return l.ctx&&i(l.ctx[d],l.ctx[d]=g)&&(!l.skip_bound&&l.bound[d]&&l.bound[d](g),c&&DT(r,d)),f}):[],l.update(),c=!0,Fr(l.before_update),l.fragment=n?n(l.ctx):!1,e.target){if(e.hydrate){hT();let d=gT(e.target);l.fragment&&l.fragment.l(d),d.forEach(un)}else l.fragment&&l.fragment.c();e.intro&&wT(r.$$.fragment),RT(r,e.target,e.anchor,e.customElement),mT(),Ep()}Qn(u)}var MT;typeof HTMLElement=="function"&&(MT=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:r}=this.$$;this.$$.on_disconnect=r.map(bo).filter(mp);for(let e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(r,e,t){this[r]=t}disconnectedCallback(){Fr(this.$$.on_disconnect)}$destroy(){wp(this,1),this.$destroy=xr}$on(r,e){let t=this.$$.callbacks[r]||(this.$$.callbacks[r]=[]);return t.push(e),()=>{let n=t.indexOf(e);n!==-1&&t.splice(n,1)}}$set(r){this.$$set&&!gp(r)&&(this.$$.skip_bound=!0,this.$$set(r),this.$$.skip_bound=!1)}});var Cs=class{$destroy(){wp(this,1),this.$destroy=xr}$on(e,t){let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{let i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!gp(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var ts=Ts(we());var BP={td:"today",tm:"tomorrow",yd:"yesterday",tw:"this week",nw:"next week",weekend:"sat",we:"sat"};function Dn(r){for(let[e,t]of Object.entries(BP))r=r.replace(RegExp(`\\b${e}\\s`,"i"),t);return r}function e_(r,e,t){let n=r.slice();return n[28]=e[t].value,n[29]=e[t].label,n[30]=e[t].symbol,n}function GP(r){let e,t=r[30]+"",n;return{c(){e=q("span"),n=Wt(t)},m(i,s){ei(i,e,s),v(e,n)},p:xr,d(i){i&&un(e)}}}function t_(r){let e,t,n,i,s,a,o,u,l=r[29]+"",c,d,f=r[30]&&r[30].charCodeAt(0)>=256,h,g,m,y,P=f&&GP(r);return{c(){e=q("span"),t=q("input"),a=Z(),o=q("label"),u=q("span"),c=Wt(l),d=Z(),P&&P.c(),g=Z(),O(t,"type","radio"),O(t,"id",n="priority-"+r[28]),t.__value=i=r[28],t.value=t.__value,O(t,"accesskey",s=r[8](r[29].charAt(0).toLowerCase())),r[20][0].push(t),O(u,"class","accesskey-first"),O(o,"for",h="priority-"+r[28])},m(w,N){ei(w,e,N),v(e,t),t.checked=t.__value===r[0].priority,v(e,a),v(e,o),v(o,u),v(u,c),v(o,d),P&&P.m(o,null),v(e,g),m||(y=wt(t,"change",r[19]),m=!0)},p(w,N){N[0]&256&&s!==(s=w[8](w[29].charAt(0).toLowerCase()))&&O(t,"accesskey",s),N[0]&1&&(t.checked=t.__value===w[0].priority),f&&P.p(w,N)},d(w){w&&un(e),r[20][0].splice(r[20][0].indexOf(t),1),P&&P.d(),m=!1,y()}}}function HP(r){let e,t,n,i,s,a,o,u,l,c,d,f,h,g,m,y,P,w,N,V,le,ye,ne,$,ut,We,S,E,b,A,_,C,k,x,te,H,oe,fe,Ce,He,Qe,zt,Ie,Je,Qr,Kt,Ud,Et,ds,qd,Un,Wd,Ld,fs,Yd,qn,ps,$d,St,hs,jd,Jr,kr,ms,Bd,hr,ys,Gd,to,gs=r[0].status+"",ro,Hd,Wn,no,zd,_s,Kd,en,Ln,Vd,Yn,io,Zd,tn=r[9],ze=[];for(let F=0;F<tn.length;F+=1)ze[F]=t_(e_(r,tn,F));return{c(){e=q("div"),t=q("form"),n=q("div"),i=q("label"),i.innerHTML='Descrip<span class="accesskey">t</span>ion',s=Z(),a=q("input"),u=Z(),l=q("div"),c=q("label"),d=Wt("Priority"),h=Z();for(let F=0;F<ze.length;F+=1)ze[F].c();g=Z(),m=q("div"),y=q("label"),y.textContent="Recurs",P=Z(),w=q("input"),V=Z(),le=q("code"),ye=Wt(xt),ne=Z(),$=new Ir(!1),ut=Z(),We=q("label"),We.textContent="Due",S=Z(),E=q("input"),A=Z(),_=q("code"),C=Wt(qt),k=Z(),x=new Ir(!1),te=Z(),H=q("label"),H.textContent="Scheduled",oe=Z(),fe=q("input"),He=Z(),Qe=q("code"),zt=Wt(Ut),Ie=Z(),Je=new Ir(!1),Qr=Z(),Kt=q("label"),Kt.innerHTML='St<span class="accesskey">a</span>rt',Ud=Z(),Et=q("input"),qd=Z(),Un=q("code"),Wd=Wt(Ft),Ld=Z(),fs=new Ir(!1),Yd=Z(),qn=q("div"),ps=q("label"),ps.innerHTML=`Only
                    <span class="accesskey-first">future</span> dates:`,$d=Z(),St=q("input"),jd=Z(),Jr=q("div"),kr=q("div"),ms=q("label"),ms.textContent="Status:",Bd=Z(),hr=q("input"),Gd=Z(),to=q("code"),ro=Wt(gs),Hd=Z(),Wn=q("div"),no=q("span"),no.textContent="Done on:",zd=Z(),_s=q("code"),Kd=Z(),en=q("div"),Ln=q("button"),Ln.textContent="Apply",Vd=Z(),Yn=q("button"),Yn.textContent="Cancel",O(i,"for","description"),O(a,"id","description"),O(a,"type","text"),O(a,"class","tasks-modal-description"),O(a,"placeholder","Take out the trash"),O(a,"accesskey",o=r[8]("t")),O(n,"class","tasks-modal-section"),O(c,"for",f="priority-"+r[0].priority),O(l,"class","tasks-modal-section tasks-modal-priorities"),O(y,"for","recurrence"),O(y,"class","accesskey-first"),O(w,"id","description"),O(w,"type","text"),O(w,"placeholder","Try 'every 2 weeks on Thursday'."),O(w,"accesskey",N=r[8]("r")),$.a=null,O(We,"for","due"),O(We,"class","accesskey-first"),O(E,"id","due"),O(E,"type","text"),O(E,"placeholder",fd),O(E,"accesskey",b=r[8]("d")),x.a=null,O(H,"for","scheduled"),O(H,"class","accesskey-first"),O(fe,"id","scheduled"),O(fe,"type","text"),O(fe,"placeholder",fd),O(fe,"accesskey",Ce=r[8]("s")),Je.a=null,O(Kt,"for","start"),O(Et,"id","start"),O(Et,"type","text"),O(Et,"placeholder",fd),O(Et,"accesskey",ds=r[8]("a")),fs.a=null,O(ps,"for","forwardOnly"),O(St,"id","forwardOnly"),O(St,"type","checkbox"),O(St,"class","task-list-item-checkbox tasks-modal-checkbox"),O(St,"accesskey",hs=r[8]("f")),O(m,"class","tasks-modal-section tasks-modal-dates"),O(ms,"for","status"),O(hr,"id","status"),O(hr,"type","checkbox"),O(hr,"class","task-list-item-checkbox tasks-modal-checkbox"),hr.checked=ys=r[0].status==="Done",hr.disabled=!0,O(Jr,"class","tasks-modal-section tasks-modal-status"),O(Ln,"type","submit"),O(Ln,"class","mod-cta"),O(Yn,"type","button"),O(en,"class","tasks-modal-section tasks-modal-buttons"),vo(t,"with-accesskeys",r[1]),O(e,"class","tasks-modal")},m(F,ce){ei(F,e,ce),v(e,t),v(t,n),v(n,i),v(n,s),v(n,a),Rt(a,r[0].description),r[18](a),v(t,u),v(t,l),v(l,c),v(c,d),v(l,h);for(let Le=0;Le<ze.length;Le+=1)ze[Le].m(l,null);v(t,g),v(t,m),v(m,y),v(m,P),v(m,w),Rt(w,r[0].recurrenceRule),v(m,V),v(m,le),v(le,ye),v(le,ne),$.m(r[6],le),v(m,ut),v(m,We),v(m,S),v(m,E),Rt(E,r[0].dueDate),v(m,A),v(m,_),v(_,C),v(_,k),x.m(r[5],_),v(m,te),v(m,H),v(m,oe),v(m,fe),Rt(fe,r[0].scheduledDate),v(m,He),v(m,Qe),v(Qe,zt),v(Qe,Ie),Je.m(r[4],Qe),v(m,Qr),v(m,Kt),v(m,Ud),v(m,Et),Rt(Et,r[0].startDate),v(m,qd),v(m,Un),v(Un,Wd),v(Un,Ld),fs.m(r[3],Un),v(m,Yd),v(m,qn),v(qn,ps),v(qn,$d),v(qn,St),St.checked=r[0].forwardOnly,v(t,jd),v(t,Jr),v(Jr,kr),v(kr,ms),v(kr,Bd),v(kr,hr),v(kr,Gd),v(kr,to),v(to,ro),v(Jr,Hd),v(Jr,Wn),v(Wn,no),v(Wn,zd),v(Wn,_s),_s.innerHTML=r[7],v(t,Kd),v(t,en),v(en,Ln),v(en,Vd),v(en,Yn),io||(Zd=[wt(a,"input",r[17]),wt(l,"keyup",r[10]),wt(w,"input",r[21]),wt(E,"input",r[22]),wt(fe,"input",r[23]),wt(Et,"input",r[24]),wt(St,"change",r[25]),wt(Yn,"click",r[11]),wt(t,"submit",bp(r[12]))],io=!0)},p(F,ce){if(ce[0]&256&&o!==(o=F[8]("t"))&&O(a,"accesskey",o),ce[0]&1&&a.value!==F[0].description&&Rt(a,F[0].description),ce[0]&1&&f!==(f="priority-"+F[0].priority)&&O(c,"for",f),ce[0]&769){tn=F[9];let Le;for(Le=0;Le<tn.length;Le+=1){let Xd=e_(F,tn,Le);ze[Le]?ze[Le].p(Xd,ce):(ze[Le]=t_(Xd),ze[Le].c(),ze[Le].m(l,null))}for(;Le<ze.length;Le+=1)ze[Le].d(1);ze.length=tn.length}ce[0]&256&&N!==(N=F[8]("r"))&&O(w,"accesskey",N),ce[0]&1&&w.value!==F[0].recurrenceRule&&Rt(w,F[0].recurrenceRule),ce[0]&64&&$.p(F[6]),ce[0]&256&&b!==(b=F[8]("d"))&&O(E,"accesskey",b),ce[0]&1&&E.value!==F[0].dueDate&&Rt(E,F[0].dueDate),ce[0]&32&&x.p(F[5]),ce[0]&256&&Ce!==(Ce=F[8]("s"))&&O(fe,"accesskey",Ce),ce[0]&1&&fe.value!==F[0].scheduledDate&&Rt(fe,F[0].scheduledDate),ce[0]&16&&Je.p(F[4]),ce[0]&256&&ds!==(ds=F[8]("a"))&&O(Et,"accesskey",ds),ce[0]&1&&Et.value!==F[0].startDate&&Rt(Et,F[0].startDate),ce[0]&8&&fs.p(F[3]),ce[0]&256&&hs!==(hs=F[8]("f"))&&O(St,"accesskey",hs),ce[0]&1&&(St.checked=F[0].forwardOnly),ce[0]&1&&ys!==(ys=F[0].status==="Done")&&(hr.checked=ys),ce[0]&1&&gs!==(gs=F[0].status+"")&&vp(ro,gs),ce[0]&128&&(_s.innerHTML=F[7]),ce[0]&2&&vo(t,"with-accesskeys",F[1])},i:xr,o:xr,d(F){F&&un(e),r[18](null),Tp(ze,F),io=!1,Fr(Zd)}}}var fd="Try 'Monday' or 'tomorrow', or [td|tm|yd|tw|nw|we] then space.";function zP(r,e,t){let n;var i,s;let{task:a}=e,{onSubmit:o}=e,u,l={description:"",status:"Todo",priority:"none",recurrenceRule:"",startDate:"",scheduledDate:"",dueDate:"",doneDate:"",forwardOnly:!0},c="",d="",f="",h="",g="",m=!1,y=!0,P=[{value:"low",label:"Low",symbol:Ee.Low},{value:"none",label:"Normal",symbol:Ee.None},{value:"medium",label:"Medium",symbol:Ee.Medium},{value:"high",label:"High",symbol:Ee.High}];function w(_,C,k=void 0){if(!C)return`<i>no ${_} date</i>`;let x=ts.parseDate(C,k,{forwardDate:k!=null});return x!==null?window.moment(x).format("YYYY-MM-DD"):`<i>invalid ${_} date</i>`}Eo(()=>{let{globalFilter:_,provideAccessKeys:C}=z();t(1,y=C);let k=a.getDescriptionWithoutGlobalFilter();(k!=a.description||k.indexOf(_)==-1)&&(m=!0);let x="none";a.priority==="4"?x="low":a.priority==="2"?x="medium":a.priority==="1"&&(x="high"),t(0,l={description:k,status:a.status,priority:x,recurrenceRule:a.recurrence?a.recurrence.toText():"",startDate:a.startDate?a.startDate.format("YYYY-MM-DD"):"",scheduledDate:a.scheduledDate?a.scheduledDate.format("YYYY-MM-DD"):"",dueDate:a.dueDate?a.dueDate.format("YYYY-MM-DD"):"",doneDate:a.doneDate?a.doneDate.format("YYYY-MM-DD"):"",forwardOnly:!0}),setTimeout(()=>{u.focus()},10)});let N=_=>{if(_.key&&!_.altKey&&!_.ctrlKey){let C=P.find(k=>k.label.charAt(0).toLowerCase()==_.key);C&&t(0,l.priority=C.value,l)}},V=()=>{o([])},le=()=>{let{globalFilter:_}=z(),C=l.description.trim();m&&(C=_+" "+C);let k=null,x=ts.parseDate(l.startDate,new Date,{forwardDate:l.forwardOnly});x!==null&&(k=window.moment(x));let te=null,H=ts.parseDate(l.scheduledDate,new Date,{forwardDate:l.forwardOnly});H!==null&&(te=window.moment(H));let oe=null,fe=ts.parseDate(l.dueDate,new Date,{forwardDate:l.forwardOnly});fe!==null&&(oe=window.moment(fe));let Ce=null;l.recurrenceRule&&(Ce=De.fromText({recurrenceRuleText:l.recurrenceRule,startDate:k,scheduledDate:te,dueDate:oe}));let He;switch(l.priority){case"low":He="4";break;case"medium":He="2";break;case"high":He="1";break;default:He="3"}let Qe=new ie(Object.assign(Object.assign({},a),{description:C,status:l.status,priority:He,recurrence:Ce,startDate:k,scheduledDate:te,dueDate:oe,doneDate:window.moment(l.doneDate,"YYYY-MM-DD").isValid()?window.moment(l.doneDate,"YYYY-MM-DD"):null}));o([Qe])},ye=[[]];function ne(){l.description=this.value,t(0,l)}function $(_){Ss[_?"unshift":"push"](()=>{u=_,t(2,u)})}function ut(){l.priority=this.__value,t(0,l)}function We(){l.recurrenceRule=this.value,t(0,l)}function S(){l.dueDate=this.value,t(0,l)}function E(){l.scheduledDate=this.value,t(0,l)}function b(){l.startDate=this.value,t(0,l)}function A(){l.forwardOnly=this.checked,t(0,l)}return r.$$set=_=>{"task"in _&&t(13,a=_.task),"onSubmit"in _&&t(14,o=_.onSubmit)},r.$$.update=()=>{if(r.$$.dirty[0]&2){e:t(8,n=_=>y?_:null)}if(r.$$.dirty[0]&1){e:t(0,l.startDate=Dn(l.startDate),l),t(3,c=w("start",l.startDate,l.forwardOnly?new Date:void 0))}if(r.$$.dirty[0]&1){e:t(0,l.scheduledDate=Dn(l.scheduledDate),l),t(4,d=w("scheduled",l.scheduledDate,l.forwardOnly?new Date:void 0))}if(r.$$.dirty[0]&1){e:t(0,l.dueDate=Dn(l.dueDate),l),t(5,f=w("due",l.dueDate,l.forwardOnly?new Date:void 0))}if(r.$$.dirty[0]&98305){e:l.recurrenceRule?t(6,h=t(16,s=t(15,i=De.fromText({recurrenceRuleText:l.recurrenceRule,startDate:null,scheduledDate:null,dueDate:null}))===null||i===void 0?void 0:i.toText())!==null&&s!==void 0?s:"<i>invalid recurrence rule</i>"):t(6,h="<i>not recurring</>")}if(r.$$.dirty[0]&1){e:t(7,g=w("done",l.doneDate))}},[l,y,u,c,d,f,h,g,n,P,N,V,le,a,o,i,s,ne,$,ut,ye,We,S,E,b,A]}var pd=class extends Cs{constructor(e){super(),Rp(this,e,zP,HP,yp,{task:13,onSubmit:14},null,[-1,-1])}},n_=pd;var Mn=class extends i_.Modal{constructor({app:t,task:n,onSubmit:i}){super(t);this.task=n,this.onSubmit=s=>{s.length&&i(s),this.close()}}onOpen(){this.titleEl.setText("Create or edit Task");let{contentEl:t}=this;new n_({target:t,props:{task:this.task,onSubmit:this.onSubmit}})}onClose(){let{contentEl:t}=this;t.empty()}};var s_=(r,e,t,n)=>{var d;if(r)return t instanceof md.MarkdownView;if(!(t instanceof md.MarkdownView))return;let i=(d=t.file)==null?void 0:d.path;if(i===void 0)return;let a=e.getCursor().line,o=e.getLine(a),u=KP({line:o,path:i}),l=f=>{let h=rt.removeInferredStatusIfNeeded(u,f).map(g=>g.toFileLineString()).join(`
`);e.setLine(a,h)};new Mn({app:n,task:u,onSubmit:l}).open()},KP=({line:r,path:e})=>{var d;let t=rt.fromPath(e),n=ie.fromLine({line:r,path:e,sectionStart:0,sectionIndex:0,precedingHeader:null,fallbackDate:t});if(n!==null)return n;let i=r.match(D.nonTaskRegex);if(i===null)return console.error("Tasks: Cannot create task on line:",r),new ie({status:"Todo",description:"",path:e,indentation:"",originalStatusCharacter:" ",priority:"3",startDate:null,scheduledDate:null,dueDate:null,doneDate:null,recurrence:null,sectionStart:0,sectionIndex:0,precedingHeader:null,blockLink:"",tags:[],originalMarkdown:"",scheduledDateIsInferred:!1});let s=i[1],a=(d=i[3])!=null?d:" ",o=a===" "?"Todo":"Done",u=i[4],l=r.match(D.blockLinkRegex),c=l!==null?l[0]:"";return c!==""&&(u=u.replace(D.blockLinkRegex,"")),new ie({status:o,description:u,path:e,indentation:s,originalStatusCharacter:a,blockLink:c,priority:"3",startDate:null,scheduledDate:null,dueDate:null,doneDate:null,recurrence:null,sectionStart:0,sectionIndex:0,precedingHeader:null,tags:[],originalMarkdown:"",scheduledDateIsInferred:!1})};var yd=require("obsidian");var a_=(r,e,t)=>{var u;if(r)return t instanceof yd.MarkdownView;if(!(t instanceof yd.MarkdownView))return;let n=(u=t.file)==null?void 0:u.path;if(n===void 0)return;let i=e.getCursor(),s=i.line,a=e.getLine(s),o=VP(a,n);e.setLine(s,o),e.setCursor({line:i.line,ch:XP(i.ch,a,o)})},VP=(r,e)=>{let t=r,n=ie.fromLine({line:r,path:e,sectionStart:0,sectionIndex:0,precedingHeader:null,fallbackDate:null});if(n!==null)t=ZP(n);else{let i=r.match(D.taskRegex);if(i!==null){let a=i[2].toLowerCase()===" "?"x":" ";t=r.replace(D.taskRegex,`$1- [${a}] $3`)}else D.listItemRegex.test(r)?t=r.replace(D.listItemRegex,"$1$2 [ ]"):t=r.replace(D.indentationRegex,"$1- ")}return t},ZP=r=>r.toggle().map(n=>n.toFileLineString()).join(`
`),XP=(r,e,t)=>{let n=t.length;if(n<=e.length)return r>=t.length?n:r;let i=13;if(t.match(D.doneDateRegex)&&n-e.length>=i&&(n-=i),n>=2*e.length&&t.search(`.+
.+`)!==-1)return r+n-e.length;let s=t.search(/[-*]/);return r<s?r:r+n-e.length};var Da=class{get app(){return this.plugin.app}constructor({plugin:e}){this.plugin=e,e.addCommand({id:"edit-task",name:"Create or edit task",icon:"pencil",editorCheckCallback:(t,n,i)=>s_(t,n,i,this.app)}),e.addCommand({id:"toggle-done",name:"Toggle task done",icon:"check-in-circle",editorCheckCallback:a_})}};var Ma=class{constructor({obsidianEvents:e}){this.obsidianEvents=e}onCacheUpdate(e){return this.obsidianEvents.on("obsidian-tasks-plugin:cache-update",e)}triggerCacheUpdate(e){this.obsidianEvents.trigger("obsidian-tasks-plugin:cache-update",e)}onRequestCacheUpdate(e){return this.obsidianEvents.on("obsidian-tasks-plugin:request-cache-update",e)}triggerRequestCacheUpdate(e){this.obsidianEvents.trigger("obsidian-tasks-plugin:request-cache-update",e)}off(e){this.obsidianEvents.offref(e)}};var Oa=class{constructor({plugin:e}){this.markdownPostProcessor=this._markdownPostProcessor.bind(this);e.registerMarkdownPostProcessor(this._markdownPostProcessor.bind(this))}_markdownPostProcessor(e,t){return J(this,null,function*(){var c;let{globalFilter:n}=z(),i=e.findAll(".task-list-item").filter(d=>{var g;let f=(g=d.textContent)==null?void 0:g.split(`
`);if(f===void 0)return!1;let h=null;for(let m=0;m<f.length;m=m+1)if(f[m]!==""){h=f[m];break}return h===null?!1:h.includes(n)});if(i.length===0)return;let s=t.sourcePath,a=t.getSectionInfo(e);if(a===null)return;let o=a.text.split(`
`),u=0,l=[];for(let d=a.lineStart;d<=a.lineEnd;d++){let f=o[d];if(f===void 0)continue;let h=ie.fromLine({line:f,path:s,sectionStart:a.lineStart,sectionIndex:u,precedingHeader:null,fallbackDate:null});h!==null&&(l.push(h),u++)}for(let d=0;d<i.length;d++){let f=l[d],h=i[d];if(f===void 0||h===void 0)continue;let g=(c=h.getAttr("data-line"))!=null?c:"0",m=Number.parseInt(g,10),y=yield f.toLi({parentUlElement:e,listIndex:m}),P=h.childNodes;for(let V=0;V<P.length;V=V+1){let le=P[V];le.nodeName.toLowerCase()==="div"?y.prepend(le):le.nodeName.toLowerCase()==="ul"&&y.append(le)}let w=h.querySelectorAll("[data-footnote-id]"),N=y.querySelectorAll("[data-footnote-id]");if(w.length===N.length)for(let V=0;V<w.length;V++)N[V].replaceWith(w[V]);h.replaceWith(y)}})}};var o_=require("@codemirror/view"),u_=require("obsidian");var l_=()=>o_.ViewPlugin.fromClass(gd),gd=class{constructor(e){this.view=e,this.handleClickEvent=this.handleClickEvent.bind(this),this.view.dom.addEventListener("click",this.handleClickEvent)}destroy(){this.view.dom.removeEventListener("click",this.handleClickEvent)}handleClickEvent(e){let{target:t}=e;if(!t||!(t instanceof HTMLInputElement)||t.type!=="checkbox")return!1;let n=t.closest("ul.plugin-tasks-query-result, div.callout-content");if(n){if(n.matches("div.callout-content")){let f=`obsidian-tasks-plugin warning: Tasks cannot add or remove completion dates or make the next copy of a recurring task for tasks written inside a callout when you click their checkboxes in Live Preview. 
If you wanted Tasks to do these things, please undo your change, then either click the line of the task and use the "Toggle Task Done" command, or switch to Reading View to click the checkbox.`;console.warn(f),new u_.Notice(f,45e3)}return!1}let{state:i}=this.view,s=this.view.posAtDOM(t),a=i.doc.lineAt(s),o=ie.fromLine({line:a.text,path:"",sectionStart:0,sectionIndex:0,precedingHeader:null,fallbackDate:null});if(console.debug(`Live Preview Extension: toggle called. Position: ${s} Line: ${a.text}`),o===null)return!1;e.preventDefault();let l=o.toggle().map(f=>f.toFileLineString()).join(i.lineBreak),c=i.update({changes:{from:a.from,to:a.to,insert:l}});this.view.dispatch(c);let d=t.checked;return setTimeout(()=>{t.checked=d},1),!0}};var Qa=require("obsidian");var On=class{matchesAnyOf(e){return e.some(t=>this.matches(t))}};var Kr=class extends On{constructor(t){super();this.stringToFind=t}matches(t){return Kr.stringIncludesCaseInsensitive(t,this.stringToFind)}static stringIncludesCaseInsensitive(t,n){return t.toLocaleLowerCase().includes(n.toLocaleLowerCase())}};var Pn=class extends On{constructor(t){super();this.regex=t}static validateAndConstruct(t){let n=/\/((?![*+?])(?:[^\r\n[/\\]|\\.|\[(?:[^\r\n\]\\]|\\.)*])+)\/((?:g(?:im?|mi?)?|i(?:gm?|mg?)?|m(?:gi?|ig?)?)?)/,i=t.match(n);if(i!==null){let s=new RegExp(i[1],i[2]);return new Pn(s)}else return null}matches(t){return t.match(this.regex)!==null}};var ve=class{canCreateFilterForLine(e){return ve.lineMatchesFilter(this.filterRegExp(),e)}static lineMatchesFilter(e,t){return e?e.test(t):!1}static getMatch(e,t){return e?t.match(e):null}};var _d=class{constructor(e,t){this.instruction=e,this.filterFunction=t}},de=class{constructor(e){this.instruction=e}get filter(){return this._filter}get filterFunction(){if(this._filter)return this._filter.filterFunction}set filterFunction(e){e?this._filter=new _d(this.instruction,e):this._filter=void 0}static fromFilter(e,t){let n=new de(e);return n.filterFunction=t,n}static fromError(e,t){let n=new de(e);return n.error=t,n}};var bt=class extends ve{createFilterOrErrorMessage(e){let t=ve.getMatch(this.filterRegExp(),e);if(t===null)return de.fromError(e,`do not understand query filter (${this.fieldName()})`);let[n,i,s]=t,a=null;if(i.includes("include"))a=new Kr(s);else if(i.includes("regex")&&(a=Pn.validateAndConstruct(s),a===null))return de.fromError(e,`cannot parse regex (${this.fieldName()}); check your leading and trailing slashes for your query`);if(a===null)return de.fromError(e,`do not understand query filter (${this.fieldName()})`);let o=i.match(/not/)!==null;return de.fromFilter(e,this.getFilter(a,o))}static stringIncludesCaseInsensitive(e,t){return Kr.stringIncludesCaseInsensitive(e,t)}fieldPattern(){return this.fieldName()}filterOperatorPattern(){return"includes|does not include|regex matches|regex does not match"}filterRegExp(){return new RegExp(`^(?:${this.fieldPattern()}) (${this.filterOperatorPattern()}) (.*)`)}getFilter(e,t){return n=>{let i=e.matches(this.value(n));return t?!i:i}}};var Pa=class extends bt{fieldName(){return"description"}value(e){let t=z().globalFilter;return e.description.replace(t,"").trim()}};var c_=Ts(we()),ur=class{static parseDate(e,t=!1){return window.moment(c_.parseDate(e,void 0,{forwardDate:t})).startOf("day")}};var Aa=class{constructor(e,t){this._instruction=e,this._filter=t}canCreateFilterForLine(e){return e==this._instruction}createFilterOrErrorMessage(e){let t=new de(e);return e===this._instruction?(t.filterFunction=this._filter,t):(t.error=`do not understand filter: ${e}`,t)}};var An=class{constructor(){this._filters=[]}add(e,t){this._filters.push(new Aa(e,t))}canCreateFilterForLine(e){for(let t of this._filters)if(t.canCreateFilterForLine(e))return!0;return!1}createFilterOrErrorMessage(e){for(let n of this._filters){let i=n.createFilterOrErrorMessage(e);if(i.error===void 0)return i}let t=new de(e);return t.error=`do not understand filter: ${e}`,t}};var Gt=class extends ve{constructor(){super();this.filterInstructions=new An,this.filterInstructions.add(`has ${this.fieldName()} date`,t=>this.date(t)!==null),this.filterInstructions.add(`no ${this.fieldName()} date`,t=>this.date(t)===null),this.filterInstructions.add(`${this.fieldName()} date is invalid`,t=>{let n=this.date(t);return n!==null&&!n.isValid()})}canCreateFilterForLine(t){return this.filterInstructions.canCreateFilterForLine(t)?!0:super.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){let n=this.filterInstructions.createFilterOrErrorMessage(t);if(n.filter!==void 0)return n;let i=new de(t),s=ve.getMatch(this.filterRegExp(),t);if(s!==null){let a=ur.parseDate(s[2]);a.isValid()?s[1]==="before"?i.filterFunction=o=>{let u=this.date(o);return u?u.isBefore(a):this.filterResultIfFieldMissing()}:s[1]==="after"?i.filterFunction=o=>{let u=this.date(o);return u?u.isAfter(a):this.filterResultIfFieldMissing()}:i.filterFunction=o=>{let u=this.date(o);return u?u.isSame(a):this.filterResultIfFieldMissing()}:i.error="do not understand "+this.fieldName()+" date"}else i.error="do not understand query filter ("+this.fieldName()+" date)";return i}};var Td=class extends Gt{filterRegExp(){return Td.doneRegexp}fieldName(){return"done"}date(e){return e.doneDate}filterResultIfFieldMissing(){return!1}},rs=Td;rs.doneRegexp=/^done (before|after|on)? ?(.*)/;var bd=class extends Gt{filterRegExp(){return bd.dueRegexp}fieldName(){return"due"}date(e){return e.dueDate}filterResultIfFieldMissing(){return!1}},ns=bd;ns.dueRegexp=/^due (before|after|on)? ?(.*)/;var Mr=class extends ve{constructor(){super(...arguments);this._filters=new An}canCreateFilterForLine(t){return this._filters.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){return this._filters.createFilterOrErrorMessage(t)}filterRegExp(){return null}};var ka=class extends Mr{constructor(){super(),this._filters.add("exclude sub-items",e=>{if(e.indentation==="")return!0;let t=e.indentation.lastIndexOf(">");return t===-1?!1:/^ ?$/.test(e.indentation.slice(t+1))})}fieldName(){return"exclude"}};var Na=class extends bt{fieldName(){return"heading"}value(e){return e.precedingHeader?e.precedingHeader:""}};var Sa=class extends bt{fieldName(){return"path"}value(e){return e.path}};var vd=class extends ve{createFilterOrErrorMessage(e){let t=new de(e),n=ve.getMatch(this.filterRegExp(),e);if(n!==null){let i=n[3],s=null;switch(i){case"low":s="4";break;case"none":s="3";break;case"medium":s="2";break;case"high":s="1";break}if(s===null)return t.error="do not understand priority",t;let a;n[2]==="above"?a=o=>o.priority?o.priority.localeCompare(s)<0:!1:n[2]==="below"?a=o=>o.priority?o.priority.localeCompare(s)>0:!1:a=o=>o.priority?o.priority===s:!1,t.filterFunction=a}else t.error="do not understand query filter (priority)";return t}fieldName(){return"priority"}filterRegExp(){return vd.priorityRegexp}},is=vd;is.priorityRegexp=/^priority (is )?(above|below)? ?(low|none|medium|high)/;var Ed=class extends Gt{filterRegExp(){return Ed.scheduledRegexp}fieldName(){return"scheduled"}date(e){return e.scheduledDate}filterResultIfFieldMissing(){return!1}},ss=Ed;ss.scheduledRegexp=/^scheduled (before|after|on)? ?(.*)/;var wd=class extends Gt{filterRegExp(){return wd.startRegexp}fieldName(){return"start"}date(e){return e.startDate}filterResultIfFieldMissing(){return!0}},as=wd;as.startRegexp=/^starts (before|after|on)? ?(.*)/;var Or=class extends ve{canCreateFilterForLine(e){return e===Or.instructionForFieldPresence||e===Or.instructionForFieldAbsence?!0:super.canCreateFilterForLine(e)}createFilterOrErrorMessage(e){let t=new de(e);if(e===Or.instructionForFieldPresence){let i=new de(e);return i.filterFunction=s=>this.dates(s).some(a=>a!==null),i}if(e===Or.instructionForFieldAbsence){let i=new de(e);return i.filterFunction=s=>!this.dates(s).some(a=>a!==null),i}let n=ve.getMatch(this.filterRegExp(),e);if(n!==null){let i=ur.parseDate(n[2]);i.isValid()?n[1]==="before"?t.filterFunction=s=>this.dates(s).some(a=>a&&a.isBefore(i)):n[1]==="after"?t.filterFunction=s=>this.dates(s).some(a=>a&&a.isAfter(i)):t.filterFunction=s=>this.dates(s).some(a=>a&&a.isSame(i)):t.error="do not understand happens date"}else t.error="do not understand query filter (happens date)";return t}earliestDate(e){return new Or().dates(e).sort(Ke.compareByDate)[0]}filterRegExp(){return Or.happensRegexp}dates(e){return Array.of(e.startDate,e.scheduledDate,e.dueDate)}fieldName(){return"happens"}},lr=Or;lr.happensRegexp=/^happens (before|after|on)? ?(.*)/,lr.instructionForFieldPresence="has happens date",lr.instructionForFieldAbsence="no happens date";var Ca=class extends Mr{constructor(){super(),this._filters.add("is recurring",e=>e.recurrence!==null),this._filters.add("is not recurring",e=>e.recurrence===null)}fieldName(){return"recurring"}};var Ia=class extends Mr{constructor(){super(),this._filters.add("done",e=>e.status==="Done"),this._filters.add("not done",e=>e.status!=="Done")}fieldName(){return"status"}};var xa=class extends bt{fieldNamePlural(){return this.fieldNameSingular()+"s"}fieldName(){return`${this.fieldNameSingular()}/${this.fieldNamePlural()}`}fieldPattern(){return`${this.fieldNameSingular()}|${this.fieldNamePlural()}`}filterOperatorPattern(){return`${super.filterOperatorPattern()}|include|do not include`}value(e){return this.values(e).join(", ")}getFilter(e,t){return n=>{let i=e.matchesAnyOf(this.values(n));return t?!i:i}}};var Fa=class extends xa{fieldNameSingular(){return"tag"}values(e){return e.tags}};var w_=Ts(E_());var La=class extends ve{constructor(){super(...arguments);this.basicBooleanRegexp=/(.*(AND|OR|XOR|NOT)\s*[("].*|\(.+\))/g;this.supportedOperators=["AND","OR","XOR","NOT"];this.subFields={}}filterRegExp(){return this.basicBooleanRegexp}createFilterOrErrorMessage(t){return this.parseLine(t)}fieldName(){return"boolean query"}parseLine(t){let n=new de(t);if(t.length===0)return n.error="empty line",n;let i=this.preprocessExpression(t);try{let s=(0,w_.parse)(i);for(let a of s)if(a.name==="IDENTIFIER"&&a.value){let o=a.value.trim();if(!(o in this.subFields)){let u=Ya(o);if(u===null)return n.error=`couldn't parse sub-expression '${o}'`,n;if(u.error)return n.error=`couldn't parse sub-expression '${o}': ${u.error}`,n;u.filter&&(this.subFields[o]=u.filter)}}else if(a.name==="OPERATOR"){if(a.value==null)return n.error="empty operator in boolean query",n;if(!this.supportedOperators.includes(a.value))return n.error=`unknown boolean operator '${a.value}'`,n}return n.filterFunction=a=>this.filterTaskWithParsedQuery(a,s),n}catch(s){let a=s instanceof Error?s.message:"unknown error type";return n.error=`malformed boolean query -- ${a} (check the documentation for guidelines)`,n}return n}preprocessExpression(t){return t.replace(/\(([^()]+)\)/g,'("$1")')}filterTaskWithParsedQuery(t,n){let i=o=>o==="true",s=o=>o?"true":"false",a=[];for(let o of n)if(o.name==="IDENTIFIER"){if(o.value==null)throw Error("null token value");let l=this.subFields[o.value.trim()].filterFunction(t);a.push(s(l))}else if(o.name==="OPERATOR")if(o.value==="NOT"){let u=i(a.pop());a.push(s(!u))}else if(o.value==="OR"){let u=i(a.pop()),l=i(a.pop());a.push(s(u||l))}else if(o.value==="AND"){let u=i(a.pop()),l=i(a.pop());a.push(s(u&&l))}else if(o.value==="XOR"){let u=i(a.pop()),l=i(a.pop());a.push(s(u&&!l||!u&&l))}else throw Error("Unsupported operator: "+o.value);else throw Error("Unsupported token type: "+o);return i(a[0])}};var $a=class extends bt{fieldName(){return"filename"}value(e){let t=e.filename;return t===null?"":t+".md"}};var aA=[()=>new Ia,()=>new Ca,()=>new is,()=>new lr,()=>new as,()=>new ss,()=>new ns,()=>new rs,()=>new Sa,()=>new Pa,()=>new Fa,()=>new Na,()=>new ka,()=>new La,()=>new $a];function Ya(r){for(let e of aA){let t=e();if(t.canCreateFilterForLine(r))return t.createFilterOrErrorMessage(r)}return null}var ja=class{constructor(e,t){this.nestingLevel=e,this.name=t}};var Ba=class{constructor(e){this.lastHeadingAtLevel=new Array;let n=e.keys().next().value.length;for(let i=0;i<n;i++)this.lastHeadingAtLevel.push("")}getHeadingsForTaskGroup(e){let t=new Array;for(let n=0;n<e.length;n++){let i=e[n];if(i!=this.lastHeadingAtLevel[n]){t.push(new ja(n,i));for(let s=n;s<e.length;s++)this.lastHeadingAtLevel[s]="";this.lastHeadingAtLevel[n]=i}}return t}};var Ga=class{constructor(e){this.children=new Map;this.values=[];this.values=e}generateAllPaths(e=[]){let t=new Map;if(this.children.size==0)return t.set([...e],this.values),t;for(let[n,i]of this.children)e.push(n),i.generateAllPaths(e).forEach((a,o)=>t.set(o,a)),e.pop();return t}};var Ha=class extends Map{},za=class extends Ga{},Ka=class{constructor(e,t){this.groups=new Ha;let n=this.buildGroupingTree(e,t);this.groups=n.generateAllPaths(),this.groups=this.getSortedGroups()}buildGroupingTree(e,t){let n=new za(t),i=[n];for(let s of e){let a=[];for(let o of i)for(let u of o.values){let l=Ar.getGroupNamesForTask(s.property,u);for(let c of l){let d=o.children.get(c);d===void 0&&(d=new za([]),o.children.set(c,d),a.push(d)),d.values.push(u)}}i=a}return n}getSortedGroups(){return new Ha([...this.groups.entries()].sort())}};var Va=class{constructor(e,t,n){this.groups=e,this.groupHeadings=t,this.tasks=n}tasksAsStringOfLines(){let e="";for(let t of this.tasks)e+=t.toFileLineString()+`
`;return e}toString(){let e=`
`;e+=`Group names: [${this.groups}]
`;for(let t of this.groupHeadings)e+=`${"#".repeat(4+t.nestingLevel)} ${t.name}
`;return e+=this.tasksAsStringOfLines(),e}};var Za=class{constructor(e,t){this._groups=new Array;this._totalTaskCount=0;this._totalTaskCount=t.length;let n=new Ka(e,t);this.addTasks(n)}get groups(){return this._groups}totalTasksCount(){return this._totalTaskCount}toString(){let e="";for(let n of this.groups)e+=n.toString(),e+=`
---
`;return e+=`
${this.totalTasksCount()} tasks
`,e}addTasks(e){let t=new Ba(e.groups);for(let[n,i]of e.groups){let s=t.getHeadingsForTaskGroup(n),a=new Va(n,s,i);this.add(a)}}add(e){this._groups.push(e)}};var ee=class{static by(e,t){return new Za(e,t)}static getGroupNamesForTask(e,t){let n=ee.groupers[e];return n(t)}static escapeMarkdownCharacters(e){return e.replace(/\\/g,"\\\\").replace(/_/g,"\\_")}static groupByPriority(e){let t="ERROR";switch(e.priority){case"1":t="High";break;case"2":t="Medium";break;case"3":t="None";break;case"4":t="Low";break}return[`Priority ${e.priority}: ${t}`]}static groupByRecurrence(e){return e.recurrence!==null?[e.recurrence.toText()]:["None"]}static groupByRecurring(e){return e.recurrence!==null?["Recurring"]:["Not Recurring"]}static groupByStartDate(e){return[ee.stringFromDate(e.startDate,"start")]}static groupByScheduledDate(e){return[ee.stringFromDate(e.scheduledDate,"scheduled")]}static groupByDueDate(e){return[ee.stringFromDate(e.dueDate,"due")]}static groupByDoneDate(e){return[ee.stringFromDate(e.doneDate,"done")]}static groupByHappensDate(e){let t=new lr().earliestDate(e);return[ee.stringFromDate(t,"happens")]}static stringFromDate(e,t){return e===null?"No "+t+" date":e.format(ee.groupDateFormat)}static groupByPath(e){return[ee.escapeMarkdownCharacters(e.path.replace(".md",""))]}static groupByFolder(e){let t=e.path,n=e.filename+".md",i=t.substring(0,t.lastIndexOf(n));return i===""?["/"]:[ee.escapeMarkdownCharacters(i)]}static groupByFileName(e){let t=e.filename;return t===null?["Unknown Location"]:[ee.escapeMarkdownCharacters(t)]}static groupByRoot(e){let t=e.path.replace(/\\/g,"/"),n=t.indexOf("/");return n==-1?["/"]:[ee.escapeMarkdownCharacters(t.substring(0,n+1))]}static groupByBacklink(e){if(e.getLinkText({isFilenameUnique:!0})===null)return["Unknown Location"];let n=ee.groupByFileName(e)[0];if(e.precedingHeader===null||e.precedingHeader.length===0)return[n];let i=ee.groupByHeading(e)[0];return n===i?[n]:[`${n} > ${i}`]}static groupByStatus(e){return[e.status]}static groupByHeading(e){return e.precedingHeader===null||e.precedingHeader.length===0?["(No heading)"]:[e.precedingHeader]}static groupByTags(e){return e.tags.length==0?["(No tags)"]:e.tags}},Ar=ee;Ar.groupDateFormat="YYYY-MM-DD dddd",Ar.groupers={backlink:ee.groupByBacklink,done:ee.groupByDoneDate,due:ee.groupByDueDate,filename:ee.groupByFileName,folder:ee.groupByFolder,happens:ee.groupByHappensDate,heading:ee.groupByHeading,path:ee.groupByPath,priority:ee.groupByPriority,recurrence:ee.groupByRecurrence,recurring:ee.groupByRecurring,root:ee.groupByRoot,scheduled:ee.groupByScheduledDate,start:ee.groupByStartDate,status:ee.groupByStatus,tags:ee.groupByTags};var xn=class{constructor({source:e}){this._limit=void 0;this._layoutOptions=new rn;this._filters=[];this._error=void 0;this._sorting=[];this._grouping=[];this.sortByRegexp=/^sort by (urgency|status|priority|start|scheduled|due|done|path|description|tag)( reverse)?[\s]*(\d+)?/;this.groupByRegexp=/^group by (backlink|done|due|filename|folder|happens|heading|path|priority|recurrence|recurring|root|scheduled|start|status|tags)/;this.hideOptionsRegexp=/^(hide|show) (task count|backlink|priority|start date|scheduled date|done date|due date|recurrence rule|edit button|urgency)/;this.shortModeRegexp=/^short/;this.limitRegexp=/^limit (to )?(\d+)( tasks?)?/;this.commentRegexp=/^#.*/;this.source=e,e.split(`
`).map(t=>t.trim()).forEach(t=>{switch(!0){case t==="":break;case this.shortModeRegexp.test(t):this._layoutOptions.shortMode=!0;break;case this.limitRegexp.test(t):this.parseLimit({line:t});break;case this.sortByRegexp.test(t):this.parseSortBy({line:t});break;case this.groupByRegexp.test(t):this.parseGroupBy({line:t});break;case this.hideOptionsRegexp.test(t):this.parseHideOptions({line:t});break;case this.commentRegexp.test(t):break;case this.parseFilter(t):break;default:this._error=`do not understand query: ${t}`}})}get limit(){return this._limit}get layoutOptions(){return this._layoutOptions}get filters(){return this._filters}get sorting(){return this._sorting}get grouping(){return this._grouping}get error(){return this._error}applyQueryToTasks(e){this.filters.forEach(n=>{e=e.filter(n.filterFunction)});let t=Ke.by(this,e).slice(0,this.limit);return Ar.by(this.grouping,t)}parseHideOptions({line:e}){let t=e.match(this.hideOptionsRegexp);if(t!==null){let n=t[1]==="hide";switch(t[2]){case"task count":this._layoutOptions.hideTaskCount=n;break;case"backlink":this._layoutOptions.hideBacklinks=n;break;case"priority":this._layoutOptions.hidePriority=n;break;case"start date":this._layoutOptions.hideStartDate=n;break;case"scheduled date":this._layoutOptions.hideScheduledDate=n;break;case"due date":this._layoutOptions.hideDueDate=n;break;case"done date":this._layoutOptions.hideDoneDate=n;break;case"recurrence rule":this._layoutOptions.hideRecurrenceRule=n;break;case"edit button":this._layoutOptions.hideEditButton=n;break;case"urgency":this._layoutOptions.hideUrgency=n;break;default:this._error="do not understand hide/show option"}}}parseFilter(e){let t=Ya(e);return t!=null?(t.filter?this._filters.push(t.filter):this._error=t.error,!0):!1}parseLimit({line:e}){let t=e.match(this.limitRegexp);t!==null?this._limit=Number.parseInt(t[2],10):this._error="do not understand query limit"}parseSortBy({line:e}){let t=e.match(this.sortByRegexp);t!==null?this._sorting.push({property:t[1],reverse:!!t[2],propertyInstance:isNaN(+t[3])?1:+t[3]}):this._error="do not understand query sorting"}parseGroupBy({line:e}){let t=e.match(this.groupByRegexp);t!==null?this._grouping.push({property:t[1]}):this._error="do not understand query grouping"}};var Xa=class{constructor({plugin:e,events:t}){this.addQueryRenderChild=this._addQueryRenderChild.bind(this);this.app=e.app,this.events=t,e.registerMarkdownCodeBlockProcessor("tasks",this._addQueryRenderChild.bind(this))}_addQueryRenderChild(e,t,n){return J(this,null,function*(){n.addChild(new xd({app:this.app,events:this.events,container:t,source:e,filePath:n.sourcePath}))})}},xd=class extends Qa.MarkdownRenderChild{constructor({app:t,events:n,container:i,source:s,filePath:a}){super(i);switch(this.app=t,this.events=n,this.source=s,this.filePath=a,this.containerEl.className){case"block-language-tasks":this.query=new xn({source:s}),this.queryType="tasks";break;default:this.query=new xn({source:s}),this.queryType="tasks";break}}onload(){this.events.triggerRequestCacheUpdate(this.render.bind(this)),this.renderEventRef=this.events.onCacheUpdate(this.render.bind(this)),this.reloadQueryAtMidnight()}onunload(){this.renderEventRef!==void 0&&this.events.off(this.renderEventRef),this.queryReloadTimeout!==void 0&&clearTimeout(this.queryReloadTimeout)}reloadQueryAtMidnight(){let t=new Date;t.setHours(24,0,0,0);let n=new Date,i=t.getTime()-n.getTime();this.queryReloadTimeout=setTimeout(()=>{this.query=new xn({source:this.source}),this.events.triggerRequestCacheUpdate(this.render.bind(this)),this.reloadQueryAtMidnight()},i+1e3)}render(i){return J(this,arguments,function*({tasks:t,state:n}){var a;let s=this.containerEl.createEl("div");if(n==="Warm"&&this.query.error===void 0){console.debug(`Render ${this.queryType} called for a block in active file "${this.filePath}", to select from ${t.length} tasks: plugin state: ${n}`);let o=this.query.applyQueryToTasks(t);for(let l of o.groups){this.addGroupHeadings(s,l.groupHeadings);let{taskList:c}=yield this.createTasksList({tasks:l.tasks,content:s});s.appendChild(c)}let u=o.totalTasksCount();console.debug(`${u} of ${t.length} tasks displayed in a block in "${this.filePath}"`),this.addTaskCount(s,u)}else this.query.error!==void 0?s.setText(`Tasks query: ${this.query.error}`):s.setText("Loading Tasks ...");(a=this.containerEl.firstChild)==null||a.replaceWith(s)})}createTasksList(i){return J(this,arguments,function*({tasks:t,content:n}){let s=t.length,a=n.createEl("ul");a.addClasses(["contains-task-list","plugin-tasks-query-result"]);for(let o=0;o<s;o++){let u=t[o],l=this.isFilenameUnique({task:u}),c=yield u.toLi({parentUlElement:a,listIndex:o,layoutOptions:this.query.layoutOptions,isFilenameUnique:l});c.querySelectorAll("[data-footnote-id]").forEach(h=>h.remove());let f=this.query.layoutOptions.shortMode;this.query.layoutOptions.hideUrgency||this.addUrgency(c,u),this.query.layoutOptions.hideBacklinks||this.addBacklinks(c,u,f,l),this.query.layoutOptions.hideEditButton||this.addEditButton(c,u),a.appendChild(c)}return{taskList:a,tasksCount:s}})}addEditButton(t,n){t.createEl("a",{cls:"tasks-edit"}).onClickEvent(s=>{s.preventDefault();let a=u=>{vs({originalTask:n,newTasks:rt.removeInferredStatusIfNeeded(n,u)})};new Mn({app:this.app,task:n,onSubmit:a}).open()})}addUrgency(t,n){let i=new Intl.NumberFormat().format(n.urgency);t.createSpan({text:i,cls:"tasks-urgency"})}addGroupHeadings(t,n){for(let i of n)this.addGroupHeading(t,i)}addGroupHeading(t,n){return J(this,null,function*(){let i;n.nestingLevel===0?i=t.createEl("h4",{cls:"tasks-group-heading"}):n.nestingLevel===1?i=t.createEl("h5",{cls:"tasks-group-heading"}):i=t.createEl("h6",{cls:"tasks-group-heading"}),yield Qa.MarkdownRenderer.renderMarkdown(n.name,i,this.filePath,this)})}addBacklinks(t,n,i,s){var l;let a=t.createSpan({cls:"tasks-backlink"});i||a.append(" (");let o=a.createEl("a");if(o.href=n.path,o.setAttribute("data-href",n.path),o.rel="noopener",o.target="_blank",o.addClass("internal-link"),i&&o.addClass("internal-link-short-mode"),n.precedingHeader!==null){let c=n.precedingHeader.replace(/#/g,"");o.href=o.href+"#"+c,o.setAttribute("data-href",o.getAttribute("data-href")+"#"+c)}let u;i?u=" \u{1F517}":u=(l=n.getLinkText({isFilenameUnique:s}))!=null?l:"",o.setText(u),i||a.append(")")}addTaskCount(t,n){this.query.layoutOptions.hideTaskCount||t.createDiv({text:`${n} task${n!==1?"s":""}`,cls:"tasks-count"})}isFilenameUnique({task:t}){let n=t.path.match(/([^/]*)\..+$/i);if(n===null)return;let i=n[1];return this.app.vault.getMarkdownFiles().filter(a=>{if(a.basename===i)return!0}).length<2}};var vt=require("obsidian");var Fn=class extends vt.PluginSettingTab{constructor({plugin:t}){super(t.app,t);this.plugin=t}display(){let{containerEl:t}=this;t.empty(),t.createEl("h3",{text:"Tasks Settings"}),t.createEl("p",{cls:"tasks-setting-important",text:"Changing any settings requires a restart of obsidian."}),t.createEl("h4",{text:"Global filter Settings"}),new vt.Setting(t).setName("Global task filter").setDesc(Fn.createFragmentWithHTML('<p><b>Recommended: Leave empty if you want all checklist items in your vault to be tasks managed by this plugin.</b></p><p>Use a global filter if you want Tasks to only act on a subset of your "<code>- [ ]</code>" checklist items, so that a checklist item must include the specified string in its description in order to be considered a task.<p><p>For example, if you set the global filter to <code>#task</code>, the Tasks plugin will only handle checklist items tagged with <code>#task</code>.</br>Other checklist items will remain normal checklist items and not appear in queries or get a done date set.</p><p>See the <a href="https://obsidian-tasks-group.github.io/obsidian-tasks/getting-started/global-filter/">documentation</a>.</p>')).addText(n=>{let i=z();n.setPlaceholder("e.g. #task or TODO").setValue(i.globalFilter).onChange(s=>J(this,null,function*(){ct({globalFilter:s}),yield this.plugin.saveSettings()}))}),new vt.Setting(t).setName("Remove global filter from description").setDesc("Enabling this removes the string that you set as global filter from the task description when displaying a task.").addToggle(n=>{let i=z();n.setValue(i.removeGlobalFilter).onChange(s=>J(this,null,function*(){ct({removeGlobalFilter:s}),yield this.plugin.saveSettings()}))}),t.createEl("h4",{text:"Date Settings"}),new vt.Setting(t).setName("Set done date on every completed task").setDesc("Enabling this will add a timestamp \u2705 YYYY-MM-DD at the end when a task is toggled to done").addToggle(n=>{let i=z();n.setValue(i.setDoneDate).onChange(s=>J(this,null,function*(){ct({setDoneDate:s}),yield this.plugin.saveSettings()}))}),new vt.Setting(t).setName("Use filename as Scheduled date for undated tasks").setDesc(Fn.createFragmentWithHTML('Save time entering Scheduled (\u23F3) dates.</br>If this option is enabled, any undated tasks will be given a default Scheduled date extracted from their file name.</br>The date in the file name must be in one of <code>YYYY-MM-DD</code> or <code>YYYYMMDD</code> formats.</br>Undated tasks have none of Due (\u{1F4C5} ), Scheduled (\u23F3) and Start (\u{1F6EB}) dates.</br><p>See the <a href="https://obsidian-tasks-group.github.io/obsidian-tasks/getting-started/use-filename-as-default-date/">documentation</a>.</p>')).addToggle(n=>{let i=z();n.setValue(i.useFilenameAsScheduledDate).onChange(s=>J(this,null,function*(){ct({useFilenameAsScheduledDate:s}),yield this.plugin.saveSettings()}))}),new vt.Setting(t).setName("Folders with default Scheduled dates").setDesc("Leave empty if you want to use default Scheduled dates everywhere, or enter a comma-separated list of folders.").addText(n=>J(this,null,function*(){let i=z();yield this.plugin.saveSettings(),n.setValue(Fn.renderFolderArray(i.filenameAsDateFolders)).onChange(s=>J(this,null,function*(){let a=Fn.parseCommaSeparatedFolders(s);ct({filenameAsDateFolders:a}),yield this.plugin.saveSettings()}))})),t.createEl("h4",{text:"Auto-suggest Settings"}),new vt.Setting(t).setName("Auto-suggest task content").setDesc("Enabling this will open an intelligent suggest menu while typing inside a recognized task line.").addToggle(n=>{let i=z();n.setValue(i.autoSuggestInEditor).onChange(s=>J(this,null,function*(){ct({autoSuggestInEditor:s}),yield this.plugin.saveSettings()}))}),new vt.Setting(t).setName("Minimum match length for auto-suggest").setDesc("If higher than 0, auto-suggest will be triggered only when the beginning of any supported keywords is recognized.").addSlider(n=>{let i=z();n.setLimits(0,3,1).setValue(i.autoSuggestMinMatch).setDynamicTooltip().onChange(s=>J(this,null,function*(){ct({autoSuggestMinMatch:s}),yield this.plugin.saveSettings()}))}),new vt.Setting(t).setName("Maximum number of auto-suggestions to show").setDesc('How many suggestions should be shown when an auto-suggest menu pops up (including the "\u23CE" option).').addSlider(n=>{let i=z();n.setLimits(3,12,1).setValue(i.autoSuggestMaxItems).setDynamicTooltip().onChange(s=>J(this,null,function*(){ct({autoSuggestMaxItems:s}),yield this.plugin.saveSettings()}))}),t.createEl("h4",{text:"Dialog Settings"}),new vt.Setting(t).setName("Provide access keys in dialogs").setDesc("If the access keys (keyboard shortcuts) for various controls in dialog boxes conflict with system keyboard shortcuts or assistive technology functionality that is important for you, you may want to deactivate them here.").addToggle(n=>{let i=z();n.setValue(i.provideAccessKeys).onChange(s=>J(this,null,function*(){ct({provideAccessKeys:s}),yield this.plugin.saveSettings()}))})}static parseCommaSeparatedFolders(t){return t.split(",").map(n=>n.trim()).map(n=>n.replace(/^\/|\/$/g,"")).filter(n=>n!=="")}static renderFolderArray(t){return t.join(",")}},cs=Fn;cs.createFragmentWithHTML=t=>createFragment(n=>n.createDiv().innerHTML=t);var D_=require("obsidian");var oA=`${Ft}${Ut}${qt}`;function R_(r,e,t){let n=[];n=n.concat(cA(r,e,t)),n=n.concat(dA(r,e,t));let i=lA(r,t),s=Fd(r,/([a-zA-Z'_-]*)/g,e),a=!1;if(s&&s.length>0){let o=s[0];if(o.length>=Math.max(1,t.autoSuggestMinMatch)){let u=i.filter(l=>l.displayText.toLowerCase().includes(o.toLowerCase()));for(let l of u)n.push({suggestionType:"match",displayText:l.displayText,appendText:l.appendText,insertAt:s.index,insertSkip:o.length}),a=!0}}return!a&&t.autoSuggestMinMatch===0&&(n=n.concat(i)),n.length>0&&!n.some(o=>o.suggestionType==="match")&&n.unshift({suggestionType:"empty",displayText:"\u23CE",appendText:`
`}),n=n.slice(0,t.autoSuggestMaxItems),n}function uA(r){if(Object.values(Ee).some(e=>e.length>0&&r.includes(e)))return!0}function lA(r,e){let t=[];return r.includes(qt)||t.push({displayText:`${qt} due date`,appendText:`${qt} `}),r.includes(Ft)||t.push({displayText:`${Ft} start date`,appendText:`${Ft} `}),r.includes(Ut)||t.push({displayText:`${Ut} scheduled date`,appendText:`${Ut} `}),uA(r)||(t.push({displayText:`${Ee.High} high priority`,appendText:`${Ee.High} `}),t.push({displayText:`${Ee.Medium} medium priority`,appendText:`${Ee.Medium} `}),t.push({displayText:`${Ee.Low} low priority`,appendText:`${Ee.Low} `})),r.includes(xt)||t.push({displayText:`${xt} recurring (repeat)`,appendText:`${xt} `}),t}function cA(r,e,t){let n=["today","tomorrow","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","next week","next month","next year"],i=[],s=new RegExp(`([${oA}])\\s*([0-9a-zA-Z ]*)`,"ug"),a=Fd(r,s,e);if(a&&a.length>=2){let o=a[1],u=a[2];if(u.length<t.autoSuggestMinMatch)return[];let l=u&&u.length>1?ur.parseDate(Dn(u),!0):null;l&&l.isValid()&&i.push({displayText:`${l.format(D.dateFormat)}`,appendText:`${o} ${l.format(D.dateFormat)} `,insertAt:a.index,insertSkip:a[0].length});let c=1,d=5,f=n.filter(h=>u&&u.length>=c&&h.toLowerCase().includes(u.toLowerCase())).slice(0,d);f.length===0&&(f=n.slice(0,d));for(let h of f){let m=`${ur.parseDate(h,!0).format(D.dateFormat)}`;i.push({suggestionType:"match",displayText:`${h} (${m})`,appendText:`${o} ${m} `,insertAt:a.index,insertSkip:a[0].length})}}return i}function dA(r,e,t){var o;let n=["every","every day","every week","every month","every month on the","every year","every week on Sunday","every week on Monday","every week on Tuesday","every week on Wednesday","every week on Thursday","every week on Friday","every week on Saturday"],i=[],s=new RegExp(`(${xt})\\s*([0-9a-zA-Z ]*)`,"ug"),a=Fd(r,s,e);if(a&&a.length>=2){let u=a[1],l=a[2];if(l.length<t.autoSuggestMinMatch)return[];if(l.length>0){let h=(o=De.fromText({recurrenceRuleText:l,startDate:null,scheduledDate:null,dueDate:null}))==null?void 0:o.toText();if(h){let g=`${u} ${h} `;if(i.push({suggestionType:"match",displayText:`\u2705 ${h}`,appendText:g,insertAt:a.index,insertSkip:a[0].length}),a[0]==g)return[]}}let c=1,d=t.autoSuggestMaxItems/2,f=n.filter(h=>l&&l.length>=c&&h.toLowerCase().includes(l.toLowerCase())).slice(0,d);f.length===0&&l.trim().length===0&&(f=n.slice(0,d));for(let h of f)i.push({suggestionType:"match",displayText:`${h}`,appendText:`${u} ${h} `,insertAt:a.index,insertSkip:a[0].length})}return i}function Fd(r,e,t){let n=r.matchAll(e);for(let i of n)if((i==null?void 0:i.index)&&i.index<=t&&t<=i.index+i[0].length)return i;return[]}var Ja=class extends D_.EditorSuggest{constructor(t,n){super(t);this.settings=n}onTrigger(t,n,i){if(!this.settings.autoSuggestInEditor)return null;let s=n.getLine(t.line);return s.contains(this.settings.globalFilter)&&s.match(D.taskRegex)?{start:{line:t.line,ch:0},end:{line:t.line,ch:s.length},query:s}:null}getSuggestions(t){let n=t.query,i=t.editor.getCursor(),s=R_(n,i.ch,this.settings),a=[];for(let o of s)a.push(lt(Re({},o),{context:t}));return a}renderSuggestion(t,n){n.setText(t.displayText)}selectSuggestion(t,n){var u,l,c;let i=t.context.editor;if(t.suggestionType==="empty"){this.close();let d=new KeyboardEvent("keydown",{code:"Enter",key:"Enter"});(l=(u=i==null?void 0:i.cm)==null?void 0:u.contentDOM)==null||l.dispatchEvent(d);return}let s=t.context.editor.getCursor(),a={line:s.line,ch:(c=t.insertAt)!=null?c:s.ch},o=t.insertSkip?{line:s.line,ch:a.ch+t.insertSkip}:void 0;t.context.editor.replaceRange(t.appendText,a,o),t.context.editor.setCursor({line:s.line,ch:a.ch+t.appendText.length})}};var eo=class extends M_.Plugin{onload(){return J(this,null,function*(){console.log('loading plugin "tasks"'),yield this.loadSettings(),this.addSettingTab(new cs({plugin:this})),af({metadataCache:this.app.metadataCache,vault:this.app.vault});let t=new Ma({obsidianEvents:this.app.workspace});this.cache=new _r({metadataCache:this.app.metadataCache,vault:this.app.vault,events:t}),this.inlineRenderer=new Oa({plugin:this}),this.queryRenderer=new Xa({plugin:this,events:t}),this.registerEditorExtension(l_()),this.registerEditorSuggest(new Ja(this.app,z())),new Da({plugin:this})})}onunload(){var t;console.log('unloading plugin "tasks"'),(t=this.cache)==null||t.unload()}loadSettings(){return J(this,null,function*(){let t=yield this.loadData();ct(t)})}saveSettings(){return J(this,null,function*(){yield this.saveData(z())})}};
